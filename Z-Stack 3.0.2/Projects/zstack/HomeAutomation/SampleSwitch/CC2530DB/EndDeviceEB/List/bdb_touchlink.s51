///////////////////////////////////////////////////////////////////////////////
//
// IAR C/C++ Compiler V10.30.1.6000 for 8051              30/Jul/2020  16:03:37
// Copyright 2004-2018 IAR Systems AB.
// PC-locked license - IAR Embedded Workbench for 8051
//
//    Core               =  plain
//    Code model         =  banked
//    Data model         =  large
//    Calling convention =  xdata reentrant
//    Constant location  =  data_rom
//    Dptr setup         =  1,16
//                          
//    Source file        =  
//        D:\AA\Z-Stack 3.0.2\Components\stack\bdb\bdb_touchlink.c
//    Command line       =  
//        -f C:\Users\sunli\AppData\Local\Temp\EWFC6A.tmp ("D:\AA\Z-Stack
//        3.0.2\Components\stack\bdb\bdb_touchlink.c" -D SECURE=1 -D
//        TC_LINKKEY_JOIN -D NV_INIT -D NV_RESTORE -D xPOWER_SAVING -D
//        NWK_AUTO_POLL -D xZTOOL_P1 -D xMT_TASK -D xMT_APP_FUNC -D
//        xMT_SYS_FUNC -D xMT_ZDO_FUNC -D xMT_ZDO_MGMT -D xMT_APP_CNF_FUNC -D
//        LCD_SUPPORTED=DEBUG -D MULTICAST_ENABLED=FALSE -D ZCL_READ -D
//        ZCL_DISCOVER -D ZCL_WRITE -D ZCL_BASIC -D ZCL_IDENTIFY -D ZCL_ON_OFF
//        -D ZCL_GROUPS -D BDB_TL_INITIATOR -D INTER_PAN -lC "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\List"
//        -lA "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\List"
//        --diag_suppress Pe001,Pa010 -o "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\Obj"
//        -e --debug --core=plain --dptr=16,1 --data_model=large
//        --code_model=banked --calling_convention=xdata_reentrant
//        --place_constants=data_rom --nr_virtual_regs 16 -f "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev.cfg"
//        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3
//        -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"
//        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
//        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFFF
//        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
//        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
//        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
//        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
//        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
//        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
//        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
//        -DMAX_BINDING_CLUSTER_IDS=4 -DDEFAULT_KEY={0}
//        -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
//        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
//        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
//        -DREJOIN_POLL_RATE=440 -DREJOIN_BACKOFF=900000 -DREJOIN_SCAN=900000
//        -DENABLE_LED4_DISABLE_S1) -f "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL.cfg"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\" -I
//        "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\Source\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\Source\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\ZMain\TI2530DB\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\include\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\include\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\high_level\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mt\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\osal\include\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\services\saddr\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\services\sdata\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\af\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\bdb\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\gp\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\nwk\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sapi\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sec\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sys\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\zcl\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\zdo\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\zmac\"
//        -I "D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\zmac\f8w\"
//        -On --require_prototypes --no_cse --no_unroll --no_inline
//        --no_code_motion --no_tbaa --no_cross_call)
//    Locale             =  Chinese (Simplified)_CHN.936
//    List file          =  
//        D:\AA\Z-Stack
//        3.0.2\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\List\bdb_touchlink.s51
//
///////////////////////////////////////////////////////////////////////////////

        NAME bdb_touchlink

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__register_banks", "*"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?V0
        EXTERN ?V1
        EXTERN ?V2
        EXTERN ?V3
        EXTERN ?V4
        EXTERN ?V5
        EXTERN ?V6
        EXTERN ?V7
        EXTERN ?V8
        EXTERN ?V9
        EXTERN ?V10
        EXTERN ?V11
        EXTERN ?V12
        EXTERN ?V13
        EXTERN ?V14
        EXTERN ?V15
        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?L_ADD
        EXTERN ?L_ADD_X
        EXTERN ?L_EQ_X
        EXTERN ?L_MOV_TO_X
        EXTERN ?L_MOV_X
        EXTERN ?L_SHL
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_FOUR
        EXTERN ?PUSH_XSTACK8_X_TWO
        EXTERN ?PUSH_XSTACK_I_FOUR
        EXTERN ?PUSH_XSTACK_I_ONE
        EXTERN ?PUSH_XSTACK_I_THREE
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?UL_SHR
        EXTERN ?US_SWITCH_SPARSE
        EXTERN ?XLOAD_R0123
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN ?XSTACK_DISP100_8
        EXTERN ?XSTACK_DISP101_8
        EXTERN ?XSTACK_DISP102_8
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC `??touchLinkStartRtr::?relay`
        FUNCTION `??touchLinkStartRtr::?relay`,0203H
        FUNCTION `??touchLink_BeaconIndCB::?relay`,0203H
        FUNCTION `??touchLink_BuildAesKey::?relay`,0203H
        PUBLIC `??touchLink_DecryptNwkKey::?relay`
        FUNCTION `??touchLink_DecryptNwkKey::?relay`,0203H
        PUBLIC `??touchLink_DevRejoin::?relay`
        FUNCTION `??touchLink_DevRejoin::?relay`,0203H
        PUBLIC `??touchLink_DeviceIsInitiator::?relay`
        FUNCTION `??touchLink_DeviceIsInitiator::?relay`,0203H
        PUBLIC `??touchLink_EncryptNwkKey::?relay`
        FUNCTION `??touchLink_EncryptNwkKey::?relay`,0203H
        PUBLIC `??touchLink_FreeNwkParamList::?relay`
        FUNCTION `??touchLink_FreeNwkParamList::?relay`,0203H
        PUBLIC `??touchLink_GenerateRandNum::?relay`
        FUNCTION `??touchLink_GenerateRandNum::?relay`,0203H
        PUBLIC `??touchLink_GerFreeRanges::?relay`
        FUNCTION `??touchLink_GerFreeRanges::?relay`,0203H
        PUBLIC `??touchLink_GetDeviceInitiator::?relay`
        FUNCTION `??touchLink_GetDeviceInitiator::?relay`,0203H
        PUBLIC `??touchLink_GetMsgRssi::?relay`
        FUNCTION `??touchLink_GetMsgRssi::?relay`,0203H
        PUBLIC `??touchLink_GetNumGrpIDs::?relay`
        FUNCTION `??touchLink_GetNumGrpIDs::?relay`,0203H
        PUBLIC `??touchLink_GetNumSubDevices::?relay`
        FUNCTION `??touchLink_GetNumSubDevices::?relay`,0203H
        PUBLIC `??touchLink_GetNwkKeyBitmask::?relay`
        FUNCTION `??touchLink_GetNwkKeyBitmask::?relay`,0203H
        PUBLIC `??touchLink_GetRandPrimaryChannel::?relay`
        FUNCTION `??touchLink_GetRandPrimaryChannel::?relay`,0203H
        PUBLIC `??touchLink_GetSubDeviceInfo::?relay`
        FUNCTION `??touchLink_GetSubDeviceInfo::?relay`,0203H
        PUBLIC `??touchLink_InitFreeRanges::?relay`
        FUNCTION `??touchLink_InitFreeRanges::?relay`,0203H
        FUNCTION `??touchLink_InitNV::?relay`,0203H
        PUBLIC `??touchLink_InitVariables::?relay`
        FUNCTION `??touchLink_InitVariables::?relay`,0203H
        PUBLIC `??touchLink_IsValidSplitFreeRanges::?relay`
        FUNCTION `??touchLink_IsValidSplitFreeRanges::?relay`,0203H
        PUBLIC `??touchLink_IsValidTransID::?relay`
        FUNCTION `??touchLink_IsValidTransID::?relay`,0203H
        PUBLIC `??touchLink_ItemInit::?relay`
        FUNCTION `??touchLink_ItemInit::?relay`,0203H
        PUBLIC `??touchLink_NewNwkUpdateId::?relay`
        FUNCTION `??touchLink_NewNwkUpdateId::?relay`,0203H
        FUNCTION `??touchLink_NwkDiscoveryCnfCB::?relay`,0203H
        PUBLIC `??touchLink_PerformNetworkDisc::?relay`
        FUNCTION `??touchLink_PerformNetworkDisc::?relay`,0203H
        PUBLIC `??touchLink_PermitJoin::?relay`
        FUNCTION `??touchLink_PermitJoin::?relay`,0203H
        PUBLIC `??touchLink_PopGrpIDRange::?relay`
        FUNCTION `??touchLink_PopGrpIDRange::?relay`,0203H
        PUBLIC `??touchLink_PopNwkAddress::?relay`
        FUNCTION `??touchLink_PopNwkAddress::?relay`,0203H
        PUBLIC `??touchLink_ProcessNwkUpdate::?relay`
        FUNCTION `??touchLink_ProcessNwkUpdate::?relay`,0203H
        PUBLIC `??touchLink_RouterProcessZDOMsg::?relay`
        FUNCTION `??touchLink_RouterProcessZDOMsg::?relay`,0203H
        PUBLIC `??touchLink_SendDeviceInfoRsp::?relay`
        FUNCTION `??touchLink_SendDeviceInfoRsp::?relay`,0203H
        PUBLIC `??touchLink_SendLeaveReq::?relay`
        FUNCTION `??touchLink_SendLeaveReq::?relay`,0203H
        PUBLIC `??touchLink_SetChannel::?relay`
        FUNCTION `??touchLink_SetChannel::?relay`,0203H
        PUBLIC `??touchLink_SetMacNwkParams::?relay`
        FUNCTION `??touchLink_SetMacNwkParams::?relay`,0203H
        PUBLIC `??touchLink_SetNIB::?relay`
        FUNCTION `??touchLink_SetNIB::?relay`,0203H
        PUBLIC `??touchLink_SetTouchLinkTaskId::?relay`
        FUNCTION `??touchLink_SetTouchLinkTaskId::?relay`,0203H
        PUBLIC `??touchLink_SplitFreeRanges::?relay`
        FUNCTION `??touchLink_SplitFreeRanges::?relay`,0203H
        PUBLIC `??touchLink_UpdateFreeRanges::?relay`
        FUNCTION `??touchLink_UpdateFreeRanges::?relay`,0203H
        PUBLIC `??touchLink_UpdateNV::?relay`
        FUNCTION `??touchLink_UpdateNV::?relay`,0203H
        PUBLIC `??touchLink_UpdateNwkKey::?relay`
        FUNCTION `??touchLink_UpdateNwkKey::?relay`,0203H
        PUBWEAK __Constant_1
        PUBLIC pDiscoveredNwkParamList
        PUBLIC touchLinkGrpIDsBegin
        PUBLIC touchLinkGrpIDsEnd
        PUBLIC touchLinkLastAcceptedTransID
        PUBLIC touchLinkLeaveInitiated
        PUBLIC touchLinkResponseID
        PUBLIC touchLinkStartRtr
        FUNCTION touchLinkStartRtr,0a1203H
        ARGFRAME XSTACK, 4, STACK
        LOCFRAME XSTACK, 21, STACK
        PUBLIC touchLinkSubDevicesTbl
        PUBLIC touchLinkTransID
        FUNCTION touchLink_BeaconIndCB,0a1603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 18, STACK
        FUNCTION touchLink_BuildAesKey,080203H
        ARGFRAME XSTACK, 99, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 20, STACK
        PUBLIC touchLink_DecryptNwkKey
        FUNCTION touchLink_DecryptNwkKey,0a1203H
        ARGFRAME XSTACK, 21, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 76, STACK
        PUBLIC touchLink_DevRejoin
        FUNCTION touchLink_DevRejoin,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 18, STACK
        PUBLIC touchLink_DeviceIsInitiator
        FUNCTION touchLink_DeviceIsInitiator,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_EncryptNwkKey
        FUNCTION touchLink_EncryptNwkKey,0a1203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 99, STACK
        PUBLIC touchLink_FreeNwkParamList
        FUNCTION touchLink_FreeNwkParamList,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC touchLink_GenerateRandNum
        FUNCTION touchLink_GenerateRandNum,0a1203H
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC touchLink_GerFreeRanges
        FUNCTION touchLink_GerFreeRanges,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_GetDeviceInitiator
        FUNCTION touchLink_GetDeviceInitiator,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_GetMsgRssi
        FUNCTION touchLink_GetMsgRssi,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC touchLink_GetNumGrpIDs
        FUNCTION touchLink_GetNumGrpIDs,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_GetNumSubDevices
        FUNCTION touchLink_GetNumSubDevices,0203H
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_GetNwkKeyBitmask
        FUNCTION touchLink_GetNwkKeyBitmask,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC touchLink_GetRandPrimaryChannel
        FUNCTION touchLink_GetRandPrimaryChannel,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_GetSubDeviceInfo
        FUNCTION touchLink_GetSubDeviceInfo,0a1203H
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 12, STACK
        PUBLIC touchLink_InitFreeRanges
        FUNCTION touchLink_InitFreeRanges,0203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        FUNCTION touchLink_InitNV,0a1203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 12, STACK
        PUBLIC touchLink_InitVariables
        FUNCTION touchLink_InitVariables,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC touchLink_IsValidSplitFreeRanges
        FUNCTION touchLink_IsValidSplitFreeRanges,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 4, STACK
        PUBLIC touchLink_IsValidTransID
        FUNCTION touchLink_IsValidTransID,080203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        PUBLIC touchLink_ItemInit
        FUNCTION touchLink_ItemInit,0a1203H
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 16, STACK
        PUBLIC touchLink_NewNwkUpdateId
        FUNCTION touchLink_NewNwkUpdateId,0203H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION touchLink_NwkDiscoveryCnfCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC touchLink_PerformNetworkDisc
        FUNCTION touchLink_PerformNetworkDisc,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        PUBLIC touchLink_PermitJoin
        FUNCTION touchLink_PermitJoin,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC touchLink_PopGrpIDRange
        FUNCTION touchLink_PopGrpIDRange,080203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC touchLink_PopNwkAddress
        FUNCTION touchLink_PopNwkAddress,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 4, STACK
        PUBLIC touchLink_ProcessNwkUpdate
        FUNCTION touchLink_ProcessNwkUpdate,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        PUBLIC touchLink_RouterProcessZDOMsg
        FUNCTION touchLink_RouterProcessZDOMsg,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 29, STACK
        PUBLIC touchLink_SendDeviceInfoRsp
        FUNCTION touchLink_SendDeviceInfoRsp,0a1203H
        ARGFRAME XSTACK, 4, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 25, STACK
        PUBLIC touchLink_SendLeaveReq
        FUNCTION touchLink_SendLeaveReq,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 5, STACK
        PUBLIC touchLink_SetChannel
        FUNCTION touchLink_SetChannel,0a1203H
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 13, STACK
        PUBLIC touchLink_SetMacNwkParams
        FUNCTION touchLink_SetMacNwkParams,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        PUBLIC touchLink_SetNIB
        FUNCTION touchLink_SetNIB,0a1203H
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 20, STACK
        PUBLIC touchLink_SetTouchLinkTaskId
        FUNCTION touchLink_SetTouchLinkTaskId,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC touchLink_SplitFreeRanges
        FUNCTION touchLink_SplitFreeRanges,080203H
        ARGFRAME XSTACK, 4, STACK
        LOCFRAME XSTACK, 18, STACK
        PUBLIC touchLink_UpdateFreeRanges
        FUNCTION touchLink_UpdateFreeRanges,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC touchLink_UpdateNV
        FUNCTION touchLink_UpdateNV,0a1203H
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 14, STACK
        PUBLIC touchLink_UpdateNwkKey
        FUNCTION touchLink_UpdateNwkKey,0a1203H
        ARGFRAME XSTACK, 68, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 20, STACK
        PUBLIC touchlinkDistNwk
        PUBLIC touchlinkFNReset
        
          CFI Names cfiNames0
          CFI StackFrame CFA_SP SP IDATA
          CFI StackFrame CFA_PSP16 PSP16 XDATA
          CFI StackFrame CFA_XSP16 XSP16 XDATA
          CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
          CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
          CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
          CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
          CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
          CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
          CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
          CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
          CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
          CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
          CFI VirtualResource ?RET:24
          CFI Resource ?BRET_EXT:8
          CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
          CFI ResourceParts PSP16 PSPH, PSPL
          CFI ResourceParts XSP16 XSPH, XSPL
          CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
          CFI EndNames cfiNames0
        
          CFI Common cfiCommon0 Using cfiNames0
          CFI CodeAlign 1
          CFI DataAlign -1
          CFI ReturnAddress ?RET CODE
          CFI CFA_DOVERLAY Used
          CFI CFA_IOVERLAY Used
          CFI CFA_SP SP+-3
          CFI CFA_PSP16 PSP16+0
          CFI CFA_XSP16 XSP16+0
          CFI `PSW.CY` SameValue
          CFI `B.BR0` SameValue
          CFI `B.BR1` SameValue
          CFI `B.BR2` SameValue
          CFI `B.BR3` SameValue
          CFI `B.BR4` SameValue
          CFI `B.BR5` SameValue
          CFI `B.BR6` SameValue
          CFI `B.BR7` SameValue
          CFI `VB.BR8` SameValue
          CFI `VB.BR9` SameValue
          CFI `VB.BR10` SameValue
          CFI `VB.BR11` SameValue
          CFI `VB.BR12` SameValue
          CFI `VB.BR13` SameValue
          CFI `VB.BR14` SameValue
          CFI `VB.BR15` SameValue
          CFI VB SameValue
          CFI B Undefined
          CFI A Undefined
          CFI PSW SameValue
          CFI DPL0 SameValue
          CFI DPH0 SameValue
          CFI R0 Undefined
          CFI R1 Undefined
          CFI R2 Undefined
          CFI R3 Undefined
          CFI R4 Undefined
          CFI R5 Undefined
          CFI R6 SameValue
          CFI R7 SameValue
          CFI V0 SameValue
          CFI V1 SameValue
          CFI V2 SameValue
          CFI V3 SameValue
          CFI V4 SameValue
          CFI V5 SameValue
          CFI V6 SameValue
          CFI V7 SameValue
          CFI V8 SameValue
          CFI V9 SameValue
          CFI V10 SameValue
          CFI V11 SameValue
          CFI V12 SameValue
          CFI V13 SameValue
          CFI V14 SameValue
          CFI V15 SameValue
          CFI PSPH Undefined
          CFI PSPL Undefined
          CFI XSPH Undefined
          CFI XSPL Undefined
          CFI ?RET Concat
          CFI ?BRET_EXT Frame(CFA_SP, 3)
          CFI ?RET_HIGH Frame(CFA_SP, 2)
          CFI ?RET_LOW Frame(CFA_SP, 1)
          CFI EndCommon cfiCommon0
        
AssocCount          SYMBOL "AssocCount"
`??AssocCount::?relay` SYMBOL "?relay", AssocCount
NLME_GetExtAddr     SYMBOL "NLME_GetExtAddr"
`??NLME_GetExtAddr::?relay` SYMBOL "?relay", NLME_GetExtAddr
NLME_LeaveReq       SYMBOL "NLME_LeaveReq"
`??NLME_LeaveReq::?relay` SYMBOL "?relay", NLME_LeaveReq
NLME_NwkDiscReq2    SYMBOL "NLME_NwkDiscReq2"
`??NLME_NwkDiscReq2::?relay` SYMBOL "?relay", NLME_NwkDiscReq2
NLME_NwkDiscTerm    SYMBOL "NLME_NwkDiscTerm"
`??NLME_NwkDiscTerm::?relay` SYMBOL "?relay", NLME_NwkDiscTerm
NLME_OrphanStateSet SYMBOL "NLME_OrphanStateSet"
`??NLME_OrphanStateSet::?relay` SYMBOL "?relay", NLME_OrphanStateSet
NLME_PermitJoiningRequest SYMBOL "NLME_PermitJoiningRequest"
`??NLME_PermitJoiningRequest::?relay` SYMBOL "?relay", NLME_PermitJoiningRequest
NLME_ReJoinRequest  SYMBOL "NLME_ReJoinRequest"
`??NLME_ReJoinRequest::?relay` SYMBOL "?relay", NLME_ReJoinRequest
NLME_SetBroadcastFilter SYMBOL "NLME_SetBroadcastFilter"
`??NLME_SetBroadcastFilter::?relay` SYMBOL "?relay", NLME_SetBroadcastFilter
NLME_SetUpdateID    SYMBOL "NLME_SetUpdateID"
`??NLME_SetUpdateID::?relay` SYMBOL "?relay", NLME_SetUpdateID
NLME_UpdateLinkStatus SYMBOL "NLME_UpdateLinkStatus"
`??NLME_UpdateLinkStatus::?relay` SYMBOL "?relay", NLME_UpdateLinkStatus
SSP_ReadNwkActiveKey SYMBOL "SSP_ReadNwkActiveKey"
`??SSP_ReadNwkActiveKey::?relay` SYMBOL "?relay", SSP_ReadNwkActiveKey
SSP_SwitchNwkKey    SYMBOL "SSP_SwitchNwkKey"
`??SSP_SwitchNwkKey::?relay` SYMBOL "?relay", SSP_SwitchNwkKey
SSP_UpdateNwkKey    SYMBOL "SSP_UpdateNwkKey"
`??SSP_UpdateNwkKey::?relay` SYMBOL "?relay", SSP_UpdateNwkKey
StubAPS_RegisterApp SYMBOL "StubAPS_RegisterApp"
`??StubAPS_RegisterApp::?relay` SYMBOL "?relay", StubAPS_RegisterApp
ZDApp_LeaveCtrlReset SYMBOL "ZDApp_LeaveCtrlReset"
`??ZDApp_LeaveCtrlReset::?relay` SYMBOL "?relay", ZDApp_LeaveCtrlReset
ZDApp_NwkStateUpdateCB SYMBOL "ZDApp_NwkStateUpdateCB"
`??ZDApp_NwkStateUpdateCB::?relay` SYMBOL "?relay", ZDApp_NwkStateUpdateCB
ZDApp_SaveNwkKey    SYMBOL "ZDApp_SaveNwkKey"
`??ZDApp_SaveNwkKey::?relay` SYMBOL "?relay", ZDApp_SaveNwkKey
ZDApp_SecInit       SYMBOL "ZDApp_SecInit"
`??ZDApp_SecInit::?relay` SYMBOL "?relay", ZDApp_SecInit
ZDOInitDeviceEx     SYMBOL "ZDOInitDeviceEx"
`??ZDOInitDeviceEx::?relay` SYMBOL "?relay", ZDOInitDeviceEx
ZDO_DeregisterForZdoCB SYMBOL "ZDO_DeregisterForZdoCB"
`??ZDO_DeregisterForZdoCB::?relay` SYMBOL "?relay", ZDO_DeregisterForZdoCB
ZDO_ParseDeviceAnnce SYMBOL "ZDO_ParseDeviceAnnce"
`??ZDO_ParseDeviceAnnce::?relay` SYMBOL "?relay", ZDO_ParseDeviceAnnce
ZDO_RegisterForZdoCB SYMBOL "ZDO_RegisterForZdoCB"
`??ZDO_RegisterForZdoCB::?relay` SYMBOL "?relay", ZDO_RegisterForZdoCB
ZDP_SendData        SYMBOL "ZDP_SendData"
`??ZDP_SendData::?relay` SYMBOL "?relay", ZDP_SendData
ZDSecMgrUpdateTCAddress SYMBOL "ZDSecMgrUpdateTCAddress"
`??ZDSecMgrUpdateTCAddress::?relay` SYMBOL "?relay", ZDSecMgrUpdateTCAddress
ZMacSetReq          SYMBOL "ZMacSetReq"
`??ZMacSetReq::?relay` SYMBOL "?relay", ZMacSetReq
afFindEndPointDesc  SYMBOL "afFindEndPointDesc"
`??afFindEndPointDesc::?relay` SYMBOL "?relay", afFindEndPointDesc
bdbTL_Send_DeviceInfoRsp SYMBOL "bdbTL_Send_DeviceInfoRsp"
`??bdbTL_Send_DeviceInfoRsp::?relay` SYMBOL "?relay", bdbTL_Send_DeviceInfoRsp
bdb_RegisterSimpleDescriptor SYMBOL "bdb_RegisterSimpleDescriptor"
`??bdb_RegisterSimpleDescriptor::?relay` SYMBOL "?relay", bdb_RegisterSimpleDescriptor
bdb_ZedAttemptRecoverNwk SYMBOL "bdb_ZedAttemptRecoverNwk"
`??bdb_ZedAttemptRecoverNwk::?relay` SYMBOL "?relay", bdb_ZedAttemptRecoverNwk
bdb_reportCommissioningState SYMBOL "bdb_reportCommissioningState"
`??bdb_reportCommissioningState::?relay` SYMBOL "?relay", bdb_reportCommissioningState
bdb_setChannel      SYMBOL "bdb_setChannel"
`??bdb_setChannel::?relay` SYMBOL "?relay", bdb_setChannel
nwkNeighborAdd      SYMBOL "nwkNeighborAdd"
`??nwkNeighborAdd::?relay` SYMBOL "?relay", nwkNeighborAdd
nwkNeighborGetLinkInfo SYMBOL "nwkNeighborGetLinkInfo"
`??nwkNeighborGetLinkInfo::?relay` SYMBOL "?relay", nwkNeighborGetLinkInfo
nwkTransmissionFailures SYMBOL "nwkTransmissionFailures"
`??nwkTransmissionFailures::?relay` SYMBOL "?relay", nwkTransmissionFailures
osal_mem_alloc      SYMBOL "osal_mem_alloc"
`??osal_mem_alloc::?relay` SYMBOL "?relay", osal_mem_alloc
osal_mem_free       SYMBOL "osal_mem_free"
`??osal_mem_free::?relay` SYMBOL "?relay", osal_mem_free
osal_memcpy         SYMBOL "osal_memcpy"
`??osal_memcpy::?relay` SYMBOL "?relay", osal_memcpy
osal_memset         SYMBOL "osal_memset"
`??osal_memset::?relay` SYMBOL "?relay", osal_memset
osal_nv_item_init   SYMBOL "osal_nv_item_init"
`??osal_nv_item_init::?relay` SYMBOL "?relay", osal_nv_item_init
osal_nv_read        SYMBOL "osal_nv_read"
`??osal_nv_read::?relay` SYMBOL "?relay", osal_nv_read
osal_nv_write       SYMBOL "osal_nv_write"
`??osal_nv_write::?relay` SYMBOL "?relay", osal_nv_write
osal_rand           SYMBOL "osal_rand"
`??osal_rand::?relay` SYMBOL "?relay", osal_rand
osal_set_event      SYMBOL "osal_set_event"
`??osal_set_event::?relay` SYMBOL "?relay", osal_set_event
sAddrExtCpy         SYMBOL "sAddrExtCpy"
`??sAddrExtCpy::?relay` SYMBOL "?relay", sAddrExtCpy
sspAesDecrypt       SYMBOL "sspAesDecrypt"
`??sspAesDecrypt::?relay` SYMBOL "?relay", sspAesDecrypt
sspAesEncrypt       SYMBOL "sspAesEncrypt"
`??sspAesEncrypt::?relay` SYMBOL "?relay", sspAesEncrypt
zcl_getRawAFMsg     SYMBOL "zcl_getRawAFMsg"
`??zcl_getRawAFMsg::?relay` SYMBOL "?relay", zcl_getRawAFMsg
zgWriteStartupOptions SYMBOL "zgWriteStartupOptions"
`??zgWriteStartupOptions::?relay` SYMBOL "?relay", zgWriteStartupOptions
touchLinkStartRtr   SYMBOL "touchLinkStartRtr"
`??touchLinkStartRtr::?relay` SYMBOL "?relay", touchLinkStartRtr
touchLink_DecryptNwkKey SYMBOL "touchLink_DecryptNwkKey"
`??touchLink_DecryptNwkKey::?relay` SYMBOL "?relay", touchLink_DecryptNwkKey
touchLink_DevRejoin SYMBOL "touchLink_DevRejoin"
`??touchLink_DevRejoin::?relay` SYMBOL "?relay", touchLink_DevRejoin
touchLink_DeviceIsInitiator SYMBOL "touchLink_DeviceIsInitiator"
`??touchLink_DeviceIsInitiator::?relay` SYMBOL "?relay", touchLink_DeviceIsInitiator
touchLink_EncryptNwkKey SYMBOL "touchLink_EncryptNwkKey"
`??touchLink_EncryptNwkKey::?relay` SYMBOL "?relay", touchLink_EncryptNwkKey
touchLink_FreeNwkParamList SYMBOL "touchLink_FreeNwkParamList"
`??touchLink_FreeNwkParamList::?relay` SYMBOL "?relay", touchLink_FreeNwkParamList
touchLink_GenerateRandNum SYMBOL "touchLink_GenerateRandNum"
`??touchLink_GenerateRandNum::?relay` SYMBOL "?relay", touchLink_GenerateRandNum
touchLink_GerFreeRanges SYMBOL "touchLink_GerFreeRanges"
`??touchLink_GerFreeRanges::?relay` SYMBOL "?relay", touchLink_GerFreeRanges
touchLink_GetDeviceInitiator SYMBOL "touchLink_GetDeviceInitiator"
`??touchLink_GetDeviceInitiator::?relay` SYMBOL "?relay", touchLink_GetDeviceInitiator
touchLink_GetMsgRssi SYMBOL "touchLink_GetMsgRssi"
`??touchLink_GetMsgRssi::?relay` SYMBOL "?relay", touchLink_GetMsgRssi
touchLink_GetNumGrpIDs SYMBOL "touchLink_GetNumGrpIDs"
`??touchLink_GetNumGrpIDs::?relay` SYMBOL "?relay", touchLink_GetNumGrpIDs
touchLink_GetNumSubDevices SYMBOL "touchLink_GetNumSubDevices"
`??touchLink_GetNumSubDevices::?relay` SYMBOL "?relay", touchLink_GetNumSubDevices
touchLink_GetNwkKeyBitmask SYMBOL "touchLink_GetNwkKeyBitmask"
`??touchLink_GetNwkKeyBitmask::?relay` SYMBOL "?relay", touchLink_GetNwkKeyBitmask
touchLink_GetRandPrimaryChannel SYMBOL "touchLink_GetRandPrimaryChannel"
`??touchLink_GetRandPrimaryChannel::?relay` SYMBOL "?relay", touchLink_GetRandPrimaryChannel
touchLink_GetSubDeviceInfo SYMBOL "touchLink_GetSubDeviceInfo"
`??touchLink_GetSubDeviceInfo::?relay` SYMBOL "?relay", touchLink_GetSubDeviceInfo
touchLink_InitFreeRanges SYMBOL "touchLink_InitFreeRanges"
`??touchLink_InitFreeRanges::?relay` SYMBOL "?relay", touchLink_InitFreeRanges
touchLink_InitVariables SYMBOL "touchLink_InitVariables"
`??touchLink_InitVariables::?relay` SYMBOL "?relay", touchLink_InitVariables
touchLink_IsValidSplitFreeRanges SYMBOL "touchLink_IsValidSplitFreeRanges"
`??touchLink_IsValidSplitFreeRanges::?relay` SYMBOL "?relay", touchLink_IsValidSplitFreeRanges
touchLink_IsValidTransID SYMBOL "touchLink_IsValidTransID"
`??touchLink_IsValidTransID::?relay` SYMBOL "?relay", touchLink_IsValidTransID
touchLink_ItemInit  SYMBOL "touchLink_ItemInit"
`??touchLink_ItemInit::?relay` SYMBOL "?relay", touchLink_ItemInit
touchLink_NewNwkUpdateId SYMBOL "touchLink_NewNwkUpdateId"
`??touchLink_NewNwkUpdateId::?relay` SYMBOL "?relay", touchLink_NewNwkUpdateId
touchLink_PerformNetworkDisc SYMBOL "touchLink_PerformNetworkDisc"
`??touchLink_PerformNetworkDisc::?relay` SYMBOL "?relay", touchLink_PerformNetworkDisc
touchLink_PermitJoin SYMBOL "touchLink_PermitJoin"
`??touchLink_PermitJoin::?relay` SYMBOL "?relay", touchLink_PermitJoin
touchLink_PopGrpIDRange SYMBOL "touchLink_PopGrpIDRange"
`??touchLink_PopGrpIDRange::?relay` SYMBOL "?relay", touchLink_PopGrpIDRange
touchLink_PopNwkAddress SYMBOL "touchLink_PopNwkAddress"
`??touchLink_PopNwkAddress::?relay` SYMBOL "?relay", touchLink_PopNwkAddress
touchLink_ProcessNwkUpdate SYMBOL "touchLink_ProcessNwkUpdate"
`??touchLink_ProcessNwkUpdate::?relay` SYMBOL "?relay", touchLink_ProcessNwkUpdate
touchLink_RouterProcessZDOMsg SYMBOL "touchLink_RouterProcessZDOMsg"
`??touchLink_RouterProcessZDOMsg::?relay` SYMBOL "?relay", touchLink_RouterProcessZDOMsg
touchLink_SendDeviceInfoRsp SYMBOL "touchLink_SendDeviceInfoRsp"
`??touchLink_SendDeviceInfoRsp::?relay` SYMBOL "?relay", touchLink_SendDeviceInfoRsp
touchLink_SendLeaveReq SYMBOL "touchLink_SendLeaveReq"
`??touchLink_SendLeaveReq::?relay` SYMBOL "?relay", touchLink_SendLeaveReq
touchLink_SetChannel SYMBOL "touchLink_SetChannel"
`??touchLink_SetChannel::?relay` SYMBOL "?relay", touchLink_SetChannel
touchLink_SetMacNwkParams SYMBOL "touchLink_SetMacNwkParams"
`??touchLink_SetMacNwkParams::?relay` SYMBOL "?relay", touchLink_SetMacNwkParams
touchLink_SetNIB    SYMBOL "touchLink_SetNIB"
`??touchLink_SetNIB::?relay` SYMBOL "?relay", touchLink_SetNIB
touchLink_SetTouchLinkTaskId SYMBOL "touchLink_SetTouchLinkTaskId"
`??touchLink_SetTouchLinkTaskId::?relay` SYMBOL "?relay", touchLink_SetTouchLinkTaskId
touchLink_SplitFreeRanges SYMBOL "touchLink_SplitFreeRanges"
`??touchLink_SplitFreeRanges::?relay` SYMBOL "?relay", touchLink_SplitFreeRanges
touchLink_UpdateFreeRanges SYMBOL "touchLink_UpdateFreeRanges"
`??touchLink_UpdateFreeRanges::?relay` SYMBOL "?relay", touchLink_UpdateFreeRanges
touchLink_UpdateNV  SYMBOL "touchLink_UpdateNV"
`??touchLink_UpdateNV::?relay` SYMBOL "?relay", touchLink_UpdateNV
touchLink_UpdateNwkKey SYMBOL "touchLink_UpdateNwkKey"
`??touchLink_UpdateNwkKey::?relay` SYMBOL "?relay", touchLink_UpdateNwkKey

        EXTERN `??AssocCount::?relay`
        FUNCTION `??AssocCount::?relay`,00H
        EXTERN `??NLME_GetExtAddr::?relay`
        FUNCTION `??NLME_GetExtAddr::?relay`,00H
        EXTERN `??NLME_LeaveReq::?relay`
        FUNCTION `??NLME_LeaveReq::?relay`,00H
        EXTERN `??NLME_NwkDiscReq2::?relay`
        FUNCTION `??NLME_NwkDiscReq2::?relay`,00H
        EXTERN `??NLME_NwkDiscTerm::?relay`
        FUNCTION `??NLME_NwkDiscTerm::?relay`,00H
        EXTERN `??NLME_OrphanStateSet::?relay`
        FUNCTION `??NLME_OrphanStateSet::?relay`,00H
        EXTERN `??NLME_PermitJoiningRequest::?relay`
        FUNCTION `??NLME_PermitJoiningRequest::?relay`,00H
        EXTERN `??NLME_ReJoinRequest::?relay`
        FUNCTION `??NLME_ReJoinRequest::?relay`,00H
        EXTERN `??NLME_SetBroadcastFilter::?relay`
        FUNCTION `??NLME_SetBroadcastFilter::?relay`,00H
        EXTERN `??NLME_SetUpdateID::?relay`
        FUNCTION `??NLME_SetUpdateID::?relay`,00H
        EXTERN `??NLME_UpdateLinkStatus::?relay`
        FUNCTION `??NLME_UpdateLinkStatus::?relay`,00H
        EXTERN `??SSP_ReadNwkActiveKey::?relay`
        FUNCTION `??SSP_ReadNwkActiveKey::?relay`,00H
        EXTERN `??SSP_SwitchNwkKey::?relay`
        FUNCTION `??SSP_SwitchNwkKey::?relay`,00H
        EXTERN `??SSP_UpdateNwkKey::?relay`
        FUNCTION `??SSP_UpdateNwkKey::?relay`,00H
        EXTERN `??StubAPS_RegisterApp::?relay`
        FUNCTION `??StubAPS_RegisterApp::?relay`,00H
        EXTERN `??ZDApp_LeaveCtrlReset::?relay`
        FUNCTION `??ZDApp_LeaveCtrlReset::?relay`,00H
        EXTERN `??ZDApp_NwkStateUpdateCB::?relay`
        FUNCTION `??ZDApp_NwkStateUpdateCB::?relay`,00H
        EXTERN `??ZDApp_SaveNwkKey::?relay`
        FUNCTION `??ZDApp_SaveNwkKey::?relay`,00H
        EXTERN `??ZDApp_SecInit::?relay`
        FUNCTION `??ZDApp_SecInit::?relay`,00H
        EXTERN `??ZDOInitDeviceEx::?relay`
        FUNCTION `??ZDOInitDeviceEx::?relay`,00H
        EXTERN `??ZDO_DeregisterForZdoCB::?relay`
        FUNCTION `??ZDO_DeregisterForZdoCB::?relay`,00H
        EXTERN `??ZDO_ParseDeviceAnnce::?relay`
        FUNCTION `??ZDO_ParseDeviceAnnce::?relay`,00H
        EXTERN `??ZDO_RegisterForZdoCB::?relay`
        FUNCTION `??ZDO_RegisterForZdoCB::?relay`,00H
        EXTERN `??ZDP_SendData::?relay`
        FUNCTION `??ZDP_SendData::?relay`,00H
        EXTERN `??ZDSecMgrUpdateTCAddress::?relay`
        FUNCTION `??ZDSecMgrUpdateTCAddress::?relay`,00H
        EXTERN `??ZMacSetReq::?relay`
        FUNCTION `??ZMacSetReq::?relay`,00H
        EXTERN `??afFindEndPointDesc::?relay`
        FUNCTION `??afFindEndPointDesc::?relay`,00H
        EXTERN `??bdbTL_Send_DeviceInfoRsp::?relay`
        FUNCTION `??bdbTL_Send_DeviceInfoRsp::?relay`,00H
        EXTERN `??bdb_RegisterSimpleDescriptor::?relay`
        FUNCTION `??bdb_RegisterSimpleDescriptor::?relay`,00H
        EXTERN `??bdb_ZedAttemptRecoverNwk::?relay`
        FUNCTION `??bdb_ZedAttemptRecoverNwk::?relay`,00H
        EXTERN `??bdb_reportCommissioningState::?relay`
        FUNCTION `??bdb_reportCommissioningState::?relay`,00H
        EXTERN `??bdb_setChannel::?relay`
        FUNCTION `??bdb_setChannel::?relay`,00H
        EXTERN `??nwkNeighborAdd::?relay`
        FUNCTION `??nwkNeighborAdd::?relay`,00H
        EXTERN `??nwkNeighborGetLinkInfo::?relay`
        FUNCTION `??nwkNeighborGetLinkInfo::?relay`,00H
        EXTERN `??nwkTransmissionFailures::?relay`
        FUNCTION `??nwkTransmissionFailures::?relay`,00H
        EXTERN `??osal_mem_alloc::?relay`
        FUNCTION `??osal_mem_alloc::?relay`,00H
        EXTERN `??osal_mem_free::?relay`
        FUNCTION `??osal_mem_free::?relay`,00H
        EXTERN `??osal_memcpy::?relay`
        FUNCTION `??osal_memcpy::?relay`,00H
        EXTERN `??osal_memset::?relay`
        FUNCTION `??osal_memset::?relay`,00H
        EXTERN `??osal_nv_item_init::?relay`
        FUNCTION `??osal_nv_item_init::?relay`,00H
        EXTERN `??osal_nv_read::?relay`
        FUNCTION `??osal_nv_read::?relay`,00H
        EXTERN `??osal_nv_write::?relay`
        FUNCTION `??osal_nv_write::?relay`,00H
        EXTERN `??osal_rand::?relay`
        FUNCTION `??osal_rand::?relay`,00H
        EXTERN `??osal_set_event::?relay`
        FUNCTION `??osal_set_event::?relay`,00H
        EXTERN `??sAddrExtCpy::?relay`
        FUNCTION `??sAddrExtCpy::?relay`,00H
        EXTERN `??sspAesDecrypt::?relay`
        FUNCTION `??sspAesDecrypt::?relay`,00H
        EXTERN `??sspAesEncrypt::?relay`
        FUNCTION `??sspAesEncrypt::?relay`,00H
        EXTERN `??zcl_getRawAFMsg::?relay`
        FUNCTION `??zcl_getRawAFMsg::?relay`,00H
        EXTERN `??zgWriteStartupOptions::?relay`
        FUNCTION `??zgWriteStartupOptions::?relay`,00H
        EXTERN AssocCount
        FUNCTION AssocCount,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetExtAddr
        FUNCTION NLME_GetExtAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_LeaveReq
        FUNCTION NLME_LeaveReq,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 5, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_NwkDiscReq2
        FUNCTION NLME_NwkDiscReq2,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_NwkDiscTerm
        FUNCTION NLME_NwkDiscTerm,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_OrphanStateSet
        FUNCTION NLME_OrphanStateSet,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_PermitJoiningRequest
        FUNCTION NLME_PermitJoiningRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_ReJoinRequest
        FUNCTION NLME_ReJoinRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetBroadcastFilter
        FUNCTION NLME_SetBroadcastFilter,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetUpdateID
        FUNCTION NLME_SetUpdateID,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_UpdateLinkStatus
        FUNCTION NLME_UpdateLinkStatus,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NwkDescList
        EXTERN SSP_ReadNwkActiveKey
        FUNCTION SSP_ReadNwkActiveKey,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN SSP_SwitchNwkKey
        FUNCTION SSP_SwitchNwkKey,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN SSP_UpdateNwkKey
        FUNCTION SSP_UpdateNwkKey,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN StubAPS_RegisterApp
        FUNCTION StubAPS_RegisterApp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_LeaveCtrlReset
        FUNCTION ZDApp_LeaveCtrlReset,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_NwkStateUpdateCB
        FUNCTION ZDApp_NwkStateUpdateCB,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_SaveNwkKey
        FUNCTION ZDApp_SaveNwkKey,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_SecInit
        FUNCTION ZDApp_SecInit,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDOInitDeviceEx
        FUNCTION ZDOInitDeviceEx,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_Config_Node_Descriptor
        EXTERN ZDO_DeregisterForZdoCB
        FUNCTION ZDO_DeregisterForZdoCB,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_ParseDeviceAnnce
        FUNCTION ZDO_ParseDeviceAnnce,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_RegisterForZdoCB
        FUNCTION ZDO_RegisterForZdoCB,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDP_SendData
        FUNCTION ZDP_SendData,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDSecMgrUpdateTCAddress
        FUNCTION ZDSecMgrUpdateTCAddress,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZMacSetReq
        FUNCTION ZMacSetReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN _NIB
        EXTERN afFindEndPointDesc
        FUNCTION afFindEndPointDesc,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN bdbAttributes
        EXTERN bdbCommissioningProcedureState
        EXTERN bdbTL_Send_DeviceInfoRsp
        FUNCTION bdbTL_Send_DeviceInfoRsp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 25, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN bdb_RegisterSimpleDescriptor
        FUNCTION bdb_RegisterSimpleDescriptor,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN bdb_ZedAttemptRecoverNwk
        FUNCTION bdb_ZedAttemptRecoverNwk,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN bdb_reportCommissioningState
        FUNCTION bdb_reportCommissioningState,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN bdb_setChannel
        FUNCTION bdb_setChannel,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN gMIN_TREE_LQI
        EXTERN gNWK_MAX_DEVICE_LIST
        EXTERN nwkFrameCounter
        EXTERN nwkNeighborAdd
        FUNCTION nwkNeighborAdd,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN nwkNeighborGetLinkInfo
        FUNCTION nwkNeighborGetLinkInfo,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN nwkTransmissionFailures
        FUNCTION nwkTransmissionFailures,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_alloc
        FUNCTION osal_mem_alloc,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_free
        FUNCTION osal_mem_free,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memcpy
        FUNCTION osal_memcpy,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 94, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memset
        FUNCTION osal_memset,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_item_init
        FUNCTION osal_nv_item_init,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_read
        FUNCTION osal_nv_read,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_write
        FUNCTION osal_nv_write,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_rand
        FUNCTION osal_rand,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_set_event
        FUNCTION osal_set_event,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN sAddrExtCpy
        FUNCTION sAddrExtCpy,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN sspAesDecrypt
        FUNCTION sspAesDecrypt,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 68, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN sspAesEncrypt
        FUNCTION sspAesEncrypt,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_getRawAFMsg
        FUNCTION zcl_getRawAFMsg,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zgRouterOffAssocCleanup
        EXTERN zgWriteStartupOptions
        FUNCTION zgWriteStartupOptions,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC

// D:\AA\Z-Stack 3.0.2\Components\stack\bdb\bdb_touchlink.c
//    1 /**************************************************************************************************
//    2   Filename:       bdb_touchlink.c
//    3   Revised:        $Date: 2013-12-06 15:53:38 -0800 (Fri, 06 Dec 2013) $
//    4   Revision:       $Revision: 36460 $
//    5 
//    6   Description:    Zigbee Cluster Library - Light Link Profile.
//    7 
//    8 
//    9   Copyright 2011-2013 Texas Instruments Incorporated. All rights reserved.
//   10 
//   11   IMPORTANT: Your use of this Software is limited to those specific rights
//   12   granted under the terms of a software license agreement between the user
//   13   who downloaded the software, his/her employer (which must be your employer)
//   14   and Texas Instruments Incorporated (the "License").  You may not use this
//   15   Software unless you agree to abide by the terms of the License. The License
//   16   limits your use, and you acknowledge, that the Software may not be modified,
//   17   copied or distributed unless embedded on a Texas Instruments microcontroller
//   18   or used solely and exclusively in conjunction with a Texas Instruments radio
//   19   frequency transceiver, which is integrated into your product.  Other than for
//   20   the foregoing purpose, you may not use, reproduce, copy, prepare derivative
//   21   works of, modify, distribute, perform, display or sell this Software and/or
//   22   its documentation for any purpose.
//   23 
//   24   YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
//   25   PROVIDED AS IS WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
//   26   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
//   27   NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
//   28   TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
//   29   NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
//   30   LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
//   31   INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
//   32   OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
//   33   OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
//   34   (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
//   35 
//   36   Should you have any questions regarding your right to use this Software,
//   37   contact Texas Instruments Incorporated at www.TI.com.
//   38 **************************************************************************************************/
//   39 
//   40 /*********************************************************************
//   41  * INCLUDES
//   42  */
//   43 #include "OSAL_Nv.h"
//   44 #include "hal_aes.h"
//   45 #include "ssp_hash.h"
//   46 #include "nwk_util.h"
//   47 #include "ZDSecMgr.h"
//   48 #include "ZDObject.h"
//   49 
//   50 #if defined( INTER_PAN )
//   51   #include "stub_aps.h"
//   52 #if defined ( BDB_TL_INITIATOR )
//   53   #include "bdb_touchlink_initiator.h"
//   54 #endif // BDB_TL_INITIATOR
//   55 #if defined ( BDB_TL_TARGET )
//   56   #include "bdb_touchlink_target.h"
//   57 #endif // BDB_TL_TARGET
//   58 #endif
//   59 
//   60 #include "bdb.h"
//   61 #include "bdb_interface.h"
//   62 #include "bdb_tlCommissioning.h"
//   63 #include "bdb_touchlink.h"
//   64 
//   65 #if defined ( BDB_TL_TARGET ) || defined ( BDB_TL_INITIATOR )
//   66 
//   67 /*********************************************************************
//   68  * MACROS
//   69  */
//   70 #define TOUCHLINK_NEW_MIN( min, max )                  ( ( (uint32)(max) + (uint32)(min) + 1 ) / 2 )
//   71 
//   72 /*********************************************************************
//   73  * CONSTANTS
//   74  */
//   75 
//   76 #define TOUCHLINK_NUM_DEVICE_INFO_ENTRIES              5
//   77 
//   78 
//   79 /*********************************************************************
//   80  * TYPEDEFS
//   81  */
//   82 
//   83 /*********************************************************************
//   84  * GLOBAL VARIABLES
//   85  */
//   86 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//   87 uint32 touchLinkLastAcceptedTransID;
touchLinkLastAcceptedTransID:
        DS 4
        REQUIRE __INIT_XDATA_Z
//   88    
//   89 // Used for Network Discovery

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   90 touchLinkDiscoveredNwkParam_t *pDiscoveredNwkParamList = NULL;
pDiscoveredNwkParamList:
        DS 2
        REQUIRE __INIT_XDATA_Z
//   91 
//   92 // Current Touch Link Transaction ID

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//   93 uint32 touchLinkTransID;
touchLinkTransID:
        DS 4
        REQUIRE __INIT_XDATA_Z
//   94 
//   95 // Scan Response ID

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//   96 uint32 touchLinkResponseID;
touchLinkResponseID:
        DS 4
        REQUIRE __INIT_XDATA_Z
//   97 
//   98 // Our group ID range

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   99 uint16 touchLinkGrpIDsBegin;
touchLinkGrpIDsBegin:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//  100 uint16 touchLinkGrpIDsEnd;
touchLinkGrpIDsEnd:
        DS 2
        REQUIRE __INIT_XDATA_Z
//  101 
//  102 // Flag for leave

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  103 uint8 touchLinkLeaveInitiated;
touchLinkLeaveInitiated:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  104 
//  105 // Device Information Table

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  106 bdbTLDeviceInfo_t *touchLinkSubDevicesTbl[5];
touchLinkSubDevicesTbl:
        DS 10
        REQUIRE __INIT_XDATA_Z
//  107 
//  108 // Touchlink distributed network flag

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  109 bool touchlinkDistNwk = FALSE;
touchlinkDistNwk:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  110 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  111 bool touchlinkFNReset;
touchlinkFNReset:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  112 
//  113 /*********************************************************************
//  114  * EXTERNAL VARIABLES
//  115  */
//  116 
//  117 /*********************************************************************
//  118  * EXTERNAL FUNCTIONS
//  119  */
//  120 
//  121 /*********************************************************************
//  122  * LOCAL VARIABLES
//  123  */
//  124 // TOUCHLINK Profile attributes - Our free network address and group ID ranges

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//  125 static uint16 touchLinkFreeNwkAddrBegin;
touchLinkFreeNwkAddrBegin:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//  126 static uint16 touchLinkFreeNwkAddrEnd;
touchLinkFreeNwkAddrEnd:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//  127 static uint16 touchLinkFreeGrpIdBegin;
touchLinkFreeGrpIdBegin:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//  128 static uint16 touchLinkFreeGrpIdEnd;
touchLinkFreeGrpIdEnd:
        DS 2
        REQUIRE __INIT_XDATA_Z
//  129 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  130 static bool touchLinkIsInitiator;
touchLinkIsInitiator:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  131 static uint8 touchLinkTaskId;
touchLinkTaskId:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  132 
//  133 // This is the Cluster ID List and should be filled with Application
//  134 // specific cluster IDs.
//  135 #define TOUCHLINK_EP_MAX_INCLUSTERS       1

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA16
//  136 static const cId_t touchLink_EP_InClusterList[TOUCHLINK_EP_MAX_INCLUSTERS] =
touchLink_EP_InClusterList:
        DW 4096
//  137 {
//  138   ZCL_CLUSTER_ID_TOUCHLINK
//  139 };
//  140 
//  141 #define TOUCHLINK_EP_MAX_OUTCLUSTERS       1

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA16
//  142 static const cId_t touchLink_EP_OutClusterList[TOUCHLINK_EP_MAX_OUTCLUSTERS] =
touchLink_EP_OutClusterList:
        DW 4096
//  143 {
//  144   ZCL_CLUSTER_ID_TOUCHLINK
//  145 };
//  146 

        RSEG XDATA_I:XDATA:NOROOT(0)
//  147 static SimpleDescriptionFormat_t touchLink_EP_SimpleDesc =
touchLink_EP_SimpleDesc:
        DATA8
        DS 12
        REQUIRE `?<Initializer for touchLink_EP_SimpleDesc>`
        REQUIRE __INIT_XDATA_I
//  148 {
//  149   TOUCHLINK_INTERNAL_ENDPOINT,         //  int Endpoint;
//  150   TOUCHLINK_PROFILE_ID,                //  uint16 AppProfId[2];
//  151   TOUCHLINK_INTERNAL_DEVICE_ID,        //  uint16 AppDeviceId[2];
//  152   TOUCHLINK_DEVICE_VERSION,            //  int   AppDevVer:4;
//  153   TOUCHLINK_INTERNAL_FLAGS,            //  int   AppFlags:4;
//  154   TOUCHLINK_EP_MAX_INCLUSTERS,         //  byte  AppNumInClusters;
//  155   (cId_t *)touchLink_EP_InClusterList, //  byte *pAppInClusterList;
//  156   TOUCHLINK_EP_MAX_OUTCLUSTERS,        //  byte  AppNumInClusters;
//  157   (cId_t *)touchLink_EP_OutClusterList //  byte *pAppInClusterList;
//  158 };
//  159 
//  160 #if defined( INTER_PAN )
//  161 // Define endpoint structure to register with STUB APS for INTER-PAN support

        RSEG XDATA_I:XDATA:NOROOT(0)
//  162 static endPointDesc_t touchLink_EP =
touchLink_EP:
        DATA8
        DS 7
        REQUIRE `?<Initializer for touchLink_EP>`
        REQUIRE __INIT_XDATA_I
//  163 {
//  164   TOUCHLINK_INTERNAL_ENDPOINT,
//  165   0,
//  166   &touchLinkTaskId,
//  167   (SimpleDescriptionFormat_t *)NULL,  // No Simple description for this endpoint
//  168   (afNetworkLatencyReq_t)0            // No Network Latency req
//  169 };
//  170 #endif
//  171 
//  172 
//  173 /*********************************************************************
//  174  * LOCAL FUNCTIONS
//  175  */
//  176 static void touchLink_BuildAesKey( uint8 *pAesKey, uint32 transID, uint32 responseID, uint8 keyIndex );
//  177 void touchLink_ItemInit( uint16 id, uint16 len, void *pBuf );
//  178 static void *touchLink_BeaconIndCB ( void *param );
//  179 static void *touchLink_NwkDiscoveryCnfCB ( void *param );
//  180 static void touchLink_InitNV( void );
//  181 
//  182 /*********************************************************************
//  183  * PUBLIC FUNCTIONS
//  184  */
//  185 
//  186 /*********************************************************************
//  187  * @fn      touchLink_InitVariables
//  188  *
//  189  * @brief   Initialize the TOUCHLINK global and local variables.
//  190  *
//  191  * @param   initiator - if caller is Initiator
//  192  *
//  193  * @return  none
//  194  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  195 void touchLink_InitVariables( bool initiator )
touchLink_InitVariables:
          CFI Block cfiBlock0 Using cfiCommon0
          CFI Function touchLink_InitVariables
        CODE
//  196 {
        FUNCALL touchLink_InitVariables, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitVariables, touchLink_InitFreeRanges
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitVariables, touchLink_InitNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitVariables, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitVariables, NLME_SetBroadcastFilter
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        MOV       A,#-0xa
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV       A,R1
        MOV       R6,A
//  197   touchLinkTransID = 0;
        MOV       DPTR,#touchLinkTransID
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
//  198   touchLinkIsInitiator = initiator;
        MOV       A,R6
        MOV       DPTR,#touchLinkIsInitiator
        MOVX      @DPTR,A
//  199 
//  200   if ( bdbAttributes.bdbNodeIsOnANetwork == FALSE )
        MOV       DPTR,#bdbAttributes + 14
        MOVX      A,@DPTR
        JNZ       ??touchLink_InitVariables_0
//  201   {
//  202     _NIB.nwkDevAddress = INVALID_NODE_ADDR;
        MOV       DPTR,#_NIB + 20
        MOV       A,#-0x2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#-0x1
        MOVX      @DPTR,A
//  203   }
//  204 
//  205   // verify groups communication is initiated by broadcasts rather than multicasts
//  206   _NIB.nwkUseMultiCast = FALSE;
??touchLink_InitVariables_0:
        MOV       DPTR,#_NIB + 100
        MOV       A,#0x0
        MOVX      @DPTR,A
//  207   // detect and remove stored deprecated end device children after power up
//  208   zgRouterOffAssocCleanup = TRUE;
        MOV       DPTR,#zgRouterOffAssocCleanup
        MOV       A,#0x1
        MOVX      @DPTR,A
//  209   osal_nv_write(ZCD_NV_ROUTER_OFF_ASSOC_CLEANUP, 0, sizeof(zgRouterOffAssocCleanup), &zgRouterOffAssocCleanup);
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#zgRouterOffAssocCleanup & 0xff
        MOV       ?V1,#(zgRouterOffAssocCleanup >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x1
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#0x3c
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  210 
//  211   touchLink_InitFreeRanges( initiator );
        ; Setup parameters for call to function touchLink_InitFreeRanges
        MOV       A,R6
        MOV       R1,A
        LCALL     `??touchLink_InitFreeRanges::?relay`; Banked call to: touchLink_InitFreeRanges
//  212 
//  213   touchLink_InitNV();
        ; Setup parameters for call to function touchLink_InitNV
        LCALL     `??touchLink_InitNV::?relay`; Banked call to: touchLink_InitNV
//  214 
//  215   touchLinkLeaveInitiated = FALSE;
        MOV       DPTR,#touchLinkLeaveInitiated
        MOV       A,#0x0
        MOVX      @DPTR,A
//  216 
//  217   // Initialize device info table
//  218   osal_memset( touchLinkSubDevicesTbl, 0, sizeof( touchLinkSubDevicesTbl ) );
        ; Setup parameters for call to function osal_memset
        MOV       R4,#0xa
        MOV       R5,#0x0
        MOV       R1,#0x0
        MOV       R2,#touchLinkSubDevicesTbl & 0xff
        MOV       R3,#(touchLinkSubDevicesTbl >> 8) & 0xff
        LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
//  219   
//  220   touchLinkIsInitiator = FALSE;
        MOV       DPTR,#touchLinkIsInitiator
        MOV       A,#0x0
        MOVX      @DPTR,A
//  221   
//  222   // set broadcast address mask to support broadcast filtering
//  223   NLME_SetBroadcastFilter( ZDO_Config_Node_Descriptor.CapabilityFlags );
        ; Setup parameters for call to function NLME_SetBroadcastFilter
        MOV       DPTR,#ZDO_Config_Node_Descriptor + 2
        MOVX      A,@DPTR
        MOV       R1,A
        LCALL     `??NLME_SetBroadcastFilter::?relay`; Banked call to: NLME_SetBroadcastFilter
//  224 }
        MOV       R7,#0x2
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock0
//  225 
//  226 /*********************************************************************
//  227  * @fn      touchLink_InitFreeRanges
//  228  *
//  229  * @brief   Initialize the TOUCHLINK free range global variables.
//  230  *
//  231  * @param   initiator - if caller is link initiator
//  232  *
//  233  * @return  none
//  234  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  235 void touchLink_InitFreeRanges( bool initiator )
touchLink_InitFreeRanges:
          CFI Block cfiBlock1 Using cfiCommon0
          CFI Function touchLink_InitFreeRanges
        CODE
//  236 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  237   // Initialize our free network address and group ID ranges
//  238   if ( initiator )
        MOV       A,R1
        JZ        ??touchLink_InitFreeRanges_0
//  239   {
//  240     touchLinkFreeNwkAddrBegin = APL_FREE_NWK_ADDR_RANGE_BEGIN;
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOV       A,#0x1
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
//  241     touchLinkFreeNwkAddrEnd = APL_FREE_NWK_ADDR_RANGE_END;
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOV       A,#-0x9
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#-0x1
        MOVX      @DPTR,A
//  242 
//  243     touchLinkFreeGrpIdBegin = APL_FREE_GROUP_ID_RANGE_BEGIN;
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOV       A,#0x1
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
//  244     touchLinkFreeGrpIdEnd = APL_FREE_GROUP_ID_RANGE_END;
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOV       A,#-0x1
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#-0x2
        MOVX      @DPTR,A
        SJMP      ??touchLink_InitFreeRanges_1
//  245   }
//  246   else
//  247   {
//  248     touchLinkFreeNwkAddrBegin = touchLinkFreeNwkAddrEnd = 0;
??touchLink_InitFreeRanges_0:
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOV       A,R2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R3
        MOVX      @DPTR,A
//  249     touchLinkFreeGrpIdBegin = touchLinkFreeGrpIdEnd = 0;
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOV       A,R2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R3
        MOVX      @DPTR,A
//  250   }
//  251 
//  252   // Initialize our local group ID range
//  253   touchLinkGrpIDsBegin = touchLinkGrpIDsEnd = 0;
??touchLink_InitFreeRanges_1:
        MOV       DPTR,#touchLinkGrpIDsEnd
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        MOV       DPTR,#touchLinkGrpIDsEnd
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       DPTR,#touchLinkGrpIDsBegin
        MOV       A,R2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R3
        MOVX      @DPTR,A
//  254 }
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
          CFI EndBlock cfiBlock1
//  255 
//  256 /*********************************************************************
//  257  * @fn      touchLink_UpdateFreeRanges
//  258  *
//  259  * @brief   Update the TOUCHLINK free range global variables.
//  260  *
//  261  * @param   pParams - new parameters
//  262  *
//  263  * @return  none
//  264  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  265 void touchLink_UpdateFreeRanges( bdbTLNwkParams_t *pParams )
touchLink_UpdateFreeRanges:
          CFI Block cfiBlock2 Using cfiCommon0
          CFI Function touchLink_UpdateFreeRanges
        CODE
//  266 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  267   // Set our free network address and group ID ranges
//  268   touchLinkFreeNwkAddrBegin = pParams->freeNwkAddrBegin;
        MOV       A,R2
        ADD       A,#0x22
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  269   touchLinkFreeNwkAddrEnd = pParams->freeNwkAddrEnd;
        MOV       A,R2
        ADD       A,#0x24
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  270   touchLinkFreeGrpIdBegin = pParams->freeGrpIDBegin;
        MOV       A,R2
        ADD       A,#0x26
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  271   touchLinkFreeGrpIdEnd = pParams->freeGrpIDEnd;
        MOV       A,R2
        ADD       A,#0x28
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  272 
//  273   // Set our group ID range
//  274   touchLinkGrpIDsBegin = pParams->grpIDsBegin;
        MOV       A,R2
        ADD       A,#0x1e
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPTR,#touchLinkGrpIDsBegin
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  275   touchLinkGrpIDsEnd = pParams->grpIDsEnd;
        MOV       A,R2
        ADD       A,#0x20
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPTR,#touchLinkGrpIDsEnd
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  276 }
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
          CFI EndBlock cfiBlock2
//  277 
//  278 /*********************************************************************
//  279  * @fn      touchLink_GerFreeRanges
//  280  *
//  281  * @brief   Get the TOUCHLINK free range global variables.
//  282  *
//  283  * @param   pParams - parameter to get
//  284  *
//  285  * @return  none
//  286  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  287 void touchLink_GerFreeRanges( bdbTLNwkParams_t *pParams )
touchLink_GerFreeRanges:
          CFI Block cfiBlock3 Using cfiCommon0
          CFI Function touchLink_GerFreeRanges
        CODE
//  288 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  289   // Set our free network address and group ID ranges
//  290   pParams->freeNwkAddrBegin = touchLinkFreeNwkAddrBegin;
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R2
        ADD       A,#0x22
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  291   pParams->freeNwkAddrEnd = touchLinkFreeNwkAddrEnd;
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R2
        ADD       A,#0x24
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  292   pParams->freeGrpIDBegin = touchLinkFreeGrpIdBegin;
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R2
        ADD       A,#0x26
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  293   pParams->freeGrpIDEnd = touchLinkFreeGrpIdEnd;
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R2
        ADD       A,#0x28
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  294   
//  295     // Set our group ID range
//  296   pParams->grpIDsBegin = touchLinkGrpIDsBegin;
        MOV       DPTR,#touchLinkGrpIDsBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R2
        ADD       A,#0x1e
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  297   pParams->grpIDsEnd = touchLinkGrpIDsEnd;
        MOV       DPTR,#touchLinkGrpIDsEnd
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R2
        ADD       A,#0x20
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  298 }
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
          CFI EndBlock cfiBlock3
//  299 
//  300 /*********************************************************************
//  301  * @fn      touchLink_IsValidSplitFreeRanges
//  302  *
//  303  * @brief   Checks to see if the resulting two ranges are not smaller
//  304  *          than the threshold after division of a network address or
//  305  *          group ID range. The Initiator splits its own free range
//  306  *          in half and assigns the top half to the new device.
//  307  *
//  308  *          Note: A range (Nmin...Nmax) is split as follows:
//  309  *
//  310  *                N'min = (Nmax + Nmin + 1)/2
//  311  *                N'max = Nmax
//  312  *                Nmax = N'min - 1
//  313  *
//  314  * @param   totalGrpIDs - total number of group IDs needed
//  315  *
//  316  * @return  TRUE if split possible. FALSE, otherwise.
//  317  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  318 bool touchLink_IsValidSplitFreeRanges( uint8 totalGrpIDs )
touchLink_IsValidSplitFreeRanges:
          CFI Block cfiBlock4 Using cfiCommon0
          CFI Function touchLink_IsValidSplitFreeRanges
        CODE
//  319 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
        MOV       A,R1
        MOV       R4,A
//  320   if ( ( touchLinkFreeNwkAddrBegin != 0 ) && ( touchLinkFreeGrpIdBegin != 0 ) )
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JZ        ??touchLink_IsValidSplitFreeRanges_0
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JZ        ??touchLink_IsValidSplitFreeRanges_0
//  321   {
//  322       return ( ( ( ( touchLinkFreeNwkAddrEnd - touchLinkFreeNwkAddrBegin ) / 2 ) >= APL_FREE_ADDR_THRESHOLD ) &&
//  323                ( ( ( touchLinkFreeGrpIdEnd - ( touchLinkFreeGrpIdBegin + totalGrpIDs - 1 ) ) / 2 ) >= APL_FREE_GROUP_ID_THRESHOLD ) );
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        PUSH      DPL
          CFI CFA_SP SP+-6
        PUSH      DPH
          CFI CFA_SP SP+-7
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        POP       DPH
          CFI CFA_SP SP+-6
        POP       DPL
          CFI CFA_SP SP+-5
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R0
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        SUBB      A,R1
        MOV       R1,A
        MOV       A,R1
        CLR       C
        RRC       A
        MOV       R1,A
        MOV       A,R0
        RRC       A
        MOV       R0,A
        CLR       C
        MOV       A,R0
        SUBB      A,#0xa
        MOV       A,R1
        SUBB      A,#0x0
        JC        ??touchLink_IsValidSplitFreeRanges_1
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        PUSH      DPL
          CFI CFA_SP SP+-6
        PUSH      DPH
          CFI CFA_SP SP+-7
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        POP       DPH
          CFI CFA_SP SP+-6
        POP       DPL
          CFI CFA_SP SP+-5
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R0
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        SUBB      A,R1
        MOV       R1,A
        MOV       A,R4
        MOV       R2,A
        MOV       R3,#0x0
        MOV       A,R0
        CLR       C
        SUBB      A,R2
        MOV       R0,A
        MOV       A,R1
        SUBB      A,R3
        MOV       R1,A
        MOV       A,R0
        CLR       C
        SUBB      A,#-0x1
        MOV       R0,A
        MOV       A,R1
        SUBB      A,#-0x1
        MOV       R1,A
        MOV       A,R1
        CLR       C
        RRC       A
        MOV       R1,A
        MOV       A,R0
        RRC       A
        MOV       R0,A
        CLR       C
        MOV       A,R0
        SUBB      A,#0xa
        MOV       A,R1
        SUBB      A,#0x0
        JC        ??touchLink_IsValidSplitFreeRanges_1
        MOV       R1,#0x1
        SJMP      ??touchLink_IsValidSplitFreeRanges_2
??touchLink_IsValidSplitFreeRanges_1:
        MOV       R1,#0x0
        SJMP      ??touchLink_IsValidSplitFreeRanges_2
//  324 
//  325   }
//  326 
//  327   return ( FALSE );
??touchLink_IsValidSplitFreeRanges_0:
        MOV       R1,#0x0
??touchLink_IsValidSplitFreeRanges_2:
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
//  328 }
          CFI EndBlock cfiBlock4
//  329 
//  330 /*********************************************************************
//  331  * @fn      touchLink_SplitFreeRanges
//  332  *
//  333  * @brief   Split our own free network address and group ID ranges
//  334  *          in half and assign the top half to the new device.
//  335  *
//  336  *          Note: A range (Nmin...Nmax) is split as follows:
//  337  *
//  338  *                N'min = (Nmax + Nmin + 1)/2
//  339  *                N'max = Nmax
//  340  *                Nmax = N'min - 1
//  341  *
//  342  * output parameters
//  343  *
//  344  * @param   pAddrBegin - new address range begin
//  345  * @param   pAddrEnd - new address range end
//  346  * @param   pGrpIdBegin - new group id range begin
//  347  * @param   pGrpIdEnd - new group id range end
//  348  *
//  349  * @return  none
//  350  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  351 void touchLink_SplitFreeRanges( uint16 *pAddrBegin, uint16 *pAddrEnd,
touchLink_SplitFreeRanges:
          CFI Block cfiBlock5 Using cfiCommon0
          CFI Function touchLink_SplitFreeRanges
        CODE
//  352                         uint16 *pGrpIdBegin, uint16 *pGrpIdEnd )
//  353 {
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        MOV       A,#-0x12
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 0
        MOV       ?V8,R2
        MOV       ?V9,R3
        MOV       A,R4
        MOV       R6,A
        MOV       A,R5
        MOV       R7,A
        MOV       A,#0x12
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       A,#0x14
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       R4,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R5,A
//  354   if ( ( touchLinkFreeNwkAddrBegin != 0 ) && ( touchLinkFreeGrpIdBegin != 0 ) )
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JNZ       $+5
        LJMP      ??touchLink_SplitFreeRanges_0 & 0xFFFF
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JNZ       $+5
        LJMP      ??touchLink_SplitFreeRanges_0 & 0xFFFF
//  355   {
//  356     *pAddrBegin = TOUCHLINK_NEW_MIN( touchLinkFreeNwkAddrBegin, touchLinkFreeNwkAddrEnd );
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOVX      A,@DPTR
        MOV       ?V4,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V5,A
        CLR       A
        MOV       ?V6,A
        MOV       ?V7,A
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       ?V0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V1,A
        CLR       A
        MOV       ?V2,A
        MOV       ?V3,A
        MOV       R0,#?V4
        MOV       R1,#?V0
        LCALL     ?L_ADD
        MOV       DPTR,#__Constant_1
        MOV       R0,#?V4
        LCALL     ?L_ADD_X
        MOV       A,#0x1
        MOV       R0,#?V4
        LCALL     ?UL_SHR
        MOV       DPL,?V8
        MOV       DPH,?V9
        MOV       A,?V4
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,?V5
        MOVX      @DPTR,A
//  357     *pGrpIdBegin = TOUCHLINK_NEW_MIN( touchLinkFreeGrpIdBegin, touchLinkFreeGrpIdEnd );
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOVX      A,@DPTR
        MOV       ?V4,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V5,A
        CLR       A
        MOV       ?V6,A
        MOV       ?V7,A
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       ?V0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V1,A
        CLR       A
        MOV       ?V2,A
        MOV       ?V3,A
        MOV       R0,#?V4
        MOV       R1,#?V0
        LCALL     ?L_ADD
        MOV       DPTR,#__Constant_1
        MOV       R0,#?V4
        LCALL     ?L_ADD_X
        MOV       A,#0x1
        MOV       R0,#?V4
        LCALL     ?UL_SHR
        MOV       DPL,R2
        MOV       DPH,R3
        MOV       A,?V4
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,?V5
        MOVX      @DPTR,A
//  358 
//  359     *pAddrEnd = touchLinkFreeNwkAddrEnd;
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,R6
        MOV       DPH,R7
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  360     *pGrpIdEnd = touchLinkFreeGrpIdEnd;
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,R4
        MOV       DPH,R5
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  361 
//  362     // Update our max
//  363     touchLinkFreeNwkAddrEnd = *pAddrBegin - 1;
        MOV       DPL,?V8
        MOV       DPH,?V9
        MOVX      A,@DPTR
        ADD       A,#-0x1
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        ADDC      A,#-0x1
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  364     touchLinkFreeGrpIdEnd = *pGrpIdBegin - 1;
        MOV       DPL,R2
        MOV       DPH,R3
        MOVX      A,@DPTR
        ADD       A,#-0x1
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        ADDC      A,#-0x1
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
        SJMP      ??touchLink_SplitFreeRanges_1
//  365   }
//  366   else
//  367   {
//  368     *pAddrBegin = *pAddrEnd = 0;
??touchLink_SplitFreeRanges_0:
        MOV       DPL,R6
        MOV       DPH,R7
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        MOV       DPL,R6
        MOV       DPH,R7
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,?V8
        MOV       DPH,?V9
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  369     *pGrpIdBegin = *pGrpIdEnd = 0;
        MOV       DPL,R4
        MOV       DPH,R5
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        MOV       DPL,R4
        MOV       DPH,R5
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,R2
        MOV       DPH,R3
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  370   }
//  371 }
??touchLink_SplitFreeRanges_1:
        MOV       R7,#0xa
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock5
//  372 
//  373 /*********************************************************************
//  374  * @fn      touchLink_PopGrpIDRange
//  375  *
//  376  * @brief   Pop the requested number of group IDs out of the free group IDs range.
//  377  *
//  378  * input parameters
//  379  *
//  380  * @param   numGrpIDs - number of group IDs needed
//  381  *
//  382  * output parameters
//  383  *
//  384  * @param   pGrpIdBegin - new group id range begin, or 0 if unavaialable
//  385  * @param   pGrpIdEnd - new group id range end, , or 0 if unavaialable
//  386  *
//  387  * @return  none
//  388  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  389 void touchLink_PopGrpIDRange( uint8 numGrpIDs, uint16 *pGrpIDsBegin, uint16 *pGrpIDsEnd )
touchLink_PopGrpIDRange:
          CFI Block cfiBlock6 Using cfiCommon0
          CFI Function touchLink_PopGrpIDRange
        CODE
//  390 {
        REQUIRE ?V0
        REQUIRE ?V1
        MOV       A,#-0xa
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV       A,R1
        MOV       R6,A
//  391   if ( ( touchLinkFreeGrpIdBegin != 0 )
//  392        && ( touchLinkFreeGrpIdBegin <= touchLinkFreeGrpIdEnd )
//  393        && ( ( touchLinkFreeGrpIdEnd - touchLinkFreeGrpIdBegin ) >= numGrpIDs ) )
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JZ        ??touchLink_PopGrpIDRange_0
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        PUSH      DPL
          CFI CFA_SP SP+-1
        PUSH      DPH
          CFI CFA_SP SP+-2
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        POP       DPH
          CFI CFA_SP SP+-1
        POP       DPL
          CFI CFA_SP SP+0
        CLR       C
        MOVX      A,@DPTR
        SUBB      A,R0
        INC       DPTR
        MOVX      A,@DPTR
        SUBB      A,R1
        JC        ??touchLink_PopGrpIDRange_0
        MOV       DPTR,#touchLinkFreeGrpIdEnd
        PUSH      DPL
          CFI CFA_SP SP+-1
        PUSH      DPH
          CFI CFA_SP SP+-2
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        POP       DPH
          CFI CFA_SP SP+-1
        POP       DPL
          CFI CFA_SP SP+0
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R0
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        SUBB      A,R1
        MOV       R1,A
        MOV       A,R6
        MOV       ?V0,A
        MOV       ?V1,#0x0
        CLR       C
        MOV       A,R0
        SUBB      A,?V0
        MOV       A,R1
        SUBB      A,?V1
        JC        ??touchLink_PopGrpIDRange_0
//  394   {
//  395     *pGrpIDsBegin = touchLinkFreeGrpIdBegin;
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,R2
        MOV       DPH,R3
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  396 
//  397     // Update min free group id
//  398     touchLinkFreeGrpIdBegin += numGrpIDs;
        MOV       A,R6
        MOV       R0,A
        MOV       R1,#0x0
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        ADD       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOVX      A,@DPTR
        ADDC      A,R1
        MOVX      @DPTR,A
//  399 
//  400     *pGrpIDsEnd = touchLinkFreeGrpIdBegin - 1;
        MOV       DPTR,#touchLinkFreeGrpIdBegin
        MOVX      A,@DPTR
        ADD       A,#-0x1
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        ADDC      A,#-0x1
        MOV       R1,A
        MOV       DPL,R4
        MOV       DPH,R5
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
        SJMP      ??touchLink_PopGrpIDRange_1
//  401   }
//  402   else
//  403   {
//  404     *pGrpIDsBegin = *pGrpIDsEnd = 0;
??touchLink_PopGrpIDRange_0:
        MOV       DPL,R4
        MOV       DPH,R5
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        MOV       DPL,R4
        MOV       DPH,R5
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,R2
        MOV       DPH,R3
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
//  405   }
//  406 }
??touchLink_PopGrpIDRange_1:
        MOV       R7,#0x2
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock6
//  407 
//  408 /*********************************************************************
//  409  * @fn      touchLink_PopNwkAddress
//  410  *
//  411  * @brief   Pop an avaialble short address out of the free network addresses range.
//  412  *
//  413  * @param   none
//  414  *
//  415  * @return  free address if available. 0, otherwise.
//  416  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  417 uint16 touchLink_PopNwkAddress( void )
touchLink_PopNwkAddress:
          CFI Block cfiBlock7 Using cfiCommon0
          CFI Function touchLink_PopNwkAddress
        CODE
//  418 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  419   if ( ( touchLinkFreeNwkAddrBegin == 0 ) || ( touchLinkFreeNwkAddrBegin > touchLinkFreeNwkAddrEnd ) )
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JZ        ??touchLink_PopNwkAddress_0
        MOV       DPTR,#touchLinkFreeNwkAddrEnd
        PUSH      DPL
          CFI CFA_SP SP+-6
        PUSH      DPH
          CFI CFA_SP SP+-7
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        POP       DPH
          CFI CFA_SP SP+-6
        POP       DPL
          CFI CFA_SP SP+-5
        CLR       C
        MOVX      A,@DPTR
        SUBB      A,R0
        INC       DPTR
        MOVX      A,@DPTR
        SUBB      A,R1
        JNC       ??touchLink_PopNwkAddress_1
//  420   {
//  421     return ( 0 );
??touchLink_PopNwkAddress_0:
        MOV       R2,#0x0
        MOV       R3,#0x0
        SJMP      ??touchLink_PopNwkAddress_2
//  422   }
//  423 
//  424   return ( touchLinkFreeNwkAddrBegin++ );
??touchLink_PopNwkAddress_1:
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       A,R2
        ADD       A,#0x1
        MOV       R0,A
        CLR       A
        ADDC      A,R3
        MOV       R1,A
        MOV       DPTR,#touchLinkFreeNwkAddrBegin
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
??touchLink_PopNwkAddress_2:
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
//  425 }
          CFI EndBlock cfiBlock7
//  426 
//  427 /*********************************************************************
//  428  * @fn      touchLink_GetNumSubDevices
//  429  *
//  430  * @brief   Get the total number of sub-devices (endpoints) registered.
//  431  *
//  432  * @param   startIndex - starting index
//  433  *
//  434  * @return  number of sub-devices
//  435  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  436 uint8 touchLink_GetNumSubDevices( uint8 startIndex )
touchLink_GetNumSubDevices:
          CFI Block cfiBlock8 Using cfiCommon0
          CFI Function touchLink_GetNumSubDevices
        CODE
//  437 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
        MOV       A,R1
        MOV       R5,A
//  438   uint8 numEPs = 0;
        MOV       R1,#0x0
//  439 
//  440   for ( uint8 i = startIndex; i < TOUCHLINK_NUM_DEVICE_INFO_ENTRIES; i++ )
        MOV       A,R5
        MOV       R4,A
??touchLink_GetNumSubDevices_0:
        MOV       A,R4
        CLR       C
        SUBB      A,#0x5
        JNC       ??touchLink_GetNumSubDevices_1
//  441   {
//  442     if ( touchLinkSubDevicesTbl[i] != NULL )
        MOV       A,R4
        MOV       R2,A
        MOV       R3,#0x0
        MOV       A,R2
        MOV       B,#0x2
        MUL       AB
        XCH       A,R2
        MOV       R0,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R0
        MOV       R0,A
        MOV       B,#0x2
        MOV       A,R3
        MUL       AB
        ADD       A,R0
        MOV       R3,A
        MOV       A,#touchLinkSubDevicesTbl & 0xff
        ADD       A,R2
        MOV       DPL,A
        MOV       A,#(touchLinkSubDevicesTbl >> 8) & 0xff
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       A,R2
        ORL       A,R3
        JZ        ??touchLink_GetNumSubDevices_2
//  443     numEPs++;
        INC       R1
//  444   }
??touchLink_GetNumSubDevices_2:
        INC       R4
        SJMP      ??touchLink_GetNumSubDevices_0
//  445 
//  446   return ( numEPs );
??touchLink_GetNumSubDevices_1:
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
//  447 }
          CFI EndBlock cfiBlock8
//  448 
//  449 /*********************************************************************
//  450  * @fn      touchLink_GetNumGrpIDs
//  451  *
//  452  * @brief   Get the total number of group IDs required by this device.
//  453  *
//  454  * @param   none
//  455  *
//  456  * @return  number of group IDs
//  457  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  458 uint8 touchLink_GetNumGrpIDs( void )
touchLink_GetNumGrpIDs:
          CFI Block cfiBlock9 Using cfiCommon0
          CFI Function touchLink_GetNumGrpIDs
        CODE
//  459 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  460   uint8 numGrpIDs = 0;
        MOV       R1,#0x0
//  461 
//  462   for ( uint8 i = 0; i < TOUCHLINK_NUM_DEVICE_INFO_ENTRIES; i++ )
        MOV       R0,#0x0
??touchLink_GetNumGrpIDs_0:
        MOV       A,R0
        CLR       C
        SUBB      A,#0x5
        JNC       ??touchLink_GetNumGrpIDs_1
//  463   {
//  464     if ( touchLinkSubDevicesTbl[i] != NULL )
        MOV       A,R0
        MOV       R2,A
        MOV       R3,#0x0
        MOV       A,R2
        MOV       B,#0x2
        MUL       AB
        XCH       A,R2
        MOV       R4,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R4
        MOV       R4,A
        MOV       B,#0x2
        MOV       A,R3
        MUL       AB
        ADD       A,R4
        MOV       R3,A
        MOV       A,#touchLinkSubDevicesTbl & 0xff
        ADD       A,R2
        MOV       DPL,A
        MOV       A,#(touchLinkSubDevicesTbl >> 8) & 0xff
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       A,R2
        ORL       A,R3
        JZ        ??touchLink_GetNumGrpIDs_2
//  465     {
//  466       numGrpIDs += touchLinkSubDevicesTbl[i]->grpIdCnt;
        MOV       A,R0
        MOV       R2,A
        MOV       R3,#0x0
        MOV       A,R2
        MOV       B,#0x2
        MUL       AB
        XCH       A,R2
        MOV       R4,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R4
        MOV       R4,A
        MOV       B,#0x2
        MOV       A,R3
        MUL       AB
        ADD       A,R4
        MOV       R3,A
        MOV       A,#touchLinkSubDevicesTbl & 0xff
        ADD       A,R2
        MOV       DPL,A
        MOV       A,#(touchLinkSubDevicesTbl >> 8) & 0xff
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        XCH       A,R2
        ADD       A,#0x6
        MOV       DPL,A
        XCH       A,R2
        ADDC      A,#0x0
        MOV       DPH,A
        MOVX      A,@DPTR
        ADD       A,R1
        MOV       R1,A
//  467     }
//  468   }
??touchLink_GetNumGrpIDs_2:
        INC       R0
        SJMP      ??touchLink_GetNumGrpIDs_0
//  469 
//  470   return ( numGrpIDs );
??touchLink_GetNumGrpIDs_1:
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
//  471 }
          CFI EndBlock cfiBlock9
//  472 
//  473 /*********************************************************************
//  474  * @fn      touchLink_GetSubDeviceInfo
//  475  *
//  476  * @brief   Get the sub-device information.
//  477  *
//  478  * input parameter
//  479  *
//  480  * @param   index - index of sub-device
//  481  *
//  482  * output parameter
//  483  *
//  484  * @param   pInfo - sub-device info (to be returned)
//  485  *
//  486  * @return  none
//  487  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  488 void touchLink_GetSubDeviceInfo( uint8 index, bdbTLDeviceInfo_t *pInfo )
touchLink_GetSubDeviceInfo:
          CFI Block cfiBlock10 Using cfiCommon0
          CFI Function touchLink_GetSubDeviceInfo
        CODE
//  489 {
        FUNCALL touchLink_GetSubDeviceInfo, afFindEndPointDesc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_GetSubDeviceInfo, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV       ?V0,R1
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
//  490   if ( pInfo == NULL )
        MOV       A,R6
        ORL       A,R7
        JNZ       $+5
        LJMP      ??touchLink_GetSubDeviceInfo_0 & 0xFFFF
//  491   {
//  492     return;
//  493   }
//  494   if ( ( index < TOUCHLINK_NUM_DEVICE_INFO_ENTRIES ) &&
//  495        ( touchLinkSubDevicesTbl[index] != NULL ) )
        MOV       A,?V0
        CLR       C
        SUBB      A,#0x5
        JC        $+5
        LJMP      ??touchLink_GetSubDeviceInfo_1 & 0xFFFF
        MOV       A,?V0
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R0
        MOV       B,#0x2
        MUL       AB
        XCH       A,R0
        MOV       R2,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R2
        MOV       R2,A
        MOV       B,#0x2
        MOV       A,R1
        MUL       AB
        ADD       A,R2
        MOV       R1,A
        MOV       A,#touchLinkSubDevicesTbl & 0xff
        ADD       A,R0
        MOV       DPL,A
        MOV       A,#(touchLinkSubDevicesTbl >> 8) & 0xff
        ADDC      A,R1
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JZ        ??touchLink_GetSubDeviceInfo_1
//  496   {
//  497     endPointDesc_t *epDesc = afFindEndPointDesc( touchLinkSubDevicesTbl[index]->endpoint );
        ; Setup parameters for call to function afFindEndPointDesc
        MOV       A,?V0
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R0
        MOV       B,#0x2
        MUL       AB
        XCH       A,R0
        MOV       R2,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R2
        MOV       R2,A
        MOV       B,#0x2
        MOV       A,R1
        MUL       AB
        ADD       A,R2
        MOV       R1,A
        MOV       A,#touchLinkSubDevicesTbl & 0xff
        ADD       A,R0
        MOV       DPL,A
        MOV       A,#(touchLinkSubDevicesTbl >> 8) & 0xff
        ADDC      A,R1
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       DPH,A
        MOV       DPL,R0
        MOVX      A,@DPTR
        MOV       R1,A
        LCALL     `??afFindEndPointDesc::?relay`; Banked call to: afFindEndPointDesc
        MOV       ?V2,R2
        MOV       ?V3,R3
        MOV       R2,?V2
        MOV       R3,?V3
//  498     if ( epDesc != NULL )
        MOV       A,R2
        ORL       A,R3
        JZ        ??touchLink_GetSubDeviceInfo_0
//  499     {
//  500       // Copy sub-device info
//  501       *pInfo = *(touchLinkSubDevicesTbl[index]);
        MOV       A,?V0
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R0
        MOV       B,#0x2
        MUL       AB
        XCH       A,R0
        MOV       R4,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R4
        MOV       R4,A
        MOV       B,#0x2
        MOV       A,R1
        MUL       AB
        ADD       A,R4
        MOV       R1,A
        MOV       A,#touchLinkSubDevicesTbl & 0xff
        ADD       A,R0
        MOV       DPL,A
        MOV       A,#(touchLinkSubDevicesTbl >> 8) & 0xff
        ADDC      A,R1
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       DPH,A
        MOV       DPL,R0
        MOV       A,R6
        MOV       R4,A
        MOV       A,R7
        MOV       R5,A
        MOV       A,#0x7
        LCALL     ?MOVE_LONG8_XDATA_XDATA
        SJMP      ??touchLink_GetSubDeviceInfo_0
//  502     }
//  503   }
//  504   else
//  505   {
//  506     osal_memset( pInfo, 0, sizeof( bdbTLDeviceInfo_t ) );
??touchLink_GetSubDeviceInfo_1:
        ; Setup parameters for call to function osal_memset
        MOV       R4,#0x7
        MOV       R5,#0x0
        MOV       R1,#0x0
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
//  507   }
//  508 }
??touchLink_GetSubDeviceInfo_0:
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock10
//  509 
//  510 
//  511 /*********************************************************************
//  512  * @fn      touchLink_EncryptNwkKey
//  513  *
//  514  * @brief   Encrypt the current network key to be sent to a Target.
//  515  *          In case of Factory New device generate new key.
//  516  *
//  517  * output parameter
//  518  *
//  519  * @param   pNwkKey - pointer to encrypted network key
//  520  *
//  521  * input parameters
//  522  *
//  523  * @param   keyIndex - key index
//  524  * @param   transID - transaction id
//  525  * @param   responseID - response id
//  526  *
//  527  * @return  none
//  528  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  529 void touchLink_EncryptNwkKey( uint8 *pNwkKey, uint8 keyIndex, uint32 transID, uint32 responseID )
touchLink_EncryptNwkKey:
          CFI Block cfiBlock11 Using cfiCommon0
          CFI Function touchLink_EncryptNwkKey
        CODE
//  530 {
        FUNCALL touchLink_EncryptNwkKey, touchLink_GenerateRandNum
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 91, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_EncryptNwkKey, SSP_ReadNwkActiveKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 91, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_EncryptNwkKey, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 94, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 94, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_EncryptNwkKey, touchLink_BuildAesKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 99, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 99, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_EncryptNwkKey, sspAesEncrypt
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 91, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_EncryptNwkKey, sspAesEncrypt
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 91, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 91, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_EncryptNwkKey, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 94, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 94, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        REQUIRE ?V10
        REQUIRE ?V11
        REQUIRE ?V12
        REQUIRE ?V13
        MOV       A,#-0x16
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 22)
        ; Saved register size: 22
        ; Auto size: 69
        MOV       A,#-0x45
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 91)
        MOV       ?V12,R2
        MOV       ?V13,R3
        MOV       A,R1
        MOV       R6,A
        MOV       A,#0x5b
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V4
        LCALL     ?L_MOV_X
        MOV       A,#0x5f
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V8
        LCALL     ?L_MOV_X
//  531   uint8 aesKeyKey[SEC_KEY_LEN] = TOUCHLINK_DEFAULT_AES_KEY;
        MOV       DPTR,#`?<Constant {80, 104, 76, 105, 234, 156, 209, 5`
        MOV       A,#0x10
        LCALL     ?XSTACK_DISP102_8
        MOV       A,#0x10
        LCALL     ?MOVE_LONG8_XDATA_XDATA
//  532   uint8 masterKey[SEC_KEY_LEN] = TOUCHLINK_ENC_KEY;
        MOV       DPTR,#`?<Constant {192, 193, 194, 195, 196, 197, 198,`
        MOV       A,#0x35
        LCALL     ?XSTACK_DISP102_8
        MOV       A,#0x10
        LCALL     ?MOVE_LONG8_XDATA_XDATA
//  533   uint8 nwkKey[SEC_KEY_LEN];
//  534 
//  535   if ( bdbAttributes.bdbNodeIsOnANetwork == FALSE )
        MOV       DPTR,#bdbAttributes + 14
        MOVX      A,@DPTR
        JNZ       ??touchLink_EncryptNwkKey_0
//  536   {
//  537     touchLink_GenerateRandNum( nwkKey, SEC_KEY_LEN );
        ; Setup parameters for call to function touchLink_GenerateRandNum
        MOV       R1,#0x10
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        LCALL     `??touchLink_GenerateRandNum::?relay`; Banked call to: touchLink_GenerateRandNum
        SJMP      ??touchLink_EncryptNwkKey_1
//  538   }
//  539   else
//  540   {
//  541     nwkActiveKeyItems keyItems;
//  542     SSP_ReadNwkActiveKey( &keyItems );
??touchLink_EncryptNwkKey_0:
        ; Setup parameters for call to function SSP_ReadNwkActiveKey
        MOV       A,#0x20
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??SSP_ReadNwkActiveKey::?relay`; Banked call to: SSP_ReadNwkActiveKey
//  543     osal_memcpy( nwkKey, keyItems.active.key , SEC_KEY_LEN);
        ; Setup parameters for call to function osal_memcpy
        MOV       A,#0x21
        LCALL     ?XSTACK_DISP0_8
        MOV       R1,DPL
        MOV       R2,DPH
        MOV       R3,#0x0
        MOV       ?V0,R1
        MOV       ?V1,R2
        MOV       ?V2,R3
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 94)
        MOV       R4,#0x10
        MOV       R5,#0x0
        MOV       A,#0x3
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
        MOV       A,#0x3
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 91)
//  544   }
//  545 
//  546   // Build the AES key
//  547   touchLink_BuildAesKey( aesKeyKey, transID, responseID, keyIndex );
??touchLink_EncryptNwkKey_1:
        ; Setup parameters for call to function touchLink_BuildAesKey
        MOV       R0,#?V8
        LCALL     ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 95)
        MOV       R0,#?V4
        LCALL     ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 99)
        MOV       A,R6
        MOV       R1,A
        MOV       A,#0x18
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??touchLink_BuildAesKey::?relay`; Banked call to: touchLink_BuildAesKey
        MOV       A,#0x8
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 91)
//  548 
//  549   if ( ( keyIndex == TOUCHLINK_KEY_INDEX_MASTER ) || ( keyIndex == TOUCHLINK_KEY_INDEX_CERT ) )
        MOV       A,#0x4
        XRL       A,R6
        JZ        ??touchLink_EncryptNwkKey_2
        MOV       A,#0xf
        XRL       A,R6
        JNZ       ??touchLink_EncryptNwkKey_3
//  550   {
//  551     // Encypt with the master key
//  552     sspAesEncrypt( masterKey, aesKeyKey );
??touchLink_EncryptNwkKey_2:
        ; Setup parameters for call to function sspAesEncrypt
        MOV       A,#0x10
        LCALL     ?XSTACK_DISP102_8
        MOV       A,#0x35
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??sspAesEncrypt::?relay`; Banked call to: sspAesEncrypt
//  553   }
//  554   // Encrypt the network key with the AES key
//  555   sspAesEncrypt( aesKeyKey, nwkKey );
??touchLink_EncryptNwkKey_3:
        ; Setup parameters for call to function sspAesEncrypt
        MOV       R4,?XSP + 0
        MOV       R5,?XSP + 1
        MOV       A,#0x10
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??sspAesEncrypt::?relay`; Banked call to: sspAesEncrypt
//  556 
//  557   // Copy in the encrypted network key
//  558   osal_memcpy( pNwkKey, nwkKey, SEC_KEY_LEN );
        ; Setup parameters for call to function osal_memcpy
        MOV       R0,?XSP + 0
        MOV       R1,?XSP + 1
        MOV       ?V0,R0
        MOV       ?V1,R1
        MOV       ?V2,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 94)
        MOV       R4,#0x10
        MOV       R5,#0x0
        MOV       R2,?V12
        MOV       R3,?V13
        LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
        MOV       A,#0x3
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 91)
//  559 }
        MOV       A,#0x45
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 22)
        MOV       R7,#0xe
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock11
//  560 
//  561 /*********************************************************************
//  562  * @fn      touchLink_DecryptNwkKey
//  563  *
//  564  * @brief   Decrypt the received network key and update.
//  565  *
//  566  * @param   pNwkKey - pointer to the encrypted network key
//  567  * @param   keyIndex - key index
//  568  * @param   transID - transaction id
//  569  * @param   responseID - response id
//  570  *
//  571  * @return  none
//  572  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  573 void touchLink_DecryptNwkKey( uint8 *pNwkKey, uint8 keyIndex, uint32 transID, uint32 responseID )
touchLink_DecryptNwkKey:
          CFI Block cfiBlock12 Using cfiCommon0
          CFI Function touchLink_DecryptNwkKey
        CODE
//  574 {
        FUNCALL touchLink_DecryptNwkKey, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 71, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 71, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DecryptNwkKey, touchLink_BuildAesKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 76, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 76, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DecryptNwkKey, sspAesEncrypt
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 68, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 68, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DecryptNwkKey, sspAesDecrypt
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 68, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 68, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DecryptNwkKey, touchLink_UpdateNwkKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 68, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 68, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        REQUIRE ?V10
        REQUIRE ?V11
        MOV       A,#-0x14
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 48
        MOV       A,#-0x30
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 68)
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
        MOV       ?V11,R1
        MOV       A,#0x44
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V0
        LCALL     ?L_MOV_X
        MOV       A,#0x48
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V4
        LCALL     ?L_MOV_X
//  575   uint8 aesKeyKey[SEC_KEY_LEN] = TOUCHLINK_DEFAULT_AES_KEY;
        MOV       DPTR,#`?<Constant {80, 104, 76, 105, 234, 156, 209, 5_1`
        MOV       A,#0x10
        LCALL     ?XSTACK_DISP102_8
        MOV       A,#0x10
        LCALL     ?MOVE_LONG8_XDATA_XDATA
//  576 
//  577   uint8 nwkKey[SEC_KEY_LEN];
//  578 
//  579   uint8 masterKey[SEC_KEY_LEN] = TOUCHLINK_ENC_KEY;
        MOV       DPTR,#`?<Constant {192, 193, 194, 195, 196, 197, 198,_1`
        MOV       A,#0x20
        LCALL     ?XSTACK_DISP102_8
        MOV       A,#0x10
        LCALL     ?MOVE_LONG8_XDATA_XDATA
//  580 
//  581   // Copy in the encrypted network key
//  582   osal_memcpy( nwkKey, pNwkKey, SEC_KEY_LEN );
        ; Setup parameters for call to function osal_memcpy
        MOV       ?V8,R6
        MOV       ?V9,R7
        MOV       ?V10,#0x0
        MOV       R0,#?V8
        LCALL     ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 71)
        MOV       R4,#0x10
        MOV       R5,#0x0
        MOV       A,#0x3
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
        MOV       A,#0x3
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 68)
//  583 
//  584   touchLink_BuildAesKey( aesKeyKey, transID, responseID, keyIndex );
        ; Setup parameters for call to function touchLink_BuildAesKey
        MOV       R0,#?V4
        LCALL     ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 72)
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 76)
        MOV       R1,?V11
        MOV       A,#0x18
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??touchLink_BuildAesKey::?relay`; Banked call to: touchLink_BuildAesKey
        MOV       A,#0x8
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 68)
//  585 
//  586   if ( ( keyIndex == TOUCHLINK_KEY_INDEX_MASTER ) || ( keyIndex == TOUCHLINK_KEY_INDEX_CERT ) )
        MOV       A,#0x4
        XRL       A,?V11
        JZ        ??touchLink_DecryptNwkKey_0
        MOV       A,#0xf
        XRL       A,?V11
        JNZ       ??touchLink_DecryptNwkKey_1
//  587   {
//  588     //encypt with the master key
//  589     sspAesEncrypt( masterKey, aesKeyKey );
??touchLink_DecryptNwkKey_0:
        ; Setup parameters for call to function sspAesEncrypt
        MOV       A,#0x10
        LCALL     ?XSTACK_DISP102_8
        MOV       A,#0x20
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??sspAesEncrypt::?relay`; Banked call to: sspAesEncrypt
//  590   }
//  591   // Decrypt the network key with the AES key
//  592   sspAesDecrypt( aesKeyKey, nwkKey );
??touchLink_DecryptNwkKey_1:
        ; Setup parameters for call to function sspAesDecrypt
        MOV       R4,?XSP + 0
        MOV       R5,?XSP + 1
        MOV       A,#0x10
        LCALL     ?XSTACK_DISP101_8
        LCALL     `??sspAesDecrypt::?relay`; Banked call to: sspAesDecrypt
//  593 
//  594   touchLink_UpdateNwkKey( nwkKey, keyIndex );
        ; Setup parameters for call to function touchLink_UpdateNwkKey
        MOV       R1,?V11
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        LCALL     `??touchLink_UpdateNwkKey::?relay`; Banked call to: touchLink_UpdateNwkKey
//  595 }
        MOV       A,#0x30
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 20)
        MOV       R7,#0xc
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock12
//  596 
//  597 /*********************************************************************
//  598  * @fn      touchLink_BuildAesKey
//  599  *
//  600  * @brief   Build an AES key using Transaction ID and Response ID.
//  601  *
//  602  * @param   pAesKey - pointer to AES to be built
//  603  * @param   transID - transaction id
//  604  * @param   responseID - response id
//  605  *
//  606  * @return  none
//  607  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  608 static void touchLink_BuildAesKey( uint8 *pAesKey, uint32 transID, uint32 responseID, uint8 keyIndex )
touchLink_BuildAesKey:
          CFI Block cfiBlock13 Using cfiCommon0
          CFI Function touchLink_BuildAesKey
        CODE
//  609 {
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        REQUIRE ?V10
        REQUIRE ?V11
        MOV       A,#-0x14
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV       A,#0x14
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V4
        LCALL     ?L_MOV_X
        MOV       A,#0x18
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V0
        LCALL     ?L_MOV_X
//  610 
//  611   if ( ( keyIndex == TOUCHLINK_KEY_INDEX_MASTER ) || ( keyIndex == TOUCHLINK_KEY_INDEX_CERT ) )
        MOV       A,#0x4
        XRL       A,R1
        JZ        ??touchLink_BuildAesKey_0
        MOV       A,#0xf
        XRL       A,R1
        JZ        $+5
        LJMP      ??touchLink_BuildAesKey_1 & 0xFFFF
//  612   {
//  613     // Copy transaction identifier to 1st byte
//  614     pAesKey[0] = BREAK_UINT32( transID, 3 );
??touchLink_BuildAesKey_0:
        MOV       ?V8,?V4
        MOV       ?V9,?V5
        MOV       ?V10,?V6
        MOV       ?V11,?V7
        MOV       A,#0x18
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  615     pAesKey[1] = BREAK_UINT32( transID, 2 );
        MOV       ?V8,?V4
        MOV       ?V9,?V5
        MOV       ?V10,?V6
        MOV       ?V11,?V7
        MOV       A,#0x10
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  616     pAesKey[2] = BREAK_UINT32( transID, 1 );
        MOV       R4,?V4
        MOV       R5,?V5
        CLR       A
        XCH       A,R5
        MOV       R4,A
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  617     pAesKey[3] = BREAK_UINT32( transID, 0 );
        MOV       R4,?V4
        MOV       R5,?V5
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  618 
//  619     // Copy response identifier 3rd bute
//  620     pAesKey[8] = BREAK_UINT32( responseID, 3 );
        MOV       ?V8,?V0
        MOV       ?V9,?V1
        MOV       ?V10,?V2
        MOV       ?V11,?V3
        MOV       A,#0x18
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  621     pAesKey[9] = BREAK_UINT32( responseID, 2 );
        MOV       ?V8,?V0
        MOV       ?V9,?V1
        MOV       ?V10,?V2
        MOV       ?V11,?V3
        MOV       A,#0x10
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  622     pAesKey[10] = BREAK_UINT32( responseID, 1 );
        MOV       R4,?V0
        MOV       R5,?V1
        CLR       A
        XCH       A,R5
        MOV       R4,A
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  623     pAesKey[11] = BREAK_UINT32( responseID, 0 );
        MOV       R4,?V0
        MOV       R5,?V1
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R2
        ADD       A,#0xb
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  624   }
//  625 
//  626   // Copy in the transaction identifier
//  627   pAesKey[4] = BREAK_UINT32( transID, 3 );
??touchLink_BuildAesKey_1:
        MOV       ?V8,?V4
        MOV       ?V9,?V5
        MOV       ?V10,?V6
        MOV       ?V11,?V7
        MOV       A,#0x18
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  628   pAesKey[5] = BREAK_UINT32( transID, 2 );
        MOV       ?V8,?V4
        MOV       ?V9,?V5
        MOV       ?V10,?V6
        MOV       ?V11,?V7
        MOV       A,#0x10
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  629   pAesKey[6] = BREAK_UINT32( transID, 1 );
        MOV       R4,?V4
        MOV       R5,?V5
        CLR       A
        XCH       A,R5
        MOV       R4,A
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  630   pAesKey[7] = BREAK_UINT32( transID, 0 );
        MOV       R4,?V4
        MOV       R5,?V5
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R2
        MOV       DPH,R3
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  631 
//  632   // Copy in the response identifier
//  633   pAesKey[12] = BREAK_UINT32( responseID, 3 );
        MOV       ?V8,?V0
        MOV       ?V9,?V1
        MOV       ?V10,?V2
        MOV       ?V11,?V3
        MOV       A,#0x18
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R2
        ADD       A,#0xc
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  634   pAesKey[13] = BREAK_UINT32( responseID, 2 );
        MOV       ?V8,?V0
        MOV       ?V9,?V1
        MOV       ?V10,?V2
        MOV       ?V11,?V3
        MOV       A,#0x10
        MOV       R0,#?V8
        LCALL     ?UL_SHR
        MOV       A,?V8
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R2
        ADD       A,#0xd
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  635   pAesKey[14] = BREAK_UINT32( responseID, 1 );
        MOV       R4,?V0
        MOV       R5,?V1
        CLR       A
        XCH       A,R5
        MOV       R4,A
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R2
        ADD       A,#0xe
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  636   pAesKey[15] = BREAK_UINT32( responseID, 0 );
        MOV       R4,?V0
        MOV       R5,?V1
        MOV       A,R4
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R2
        ADD       A,#0xf
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  637 }
        MOV       R7,#0xc
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock13
//  638 
//  639 /*********************************************************************
//  640  * @fn      touchLink_UpdateNwkKey
//  641  *
//  642  * @brief   Update the network key.
//  643  *
//  644  * @param   pNwkParams - pointer to new network key
//  645  * @param   keyIndex - key index
//  646  *
//  647  * @return  none
//  648  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  649 void touchLink_UpdateNwkKey( uint8 *pNwkKey, uint8 keyIndex )
touchLink_UpdateNwkKey:
          CFI Block cfiBlock14 Using cfiCommon0
          CFI Function touchLink_UpdateNwkKey
        CODE
//  650 {
        FUNCALL touchLink_UpdateNwkKey, SSP_UpdateNwkKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNwkKey, SSP_SwitchNwkKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNwkKey, ZDApp_SaveNwkKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        REQUIRE ?V10
        REQUIRE ?V11
        MOV       A,#-0x14
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
        MOV       ?V0,R1
//  651   uint32 nwkFrameCounterTmp;
//  652   (void)keyIndex;
//  653 
//  654   // To prevent Framecounter out of sync issues, store the lastkey
//  655   nwkFrameCounterTmp = nwkFrameCounter;  // (Global in SSP).
        MOV       DPTR,#nwkFrameCounter
        MOV       R0,#?V8
        LCALL     ?L_MOV_X
        MOV       ?V4,?V8
        MOV       ?V5,?V9
        MOV       ?V6,?V10
        MOV       ?V7,?V11
//  656 
//  657   // Update the network key
//  658   SSP_UpdateNwkKey( pNwkKey, 0 );
        ; Setup parameters for call to function SSP_UpdateNwkKey
        MOV       R1,#0x0
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??SSP_UpdateNwkKey::?relay`; Banked call to: SSP_UpdateNwkKey
//  659 
//  660   SSP_SwitchNwkKey( 0 );
        ; Setup parameters for call to function SSP_SwitchNwkKey
        MOV       R1,#0x0
        LCALL     `??SSP_SwitchNwkKey::?relay`; Banked call to: SSP_SwitchNwkKey
//  661 
//  662   nwkFrameCounter  = nwkFrameCounterTmp; // restore
        MOV       DPTR,#nwkFrameCounter
        MOV       R0,#?V4
        LCALL     ?L_MOV_TO_X
//  663 
//  664   // Save off the security
//  665   ZDApp_SaveNwkKey();
        ; Setup parameters for call to function ZDApp_SaveNwkKey
        LCALL     `??ZDApp_SaveNwkKey::?relay`; Banked call to: ZDApp_SaveNwkKey
//  666 }
        MOV       R7,#0xc
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock14
//  667 
//  668 /*********************************************************************
//  669  * @fn      touchLink_GetNwkKeyBitmask
//  670  *
//  671  * @brief   Get the supported network key bitmask.
//  672  *
//  673  * @param   none
//  674  *
//  675  * @return  network key bitmask
//  676  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  677 uint16 touchLink_GetNwkKeyBitmask( void )
touchLink_GetNwkKeyBitmask:
          CFI Block cfiBlock15 Using cfiCommon0
          CFI Function touchLink_GetNwkKeyBitmask
        CODE
//  678 {
        ; Saved register size: 0
        ; Auto size: 0
//  679   return ( (uint16)1 << TOUCHLINK_KEY_INDEX );
        MOV       R2,#0x10
        MOV       R3,#0x0
        LJMP      ?BRET
//  680 }
          CFI EndBlock cfiBlock15
//  681 
//  682 /*********************************************************************
//  683  * @fn      touchLink_GenerateRandNum
//  684  *
//  685  * @brief   Fill buffer with random bytes.
//  686  *
//  687  * input parameter
//  688  *
//  689  * @param   numSize - size of buffer in bytes
//  690  *
//  691  * output parameter
//  692  *
//  693  * @param   pNum - pointer to buffer to be filled with random values
//  694  *
//  695  * @return  none
//  696  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  697 void touchLink_GenerateRandNum( uint8 *pNum, uint8 numSize )
touchLink_GenerateRandNum:
          CFI Block cfiBlock16 Using cfiCommon0
          CFI Function touchLink_GenerateRandNum
        CODE
//  698 {
        FUNCALL touchLink_GenerateRandNum, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_GenerateRandNum, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V4
        REQUIRE ?V5
        MOV       A,#-0xe
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
        MOV       ?V2,R1
//  699   if ( pNum && numSize )
        MOV       A,R6
        ORL       A,R7
        JZ        ??touchLink_GenerateRandNum_0
        MOV       A,?V2
        JZ        ??touchLink_GenerateRandNum_0
//  700   {
//  701     uint8 lastByte = ( numSize - 1 );
        MOV       A,#-0x1
        ADD       A,?V2
        MOV       ?V1,A
//  702     for ( uint8 i = 0; i < lastByte; i += 2 )
        MOV       ?V0,#0x0
??touchLink_GenerateRandNum_1:
        MOV       A,?V0
        CLR       C
        SUBB      A,?V1
        JNC       ??touchLink_GenerateRandNum_2
//  703     {
//  704       uint16 rand = osal_rand();
        ; Setup parameters for call to function osal_rand
        LCALL     `??osal_rand::?relay`; Banked call to: osal_rand
        MOV       ?V4,R2
        MOV       ?V5,R3
        MOV       R0,?V4
        MOV       R1,?V5
//  705       pNum[i]   = LO_UINT16( rand );
        MOV       A,R0
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,?V0
        MOV       R2,A
        MOV       R3,#0x0
        MOV       A,R6
        ADD       A,R2
        MOV       DPL,A
        MOV       A,R7
        ADDC      A,R3
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  706       pNum[i+1] = HI_UINT16( rand );
        CLR       A
        XCH       A,R1
        MOV       R0,A
        MOV       A,R0
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,?V0
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R6
        ADD       A,R0
        MOV       DPL,A
        MOV       A,R7
        ADDC      A,R1
        MOV       DPH,A
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  707     }
        MOV       A,#0x2
        ADD       A,?V0
        MOV       ?V0,A
        SJMP      ??touchLink_GenerateRandNum_1
//  708 
//  709     // In case the number is odd
//  710     if ( numSize % 2 )
??touchLink_GenerateRandNum_2:
        MOV       A,?V2
        MOV       B,#0x2
        DIV       AB
        MOV       A,B
        JZ        ??touchLink_GenerateRandNum_0
//  711     {
//  712       pNum[lastByte] = LO_UINT16( osal_rand() );
        ; Setup parameters for call to function osal_rand
        LCALL     `??osal_rand::?relay`; Banked call to: osal_rand
        MOV       A,R2
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,?V1
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R6
        ADD       A,R0
        MOV       DPL,A
        MOV       A,R7
        ADDC      A,R1
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  713     }
//  714   }
//  715 }
??touchLink_GenerateRandNum_0:
        MOV       R7,#0x6
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock16
//  716 
//  717 /*********************************************************************
//  718  * @fn      touchLink_GetRandPrimaryChannel
//  719  *
//  720  * @brief   Get randomly chosen TOUCHLINK primary channel.
//  721  *
//  722  * @return  channel
//  723  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  724 uint8 touchLink_GetRandPrimaryChannel()
touchLink_GetRandPrimaryChannel:
          CFI Block cfiBlock17 Using cfiCommon0
          CFI Function touchLink_GetRandPrimaryChannel
        CODE
//  725 {
        FUNCALL touchLink_GetRandPrimaryChannel, osal_rand
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  726   uint8 channel = osal_rand() & 0x1F;
        ; Setup parameters for call to function osal_rand
        LCALL     `??osal_rand::?relay`; Banked call to: osal_rand
        MOV       A,R2
        ANL       A,#0x1f
        MOV       R1,A
//  727   if ( channel <= TOUCHLINK_FIRST_CHANNEL )
        MOV       A,R1
        CLR       C
        SUBB      A,#0xc
        JNC       ??touchLink_GetRandPrimaryChannel_0
//  728   {
//  729     channel = TOUCHLINK_FIRST_CHANNEL;
        MOV       R1,#0xb
        SJMP      ??touchLink_GetRandPrimaryChannel_1
//  730   }
//  731   else if ( channel <= TOUCHLINK_SECOND_CHANNEL )
??touchLink_GetRandPrimaryChannel_0:
        MOV       A,R1
        CLR       C
        SUBB      A,#0x10
        JNC       ??touchLink_GetRandPrimaryChannel_2
//  732   {
//  733     channel = TOUCHLINK_SECOND_CHANNEL;
        MOV       R1,#0xf
        SJMP      ??touchLink_GetRandPrimaryChannel_1
//  734   }
//  735   else if ( channel <= TOUCHLINK_THIRD_CHANNEL )
??touchLink_GetRandPrimaryChannel_2:
        MOV       A,R1
        CLR       C
        SUBB      A,#0x15
        JNC       ??touchLink_GetRandPrimaryChannel_3
//  736   {
//  737     channel = TOUCHLINK_THIRD_CHANNEL;
        MOV       R1,#0x14
        SJMP      ??touchLink_GetRandPrimaryChannel_1
//  738   }
//  739   else
//  740   {
//  741     channel = TOUCHLINK_FOURTH_CHANNEL;
??touchLink_GetRandPrimaryChannel_3:
        MOV       R1,#0x19
//  742   }
//  743 #ifdef TOUCHLINK_DEV_SELECT_FIRST_CHANNEL
//  744 #warning The device will always select the first primary channel
//  745   channel = TOUCHLINK_FIRST_CHANNEL;
//  746 #endif
//  747   return channel;
??touchLink_GetRandPrimaryChannel_1:
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
//  748 }
          CFI EndBlock cfiBlock17
//  749 
//  750 /*********************************************************************
//  751  * @fn      touchLink_SetNIB
//  752  *
//  753  * @brief   Copy new Network Parameters to the NIB.
//  754  *
//  755  * @param   nwkState - network state
//  756  * @param   nwkAddr - short address
//  757  * @param   pExtendedPANID - pointer to extended PAN ID
//  758  * @param   logicalChannel - channel
//  759  * @param   panId - PAN identifier
//  760  * @param   nwkUpdateId - nwtwork update identifier
//  761  *
//  762  * @return      void
//  763  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  764 void touchLink_SetNIB( nwk_states_t nwkState, uint16 nwkAddr, uint8 *pExtendedPANID,
touchLink_SetNIB:
          CFI Block cfiBlock18 Using cfiCommon0
          CFI Function touchLink_SetNIB
        CODE
//  765                  uint8 logicalChannel, uint16 panId, uint8 nwkUpdateId )
//  766 {
        FUNCALL touchLink_SetNIB, NLME_SetUpdateID
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SetNIB, sAddrExtCpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SetNIB, touchLink_UpdateNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        REQUIRE ?V10
        REQUIRE ?V11
        MOV       A,#-0x14
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV       A,R1
        MOV       R7,A
        MOV       ?V8,R2
        MOV       ?V9,R3
        MOV       ?V10,R4
        MOV       ?V11,R5
        MOV       A,#0x14
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       ?V4,A
        MOV       A,#0x15
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       ?V6,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V7,A
        MOV       A,#0x17
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       R6,A
//  767   // Copy the new network parameters to NIB
//  768   _NIB.nwkState = nwkState;
        MOV       A,R7
        MOV       DPTR,#_NIB + 35
        MOVX      @DPTR,A
//  769   _NIB.nwkDevAddress = nwkAddr;
        MOV       DPTR,#_NIB + 20
        MOV       A,?V8
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,?V9
        MOVX      @DPTR,A
//  770   _NIB.nwkLogicalChannel = logicalChannel;
        MOV       A,?V4
        MOV       DPTR,#_NIB + 22
        MOVX      @DPTR,A
//  771   _NIB.nwkCoordAddress = INVALID_NODE_ADDR;
        MOV       DPTR,#_NIB + 23
        MOV       A,#-0x2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#-0x1
        MOVX      @DPTR,A
//  772   _NIB.channelList = (uint32)1 << logicalChannel;
        MOV       ?V0,#0x1
        MOV       ?V1,#0x0
        MOV       ?V2,#0x0
        MOV       ?V3,#0x0
        MOV       A,?V4
        MOV       R0,#?V0
        LCALL     ?L_SHL
        MOV       DPTR,#_NIB + 36
        MOV       R0,#?V0
        LCALL     ?L_MOV_TO_X
//  773   _NIB.nwkPanId = panId;
        MOV       DPTR,#_NIB + 33
        MOV       A,?V6
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,?V7
        MOVX      @DPTR,A
//  774   _NIB.nodeDepth = 1;
        MOV       DPTR,#_NIB + 52
        MOV       A,#0x1
        MOVX      @DPTR,A
//  775   _NIB.MaxRouters = (uint8)gNWK_MAX_DEVICE_LIST;
        MOV       DPTR,#gNWK_MAX_DEVICE_LIST
        CLR       A
        MOVC      A,@A+DPTR
        MOV       DPTR,#_NIB + 5
        MOVX      @DPTR,A
//  776   _NIB.MaxChildren = (uint8)gNWK_MAX_DEVICE_LIST;
        MOV       DPTR,#gNWK_MAX_DEVICE_LIST
        CLR       A
        MOVC      A,@A+DPTR
        MOV       DPTR,#_NIB + 3
        MOVX      @DPTR,A
//  777   _NIB.allocatedRouterAddresses = 1;
        MOV       DPTR,#_NIB + 44
        MOV       A,#0x1
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
//  778   _NIB.allocatedEndDeviceAddresses = 1;
        MOV       DPTR,#_NIB + 48
        MOV       A,#0x1
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
//  779 
//  780   if ( _NIB.nwkUpdateId != nwkUpdateId )
        MOV       DPTR,#_NIB + 109
        MOVX      A,@DPTR
        XRL       A,R6
        JZ        ??touchLink_SetNIB_0
//  781   {
//  782     NLME_SetUpdateID( nwkUpdateId );
        ; Setup parameters for call to function NLME_SetUpdateID
        MOV       A,R6
        MOV       R1,A
        LCALL     `??NLME_SetUpdateID::?relay`; Banked call to: NLME_SetUpdateID
//  783   }
//  784 
//  785   osal_cpyExtAddr( _NIB.extendedPANID, pExtendedPANID );
??touchLink_SetNIB_0:
        ; Setup parameters for call to function sAddrExtCpy
        MOV       R4,?V10
        MOV       R5,?V11
        MOV       R2,#(_NIB + 53) & 0xff
        MOV       R3,#((_NIB + 53) >> 8) & 0xff
        LCALL     `??sAddrExtCpy::?relay`; Banked call to: sAddrExtCpy
//  786 
//  787   // Save the NIB
//  788   if ( ( nwkState == NWK_ROUTER ) || ( nwkState == NWK_ENDDEVICE ) )
        MOV       A,#0x8
        XRL       A,R7
        JZ        ??touchLink_SetNIB_1
        MOV       A,#0x4
        XRL       A,R7
        JNZ       ??touchLink_SetNIB_2
//  789   {
//  790     touchLink_UpdateNV( TOUCHLINK_UPDATE_NV_NIB );
??touchLink_SetNIB_1:
        ; Setup parameters for call to function touchLink_UpdateNV
        MOV       R1,#0x1
        LCALL     `??touchLink_UpdateNV::?relay`; Banked call to: touchLink_UpdateNV
//  791   }
//  792   // else will be updated when ED joins its parent
//  793 }
??touchLink_SetNIB_2:
        MOV       R7,#0xc
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock18
//  794 
//  795 /*********************************************************************
//  796  * @fn      touchLink_ProcessNwkUpdate
//  797  *
//  798  * @brief   Update our local network update id and logical channel.
//  799  *
//  800  * @param   nwkUpdateId - new network update id
//  801  * @param   logicalChannel - new logical channel
//  802  *
//  803  * @return  void
//  804  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  805 void touchLink_ProcessNwkUpdate( uint8 nwkUpdateId, uint8 logicalChannel )
touchLink_ProcessNwkUpdate:
          CFI Block cfiBlock19 Using cfiCommon0
          CFI Function touchLink_ProcessNwkUpdate
        CODE
//  806 {
        FUNCALL touchLink_ProcessNwkUpdate, NLME_SetUpdateID
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_ProcessNwkUpdate, touchLink_SetChannel
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_ProcessNwkUpdate, ZDApp_NwkStateUpdateCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_ProcessNwkUpdate, touchLink_UpdateNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_ProcessNwkUpdate, nwkTransmissionFailures
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV       A,R1
        MOV       R7,A
        MOV       A,R2
        MOV       R6,A
//  807   // Update the network update id
//  808   NLME_SetUpdateID( nwkUpdateId );
        ; Setup parameters for call to function NLME_SetUpdateID
        MOV       A,R7
        MOV       R1,A
        LCALL     `??NLME_SetUpdateID::?relay`; Banked call to: NLME_SetUpdateID
//  809 
//  810   // Switch channel
//  811   if ( _NIB.nwkLogicalChannel != logicalChannel )
        MOV       DPTR,#_NIB + 22
        MOVX      A,@DPTR
        XRL       A,R6
        JZ        ??touchLink_ProcessNwkUpdate_0
//  812   {
//  813     _NIB.nwkLogicalChannel = logicalChannel;
        MOV       A,R6
        MOV       DPTR,#_NIB + 22
        MOVX      @DPTR,A
//  814     touchLink_SetChannel( logicalChannel );
        ; Setup parameters for call to function touchLink_SetChannel
        MOV       A,R6
        MOV       R1,A
        LCALL     `??touchLink_SetChannel::?relay`; Banked call to: touchLink_SetChannel
//  815   }
//  816 
//  817   // Update channel list
//  818   _NIB.channelList = (uint32)1 << logicalChannel;
??touchLink_ProcessNwkUpdate_0:
        MOV       ?V0,#0x1
        MOV       ?V1,#0x0
        MOV       ?V2,#0x0
        MOV       ?V3,#0x0
        MOV       A,R6
        MOV       R0,#?V0
        LCALL     ?L_SHL
        MOV       DPTR,#_NIB + 36
        MOV       R0,#?V0
        LCALL     ?L_MOV_TO_X
//  819 
//  820   // Our Channel has been changed -- notify to save info into NV
//  821   ZDApp_NwkStateUpdateCB();
        ; Setup parameters for call to function ZDApp_NwkStateUpdateCB
        LCALL     `??ZDApp_NwkStateUpdateCB::?relay`; Banked call to: ZDApp_NwkStateUpdateCB
//  822   touchLink_UpdateNV( TOUCHLINK_UPDATE_NV_NIB );
        ; Setup parameters for call to function touchLink_UpdateNV
        MOV       R1,#0x1
        LCALL     `??touchLink_UpdateNV::?relay`; Banked call to: touchLink_UpdateNV
//  823 
//  824   // Reset the total transmit count and the transmit failure counters
//  825   _NIB.nwkTotalTransmissions = 0;
        MOV       DPTR,#_NIB + 107
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
//  826   nwkTransmissionFailures( TRUE );
        ; Setup parameters for call to function nwkTransmissionFailures
        MOV       R1,#0x1
        LCALL     `??nwkTransmissionFailures::?relay`; Banked call to: nwkTransmissionFailures
//  827 }
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock19
//  828 
//  829 /*********************************************************************
//  830  * @fn      touchLink_UpdateNV
//  831  *
//  832  * @brief   Updates NV with NIB and free ranges items
//  833  *
//  834  * @param   enables - specifies what to update
//  835  *
//  836  * @return  none
//  837  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  838 void touchLink_UpdateNV( uint8 enables )
touchLink_UpdateNV:
          CFI Block cfiBlock20 Using cfiCommon0
          CFI Function touchLink_UpdateNV
        CODE
//  839 {
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, zgWriteStartupOptions
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_UpdateNV, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        MOV       A,#-0xa
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV       A,R1
        MOV       R6,A
//  840 #if defined ( NV_RESTORE )
//  841 
//  842  #if defined ( NV_TURN_OFF_RADIO )
//  843   // Turn off the radio's receiver during an NV update
//  844   uint8 RxOnIdle;
//  845   uint8 x = FALSE;
//  846   ZMacGetReq( ZMacRxOnIdle, &RxOnIdle );
//  847   ZMacSetReq( ZMacRxOnIdle, &x );
//  848  #endif
//  849 
//  850   if ( enables & TOUCHLINK_UPDATE_NV_NIB )
        MOV       A,R6
        MOV       C,0xE0 /* A   */.0
        JNC       ??touchLink_UpdateNV_0
//  851   {
//  852     // Update NIB in NV
//  853     osal_nv_write( ZCD_NV_NIB, 0, sizeof( nwkIB_t ), &_NIB );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#_NIB & 0xff
        MOV       ?V1,#(_NIB >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x6e
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#0x21
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  854 
//  855     // Reset the NV startup option to resume from NV by clearing
//  856     // the "New" join option.
//  857     zgWriteStartupOptions( ZG_STARTUP_CLEAR, ZCD_STARTOPT_DEFAULT_NETWORK_STATE );
        ; Setup parameters for call to function zgWriteStartupOptions
        MOV       R2,#0x2
        MOV       R1,#0x0
        LCALL     `??zgWriteStartupOptions::?relay`; Banked call to: zgWriteStartupOptions
        MOV       A,R1
//  858   }
//  859 
//  860   if ( enables & TOUCHLINK_UPDATE_NV_RANGES )
??touchLink_UpdateNV_0:
        MOV       A,R6
        MOV       C,0xE0 /* A   */.1
        JC        $+5
        LJMP      ??touchLink_UpdateNV_1 & 0xFFFF
//  861   {
//  862     // Store our free network address and group ID ranges
//  863     osal_nv_write( ZCD_NV_MIN_FREE_NWK_ADDR, 0, sizeof( touchLinkFreeNwkAddrBegin ), &touchLinkFreeNwkAddrBegin );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#touchLinkFreeNwkAddrBegin & 0xff
        MOV       ?V1,#(touchLinkFreeNwkAddrBegin >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x2
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#-0x6e
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  864     osal_nv_write( ZCD_NV_MAX_FREE_NWK_ADDR, 0, sizeof( touchLinkFreeNwkAddrEnd ), &touchLinkFreeNwkAddrEnd );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#touchLinkFreeNwkAddrEnd & 0xff
        MOV       ?V1,#(touchLinkFreeNwkAddrEnd >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x2
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#-0x6d
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  865     osal_nv_write( ZCD_NV_MIN_FREE_GRP_ID, 0, sizeof( touchLinkFreeGrpIdBegin ), &touchLinkFreeGrpIdBegin );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#touchLinkFreeGrpIdBegin & 0xff
        MOV       ?V1,#(touchLinkFreeGrpIdBegin >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x2
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#-0x6c
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  866     osal_nv_write( ZCD_NV_MAX_FREE_GRP_ID, 0, sizeof( touchLinkFreeGrpIdEnd ), &touchLinkFreeGrpIdEnd );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#touchLinkFreeGrpIdEnd & 0xff
        MOV       ?V1,#(touchLinkFreeGrpIdEnd >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x2
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#-0x6b
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  867 
//  868     // Store our group ID range
//  869     osal_nv_write( ZCD_NV_MIN_GRP_IDS, 0, sizeof( touchLinkGrpIDsBegin ), &touchLinkGrpIDsBegin );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#touchLinkGrpIDsBegin & 0xff
        MOV       ?V1,#(touchLinkGrpIDsBegin >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x2
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#-0x6a
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  870     osal_nv_write( ZCD_NV_MAX_GRP_IDS, 0, sizeof( touchLinkGrpIDsEnd ), &touchLinkGrpIDsEnd );
        ; Setup parameters for call to function osal_nv_write
        MOV       ?V0,#touchLinkGrpIDsEnd & 0xff
        MOV       ?V1,#(touchLinkGrpIDsEnd >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       ?V0,#0x2
        MOV       ?V1,#0x0
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       R2,#-0x69
        MOV       R3,#0x0
        LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV       A,R1
//  871   }
//  872 
//  873  #if defined ( NV_TURN_OFF_RADIO )
//  874   ZMacSetReq( ZMacRxOnIdle, &RxOnIdle );
//  875  #endif
//  876 
//  877 #endif // NV_RESTORE
//  878 }
??touchLink_UpdateNV_1:
        MOV       R7,#0x2
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock20
//  879 
//  880 /*********************************************************************
//  881  * @fn          touchLink_InitNV
//  882  *
//  883  * @brief       Initialize free range RAM variables from NV. If NV items
//  884  *              don't exist, then the NV is initialize with what is in
//  885  *              RAM variables.
//  886  *
//  887  * @param       none
//  888  *
//  889  * @return      none
//  890  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  891 static void touchLink_InitNV( void )
touchLink_InitNV:
          CFI Block cfiBlock21 Using cfiCommon0
          CFI Function touchLink_InitNV
        CODE
//  892 {
        FUNCALL touchLink_InitNV, touchLink_ItemInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitNV, touchLink_ItemInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitNV, touchLink_ItemInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitNV, touchLink_ItemInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitNV, touchLink_ItemInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_InitNV, touchLink_ItemInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        MOV       A,#-0xa
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
//  893   // Initialize our free network address and group ID ranges
//  894   touchLink_ItemInit( ZCD_NV_MIN_FREE_NWK_ADDR, sizeof( touchLinkFreeNwkAddrBegin ), &touchLinkFreeNwkAddrBegin );
        ; Setup parameters for call to function touchLink_ItemInit
        MOV       ?V0,#touchLinkFreeNwkAddrBegin & 0xff
        MOV       ?V1,#(touchLinkFreeNwkAddrBegin >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R4,#0x2
        MOV       R5,#0x0
        MOV       R2,#-0x6e
        MOV       R3,#0x0
        LCALL     `??touchLink_ItemInit::?relay`; Banked call to: touchLink_ItemInit
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
//  895   touchLink_ItemInit( ZCD_NV_MAX_FREE_NWK_ADDR, sizeof( touchLinkFreeNwkAddrEnd ), &touchLinkFreeNwkAddrEnd );
        ; Setup parameters for call to function touchLink_ItemInit
        MOV       ?V0,#touchLinkFreeNwkAddrEnd & 0xff
        MOV       ?V1,#(touchLinkFreeNwkAddrEnd >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R4,#0x2
        MOV       R5,#0x0
        MOV       R2,#-0x6d
        MOV       R3,#0x0
        LCALL     `??touchLink_ItemInit::?relay`; Banked call to: touchLink_ItemInit
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
//  896   touchLink_ItemInit( ZCD_NV_MIN_FREE_GRP_ID, sizeof( touchLinkFreeGrpIdBegin ), &touchLinkFreeGrpIdBegin );
        ; Setup parameters for call to function touchLink_ItemInit
        MOV       ?V0,#touchLinkFreeGrpIdBegin & 0xff
        MOV       ?V1,#(touchLinkFreeGrpIdBegin >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R4,#0x2
        MOV       R5,#0x0
        MOV       R2,#-0x6c
        MOV       R3,#0x0
        LCALL     `??touchLink_ItemInit::?relay`; Banked call to: touchLink_ItemInit
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
//  897   touchLink_ItemInit( ZCD_NV_MAX_FREE_GRP_ID, sizeof( touchLinkFreeGrpIdEnd ), &touchLinkFreeGrpIdEnd );
        ; Setup parameters for call to function touchLink_ItemInit
        MOV       ?V0,#touchLinkFreeGrpIdEnd & 0xff
        MOV       ?V1,#(touchLinkFreeGrpIdEnd >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R4,#0x2
        MOV       R5,#0x0
        MOV       R2,#-0x6b
        MOV       R3,#0x0
        LCALL     `??touchLink_ItemInit::?relay`; Banked call to: touchLink_ItemInit
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
//  898 
//  899   // Initialize our group ID range
//  900   touchLink_ItemInit( ZCD_NV_MIN_GRP_IDS, sizeof( touchLinkGrpIDsBegin ), &touchLinkGrpIDsBegin );
        ; Setup parameters for call to function touchLink_ItemInit
        MOV       ?V0,#touchLinkGrpIDsBegin & 0xff
        MOV       ?V1,#(touchLinkGrpIDsBegin >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R4,#0x2
        MOV       R5,#0x0
        MOV       R2,#-0x6a
        MOV       R3,#0x0
        LCALL     `??touchLink_ItemInit::?relay`; Banked call to: touchLink_ItemInit
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
//  901   touchLink_ItemInit( ZCD_NV_MAX_GRP_IDS, sizeof( touchLinkGrpIDsEnd ), &touchLinkGrpIDsEnd );
        ; Setup parameters for call to function touchLink_ItemInit
        MOV       ?V0,#touchLinkGrpIDsEnd & 0xff
        MOV       ?V1,#(touchLinkGrpIDsEnd >> 8) & 0xff
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R4,#0x2
        MOV       R5,#0x0
        MOV       R2,#-0x69
        MOV       R3,#0x0
        LCALL     `??touchLink_ItemInit::?relay`; Banked call to: touchLink_ItemInit
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
//  902 }
        MOV       R7,#0x2
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock21
//  903 
//  904 /*********************************************************************
//  905  * @fn      touchLink_ItemInit
//  906  *
//  907  * @brief   Initialize an NV item. If the item doesn't exist in NV memory,
//  908  *          write the default (value passed in) into NV memory. But if
//  909  *          it exists, set the item to the value stored in NV memory.
//  910  *
//  911  * @param   id - item id
//  912  * @param   len - item len
//  913  * @param   buf - pointer to the item
//  914  *
//  915  * @return  none
//  916  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  917 void touchLink_ItemInit( uint16 id, uint16 len, void *pBuf )
touchLink_ItemInit:
          CFI Block cfiBlock22 Using cfiCommon0
          CFI Function touchLink_ItemInit
        CODE
//  918 {
        FUNCALL touchLink_ItemInit, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_ItemInit, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
        MOV       ?V2,R4
        MOV       ?V3,R5
        MOV       A,#0xc
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       ?V0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V1,A
//  919 #if defined ( NV_RESTORE )
//  920   // If the item doesn't exist in NV memory, create and initialize
//  921   // it with the value passed in.
//  922   if ( osal_nv_item_init( id, len, pBuf ) == ZSuccess )
        ; Setup parameters for call to function osal_nv_item_init
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R4,?V2
        MOV       R5,?V3
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??osal_nv_item_init::?relay`; Banked call to: osal_nv_item_init
        MOV       A,#0x2
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       A,R1
        JNZ       ??touchLink_ItemInit_0
//  923   {
//  924     // The item already exists in NV memory, read it from NV memory
//  925     osal_nv_read( id, 0, len, pBuf );
        ; Setup parameters for call to function osal_nv_read
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       R0,#?V2
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 16)
        MOV       R4,#0x0
        MOV       R5,#0x0
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??osal_nv_read::?relay`; Banked call to: osal_nv_read
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       A,R1
//  926   }
//  927 #endif // NV_RESTORE
//  928 }
??touchLink_ItemInit_0:
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock22
//  929 
//  930 /*********************************************************************
//  931  * @fn      touchLink_SetMacNwkParams
//  932  *
//  933  * @brief   Configure MAC with our Network Parameters.
//  934  *
//  935  * @param   nwkAddr - network address
//  936  * @param   panId - PAN identifier
//  937  * @param   channel
//  938  *
//  939  * @return  void
//  940  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  941 void touchLink_SetMacNwkParams( uint16 nwkAddr, uint16 panId, uint8 channel )
touchLink_SetMacNwkParams:
          CFI Block cfiBlock23 Using cfiCommon0
          CFI Function touchLink_SetMacNwkParams
        CODE
//  942 {
        FUNCALL touchLink_SetMacNwkParams, ZMacSetReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SetMacNwkParams, ZMacSetReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SetMacNwkParams, touchLink_SetChannel
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV       A,#-0x9
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 4
        MOV       A,#-0x4
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 13)
        MOV       A,#0x2
        LCALL     ?XSTACK_DISP0_8
        MOV       A,R2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R3
        MOVX      @DPTR,A
        MOV       DPL,?XSP + 0
        MOV       DPH,?XSP + 1
        MOV       A,R4
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R5
        MOVX      @DPTR,A
        MOV       A,R1
        MOV       R6,A
//  943   // Set our short address
//  944   ZMacSetReq( ZMacShortAddress, (byte*)&nwkAddr );
        ; Setup parameters for call to function ZMacSetReq
        MOV       A,#0x2
        LCALL     ?XSTACK_DISP101_8
        MOV       R1,#0x53
        LCALL     `??ZMacSetReq::?relay`; Banked call to: ZMacSetReq
        MOV       A,R1
//  945 
//  946   // Set our PAN ID
//  947   ZMacSetReq( ZMacPanId, (byte*)&panId );
        ; Setup parameters for call to function ZMacSetReq
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        MOV       R1,#0x50
        LCALL     `??ZMacSetReq::?relay`; Banked call to: ZMacSetReq
        MOV       A,R1
//  948 
//  949   // Tune to the selected logical channel
//  950   touchLink_SetChannel( channel );
        ; Setup parameters for call to function touchLink_SetChannel
        MOV       A,R6
        MOV       R1,A
        LCALL     `??touchLink_SetChannel::?relay`; Banked call to: touchLink_SetChannel
//  951 }
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 9)
        MOV       R7,#0x1
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock23
//  952 
//  953 /*********************************************************************
//  954  * @fn      touchLink_SetChannel
//  955  *
//  956  * @brief   Set our channel.
//  957  *
//  958  * @param   channel - new channel to change to
//  959  *
//  960  * @return  void
//  961  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  962 void touchLink_SetChannel( uint8 channel )
touchLink_SetChannel:
          CFI Block cfiBlock24 Using cfiCommon0
          CFI Function touchLink_SetChannel
        CODE
//  963 {
        FUNCALL touchLink_SetChannel, bdb_setChannel
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SetChannel, ZMacSetReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 1
        MOV       A,#-0x1
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 13)
        MOV       A,R1
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,?XSP + 0
        MOV       DPH,?XSP + 1
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
//  964   bdb_setChannel( (uint32) ( 1L << channel ) );
        ; Setup parameters for call to function bdb_setChannel
        MOV       ?V0,#0x1
        MOV       ?V1,#0x0
        MOV       ?V2,#0x0
        MOV       ?V3,#0x0
        MOV       DPL,?XSP + 0
        MOV       DPH,?XSP + 1
        MOVX      A,@DPTR
        MOV       R0,#?V0
        LCALL     ?L_SHL
        MOV       R2,?V0
        MOV       R3,?V1
        MOV       R4,?V2
        MOV       R5,?V3
        LCALL     `??bdb_setChannel::?relay`; Banked call to: bdb_setChannel
//  965 
//  966   // Set the new channel
//  967   ZMacSetReq( ZMacChannel, &channel );
        ; Setup parameters for call to function ZMacSetReq
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        MOV       R1,#-0x1f
        LCALL     `??ZMacSetReq::?relay`; Banked call to: ZMacSetReq
        MOV       A,R1
//  968 }
        MOV       A,#0x1
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock24
//  969 
//  970 /*********************************************************************
//  971  * @fn      touchLink_SendDeviceInfoRsp
//  972  *
//  973  * @brief   Send out a Device Information Response command.
//  974  *
//  975  * @param   srcEP - sender's endpoint
//  976  * @param   dstAddr - destination address
//  977  * @param   startIndex - start index
//  978  * @param   transID - received transaction id
//  979  * @param   seqNum - received sequence number
//  980  *
//  981  * @return  ZStatus_t
//  982  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
//  983 uint8 touchLink_SendDeviceInfoRsp( uint8 srcEP, afAddrType_t *dstAddr, uint8 startIndex,
touchLink_SendDeviceInfoRsp:
          CFI Block cfiBlock25 Using cfiCommon0
          CFI Function touchLink_SendDeviceInfoRsp
        CODE
//  984                              uint32 transID, uint8 seqNum )
//  985 {
        FUNCALL touchLink_SendDeviceInfoRsp, touchLink_GetNumSubDevices
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, touchLink_GetNumSubDevices
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, NLME_GetExtAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, sAddrExtCpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, touchLink_GetSubDeviceInfo
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, bdbTL_Send_DeviceInfoRsp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 25, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 25, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendDeviceInfoRsp, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V10
        REQUIRE ?V11
        REQUIRE ?V12
        REQUIRE ?V13
        REQUIRE ?V14
        REQUIRE ?V15
        MOV       A,#-0x18
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 0
        MOV       ?V3,R1
        MOV       ?V10,R2
        MOV       ?V11,R3
        MOV       ?V2,R4
        MOV       ?V8,R5
        MOV       A,#0x18
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V4
        LCALL     ?L_MOV_X
        MOV       ?V12,?V4
        MOV       ?V13,?V5
        MOV       ?V14,?V6
        MOV       ?V15,?V7
//  986   bdbTLDeviceInfoRsp_t *pRsp;
//  987   uint8 cnt;
//  988   uint8 rspLen;
//  989   uint8 status = ZSuccess;
        MOV       ?V0,#0x0
//  990 
//  991   cnt = touchLink_GetNumSubDevices( startIndex );
        ; Setup parameters for call to function touchLink_GetNumSubDevices
        MOV       R1,?V2
        LCALL     `??touchLink_GetNumSubDevices::?relay`; Banked call to: touchLink_GetNumSubDevices
        MOV       A,R1
        MOV       ?V1,A
//  992   if ( cnt > TOUCHLINK_DEVICE_INFO_RSP_REC_COUNT_MAX )
        MOV       A,?V1
        CLR       C
        SUBB      A,#0x6
        JC        ??touchLink_SendDeviceInfoRsp_0
//  993   {
//  994     cnt = TOUCHLINK_DEVICE_INFO_RSP_REC_COUNT_MAX; // should be between 0x00-0x05
        MOV       ?V1,#0x5
//  995   }
//  996 
//  997   rspLen = sizeof( bdbTLDeviceInfoRsp_t ) + ( cnt * sizeof( devInfoRec_t ) );
??touchLink_SendDeviceInfoRsp_0:
        MOV       B,#0x10
        MOV       A,?V1
        MUL       AB
        ADD       A,#0x17
        MOV       ?V6,A
//  998 
//  999   pRsp = (bdbTLDeviceInfoRsp_t *)osal_mem_alloc( rspLen );
        ; Setup parameters for call to function osal_mem_alloc
        MOV       A,?V6
        MOV       R2,A
        MOV       R3,#0x0
        LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
        MOV       ?V4,R2
        MOV       ?V5,R3
        MOV       R6,?V4
        MOV       R7,?V5
// 1000   if ( pRsp )
        MOV       A,R6
        ORL       A,R7
        JNZ       $+5
        LJMP      ??touchLink_SendDeviceInfoRsp_1 & 0xFFFF
// 1001   {
// 1002     pRsp->transID = transID;
        MOV       DPL,R6
        MOV       DPH,R7
        MOV       R0,#?V12
        LCALL     ?L_MOV_TO_X
// 1003 
// 1004     pRsp->numSubDevices = touchLink_GetNumSubDevices( 0 );
        ; Setup parameters for call to function touchLink_GetNumSubDevices
        MOV       R1,#0x0
        LCALL     `??touchLink_GetNumSubDevices::?relay`; Banked call to: touchLink_GetNumSubDevices
        MOV       A,R1
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1005     pRsp->startIndex = startIndex;
        MOV       A,?V2
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1006     pRsp->cnt = cnt;
        MOV       A,?V1
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1007 
// 1008     for ( uint8 i = 0; i < cnt; i++ )
        MOV       ?V7,#0x0
??touchLink_SendDeviceInfoRsp_2:
        MOV       A,?V7
        CLR       C
        SUBB      A,?V1
        JNC       ??touchLink_SendDeviceInfoRsp_3
// 1009     {
// 1010       devInfoRec_t *pRec = &(pRsp->devInfoRec[i]);
        MOV       A,?V7
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R0
        MOV       B,#0x10
        MUL       AB
        XCH       A,R0
        MOV       R2,B
        MOV       B,#0x0
        MUL       AB
        ADD       A,R2
        MOV       R2,A
        MOV       B,#0x10
        MOV       A,R1
        MUL       AB
        ADD       A,R2
        MOV       R1,A
        MOV       A,R6
        ADD       A,R0
        MOV       R0,A
        MOV       A,R7
        ADDC      A,R1
        MOV       R1,A
        MOV       A,R0
        ADD       A,#0x7
        MOV       ?V4,A
        CLR       A
        ADDC      A,R1
        MOV       ?V5,A
// 1011 
// 1012       osal_cpyExtAddr( pRec->ieeeAddr, NLME_GetExtAddr() );
        ; Setup parameters for call to function sAddrExtCpy
        ; Setup parameters for call to function NLME_GetExtAddr
        LCALL     `??NLME_GetExtAddr::?relay`; Banked call to: NLME_GetExtAddr
        MOV       A,R2
        MOV       R4,A
        MOV       A,R3
        MOV       R5,A
        MOV       R2,?V4
        MOV       R3,?V5
        LCALL     `??sAddrExtCpy::?relay`; Banked call to: sAddrExtCpy
// 1013 
// 1014       touchLink_GetSubDeviceInfo( startIndex + i, &(pRec->deviceInfo) );
        ; Setup parameters for call to function touchLink_GetSubDeviceInfo
        MOV       A,?V4
        ADD       A,#0x8
        MOV       R2,A
        CLR       A
        ADDC      A,?V5
        MOV       R3,A
        MOV       A,?V2
        ADD       A,?V7
        MOV       R1,A
        LCALL     `??touchLink_GetSubDeviceInfo::?relay`; Banked call to: touchLink_GetSubDeviceInfo
// 1015 
// 1016       pRec->sort = 0;
        MOV       A,?V4
        ADD       A,#0xf
        MOV       DPL,A
        CLR       A
        ADDC      A,?V5
        MOV       DPH,A
        MOV       A,#0x0
        MOVX      @DPTR,A
// 1017     }
        INC       ?V7
        SJMP      ??touchLink_SendDeviceInfoRsp_2
// 1018 
// 1019     // Send a response back
// 1020     status = bdbTL_Send_DeviceInfoRsp( srcEP, dstAddr, pRsp, seqNum );
??touchLink_SendDeviceInfoRsp_3:
        ; Setup parameters for call to function bdbTL_Send_DeviceInfoRsp
        MOV       A,?V8
        MOV       ?V4,A
        MOV       R0,#?V4
        LCALL     ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 25)
        MOV       A,R6
        MOV       R4,A
        MOV       A,R7
        MOV       R5,A
        MOV       R2,?V10
        MOV       R3,?V11
        MOV       R1,?V3
        LCALL     `??bdbTL_Send_DeviceInfoRsp::?relay`; Banked call to: bdbTL_Send_DeviceInfoRsp
        MOV       A,#0x1
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV       A,R1
        MOV       ?V0,A
// 1021 
// 1022     osal_mem_free( pRsp );
        ; Setup parameters for call to function osal_mem_free
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
        SJMP      ??touchLink_SendDeviceInfoRsp_4
// 1023   }
// 1024   else
// 1025   {
// 1026     status = ZMemError;
??touchLink_SendDeviceInfoRsp_1:
        MOV       ?V0,#0x10
// 1027   }
// 1028 
// 1029   return ( status );
??touchLink_SendDeviceInfoRsp_4:
        MOV       R1,?V0
        MOV       R7,#0x10
        LJMP      ?BANKED_LEAVE_XDATA
// 1030 }
          CFI EndBlock cfiBlock25
// 1031 
// 1032 /*********************************************************************
// 1033  * @fn      touchLink_SendLeaveReq
// 1034  *
// 1035  * @brief   Send out a Leave Request command.
// 1036  *
// 1037  * @param   void
// 1038  *
// 1039  * @return  ZStatus_t
// 1040  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1041 ZStatus_t touchLink_SendLeaveReq( void )
touchLink_SendLeaveReq:
          CFI Block cfiBlock26 Using cfiCommon0
          CFI Function touchLink_SendLeaveReq
        CODE
// 1042 {
        FUNCALL touchLink_SendLeaveReq, osal_memset
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 5, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 5, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SendLeaveReq, NLME_LeaveReq
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 5, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 5, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 5
        MOV       A,#-0x5
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 5)
// 1043   NLME_LeaveReq_t leaveReq;
// 1044   
// 1045   // Set every field to 0
// 1046   osal_memset( &leaveReq, 0, sizeof( NLME_LeaveReq_t ) );
        ; Setup parameters for call to function osal_memset
        MOV       R4,#0x5
        MOV       R5,#0x0
        MOV       R1,#0x0
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
// 1047   
// 1048   // Send out our leave
// 1049   return ( NLME_LeaveReq( &leaveReq ) );
        ; Setup parameters for call to function NLME_LeaveReq
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        LCALL     `??NLME_LeaveReq::?relay`; Banked call to: NLME_LeaveReq
        MOV       A,#0x5
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 XSP16+0
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
// 1050 }
          CFI EndBlock cfiBlock26
// 1051 
// 1052 /*********************************************************************
// 1053  * @fn      touchLink_GetMsgRssi
// 1054  *
// 1055  * @brief   Get the RSSI of the message just received through a ZCL callback.
// 1056  *
// 1057  * @param   none
// 1058  *
// 1059  * @return  RSSI if AF message was received, TOUCHLINK_WORST_RSSI otherwise.
// 1060  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1061 int8 touchLink_GetMsgRssi( void )
touchLink_GetMsgRssi:
          CFI Block cfiBlock27 Using cfiCommon0
          CFI Function touchLink_GetMsgRssi
        CODE
// 1062 {
        FUNCALL touchLink_GetMsgRssi, zcl_getRawAFMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        MOV       A,#-0xa
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
// 1063   afIncomingMSGPacket_t *pAF = zcl_getRawAFMsg();
        ; Setup parameters for call to function zcl_getRawAFMsg
        LCALL     `??zcl_getRawAFMsg::?relay`; Banked call to: zcl_getRawAFMsg
        MOV       ?V0,R2
        MOV       ?V1,R3
        MOV       R2,?V0
        MOV       R3,?V1
// 1064 
// 1065   if ( pAF != NULL )
        MOV       A,R2
        ORL       A,R3
        JZ        ??touchLink_GetMsgRssi_0
// 1066   {
// 1067     return ( pAF->rssi );
        MOV       A,R2
        ADD       A,#0x18
        MOV       DPL,A
        CLR       A
        ADDC      A,R3
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R1,A
        SJMP      ??touchLink_GetMsgRssi_1
// 1068   }
// 1069 
// 1070   return ( TOUCHLINK_WORST_RSSI );
??touchLink_GetMsgRssi_0:
        MOV       R1,#-0x46
??touchLink_GetMsgRssi_1:
        MOV       R7,#0x2
        LJMP      ?BANKED_LEAVE_XDATA
// 1071 }
          CFI EndBlock cfiBlock27
// 1072 
// 1073 /*********************************************************************
// 1074  * @fn      touchLink_NewNwkUpdateId
// 1075  *
// 1076  * @brief   Determine the new network update id. The nwkUpdateId attribute
// 1077  *          can take the value of 0x00 - 0xff and may wrap around so care
// 1078  *          must be taken when comparing for newness.
// 1079  *
// 1080  * @param   ID1 - first nwk update id
// 1081  * @param   ID2 - second nwk update id
// 1082  *
// 1083  * @return  new nwk update ID
// 1084  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1085 uint8 touchLink_NewNwkUpdateId( uint8 ID1, uint8 ID2 )
touchLink_NewNwkUpdateId:
          CFI Block cfiBlock28 Using cfiCommon0
          CFI Function touchLink_NewNwkUpdateId
        CODE
// 1086 {
        ; Saved register size: 0
        ; Auto size: 0
        MOV       A,R1
        MOV       R3,A
// 1087   if ( ( (ID1 >= ID2) && ((ID1 - ID2) > 200) )
// 1088       || ( (ID1 < ID2) && ((ID2 - ID1) > 200) ) )
        MOV       A,R3
        CLR       C
        SUBB      A,R2
        JC        ??touchLink_NewNwkUpdateId_0
        MOV       A,R3
        MOV       R4,A
        MOV       R5,#0x0
        MOV       A,R2
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R4
        CLR       C
        SUBB      A,R0
        MOV       R0,A
        MOV       A,R5
        SUBB      A,R1
        MOV       R1,A
        CLR       C
        MOV       A,R0
        SUBB      A,#-0x37
        MOV       A,R1
        SUBB      A,#0x0
        MOV       C,0xD0 /* PSW */.2
        XRL       A,PSW
        RLC       A
        JNC       ??touchLink_NewNwkUpdateId_1
??touchLink_NewNwkUpdateId_0:
        MOV       A,R3
        CLR       C
        SUBB      A,R2
        JNC       ??touchLink_NewNwkUpdateId_2
        MOV       A,R2
        MOV       R4,A
        MOV       R5,#0x0
        MOV       A,R3
        MOV       R0,A
        MOV       R1,#0x0
        MOV       A,R4
        CLR       C
        SUBB      A,R0
        MOV       R0,A
        MOV       A,R5
        SUBB      A,R1
        MOV       R1,A
        CLR       C
        MOV       A,R0
        SUBB      A,#-0x37
        MOV       A,R1
        SUBB      A,#0x0
        MOV       C,0xD0 /* PSW */.2
        XRL       A,PSW
        RLC       A
        JC        ??touchLink_NewNwkUpdateId_2
// 1089   {
// 1090     return ( MIN( ID1, ID2 ) );
??touchLink_NewNwkUpdateId_1:
        MOV       A,R3
        CLR       C
        SUBB      A,R2
        JNC       ??touchLink_NewNwkUpdateId_3
        MOV       A,R3
        MOV       R0,A
        SJMP      ??touchLink_NewNwkUpdateId_4
??touchLink_NewNwkUpdateId_3:
        MOV       A,R2
        MOV       R0,A
??touchLink_NewNwkUpdateId_4:
        MOV       A,R0
        MOV       R1,A
        SJMP      ??touchLink_NewNwkUpdateId_5
// 1091   }
// 1092 
// 1093   return ( MAX( ID1, ID2 ) );
??touchLink_NewNwkUpdateId_2:
        MOV       A,R3
        CLR       C
        SUBB      A,R2
        JNC       ??touchLink_NewNwkUpdateId_6
        MOV       A,R2
        MOV       R1,A
        SJMP      ??touchLink_NewNwkUpdateId_5
??touchLink_NewNwkUpdateId_6:
        MOV       A,R3
        MOV       R1,A
??touchLink_NewNwkUpdateId_5:
        LJMP      ?BRET
// 1094 }
          CFI EndBlock cfiBlock28
// 1095 
// 1096 /*********************************************************************
// 1097  * @fn      touchLink_SetTouchLinkTaskId
// 1098  *
// 1099  * @brief   Register Target/Initiator taskID for commissioning events
// 1100  *
// 1101  * @param   taskID
// 1102  *
// 1103  * @return  none
// 1104  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1105 void touchLink_SetTouchLinkTaskId( uint8 taskID )
touchLink_SetTouchLinkTaskId:
          CFI Block cfiBlock29 Using cfiCommon0
          CFI Function touchLink_SetTouchLinkTaskId
        CODE
// 1106 {
        FUNCALL touchLink_SetTouchLinkTaskId, bdb_RegisterSimpleDescriptor
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_SetTouchLinkTaskId, StubAPS_RegisterApp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV       A,#-0x9
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV       A,R1
        MOV       R6,A
// 1107   touchLinkTaskId = taskID;
        MOV       A,R6
        MOV       DPTR,#touchLinkTaskId
        MOVX      @DPTR,A
// 1108 
// 1109   // register internal EP for TOUCHLINK messages
// 1110   bdb_RegisterSimpleDescriptor( &touchLink_EP_SimpleDesc );
        ; Setup parameters for call to function bdb_RegisterSimpleDescriptor
        MOV       R2,#touchLink_EP_SimpleDesc & 0xff
        MOV       R3,#(touchLink_EP_SimpleDesc >> 8) & 0xff
        LCALL     `??bdb_RegisterSimpleDescriptor::?relay`; Banked call to: bdb_RegisterSimpleDescriptor
// 1111 
// 1112 #if defined( INTER_PAN )
// 1113   // Register with Stub APS
// 1114   StubAPS_RegisterApp( &touchLink_EP );
        ; Setup parameters for call to function StubAPS_RegisterApp
        MOV       R2,#touchLink_EP & 0xff
        MOV       R3,#(touchLink_EP >> 8) & 0xff
        LCALL     `??StubAPS_RegisterApp::?relay`; Banked call to: StubAPS_RegisterApp
// 1115 #endif // INTER_PAN
// 1116 }
        MOV       R7,#0x1
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock29
// 1117 
// 1118 /*********************************************************************
// 1119  * @fn      touchLink_PerformNetworkDisc
// 1120  *
// 1121  * @brief   Perform a Network Discovery scan.
// 1122  *          Scan results will be stored locally to analyze.
// 1123  *
// 1124  * @param   scanChannelList - channels to perform discovery scan
// 1125  *
// 1126  * @return  void
// 1127  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1128 void touchLink_PerformNetworkDisc( uint32 scanChannelList )
touchLink_PerformNetworkDisc:
          CFI Block cfiBlock30 Using cfiCommon0
          CFI Function touchLink_PerformNetworkDisc
        CODE
// 1129 {
        FUNCALL touchLink_PerformNetworkDisc, NLME_NwkDiscReq2
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_PerformNetworkDisc, ZDO_RegisterForZdoCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_PerformNetworkDisc, ZDO_RegisterForZdoCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_PerformNetworkDisc, NLME_NwkDiscTerm
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 7
        MOV       A,#-0x7
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 19)
        MOV       ?V0,R2
        MOV       ?V1,R3
        MOV       ?V2,R4
        MOV       ?V3,R5
// 1130   NLME_ScanFields_t scan;
// 1131 
// 1132   scan.channels = scanChannelList;
        MOV       DPL,?XSP + 0
        MOV       DPH,?XSP + 1
        MOV       R0,#?V0
        LCALL     ?L_MOV_TO_X
// 1133   scan.duration = BEACON_ORDER_240_MSEC;
        MOV       A,#0x4
        LCALL     ?XSTACK_DISP0_8
        MOV       A,#0x4
        MOVX      @DPTR,A
// 1134   scan.scanType = ZMAC_ACTIVE_SCAN;
        MOV       A,#0x5
        LCALL     ?XSTACK_DISP0_8
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1135   scan.scanApp  = NLME_DISC_SCAN;
        MOV       A,#0x6
        LCALL     ?XSTACK_DISP0_8
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1136 
// 1137   if ( NLME_NwkDiscReq2( &scan ) == ZSuccess )
        ; Setup parameters for call to function NLME_NwkDiscReq2
        MOV       R2,?XSP + 0
        MOV       R3,?XSP + 1
        LCALL     `??NLME_NwkDiscReq2::?relay`; Banked call to: NLME_NwkDiscReq2
        MOV       A,R1
        JNZ       ??touchLink_PerformNetworkDisc_0
// 1138   {
// 1139     // Register ZDO callback to handle the network discovery confirm and
// 1140     // beacon notification confirm
// 1141     ZDO_RegisterForZdoCB( ZDO_NWK_DISCOVERY_CNF_CBID, touchLink_NwkDiscoveryCnfCB );
        ; Setup parameters for call to function ZDO_RegisterForZdoCB
        MOV       R2,#`??touchLink_NwkDiscoveryCnfCB::?relay` & 0xff
        MOV       R3,#(`??touchLink_NwkDiscoveryCnfCB::?relay` >> 8) & 0xff
        MOV       R1,#0x2
        LCALL     `??ZDO_RegisterForZdoCB::?relay`; Banked call to: ZDO_RegisterForZdoCB
        MOV       A,R1
// 1142     ZDO_RegisterForZdoCB( ZDO_BEACON_NOTIFY_IND_CBID, touchLink_BeaconIndCB );
        ; Setup parameters for call to function ZDO_RegisterForZdoCB
        MOV       R2,#`??touchLink_BeaconIndCB::?relay` & 0xff
        MOV       R3,#(`??touchLink_BeaconIndCB::?relay` >> 8) & 0xff
        MOV       R1,#0x3
        LCALL     `??ZDO_RegisterForZdoCB::?relay`; Banked call to: ZDO_RegisterForZdoCB
        MOV       A,R1
        SJMP      ??touchLink_PerformNetworkDisc_1
// 1143   }
// 1144   else
// 1145   {
// 1146     NLME_NwkDiscTerm();
??touchLink_PerformNetworkDisc_0:
        ; Setup parameters for call to function NLME_NwkDiscTerm
        LCALL     `??NLME_NwkDiscTerm::?relay`; Banked call to: NLME_NwkDiscTerm
// 1147   }
// 1148 }
??touchLink_PerformNetworkDisc_1:
        MOV       A,#0x7
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock30
// 1149 
// 1150 /*********************************************************************
// 1151  * @fn      touchLink_BeaconIndCB
// 1152  *
// 1153  * @brief   Process the incoming beacon indication.
// 1154  *
// 1155  * @param   param -  pointer to a parameter and a structure of parameters
// 1156  *
// 1157  * @return  void
// 1158  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1159 static void *touchLink_BeaconIndCB ( void *param )
touchLink_BeaconIndCB:
          CFI Block cfiBlock31 Using cfiCommon0
          CFI Function touchLink_BeaconIndCB
        CODE
// 1160 {
        FUNCALL touchLink_BeaconIndCB, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_BeaconIndCB, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_BeaconIndCB, sAddrExtCpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_BeaconIndCB, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        REQUIRE ?V8
        REQUIRE ?V9
        MOV       A,#-0x12
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 0
        MOV       ?V6,R2
        MOV       ?V7,R3
// 1161   NLME_beaconInd_t *pBeacon = param;
        MOV       ?V0,?V6
        MOV       ?V1,?V7
// 1162   touchLinkDiscoveredNwkParam_t *pParam = pDiscoveredNwkParamList;
        MOV       DPTR,#pDiscoveredNwkParamList
        MOVX      A,@DPTR
        MOV       R6,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R7,A
// 1163   touchLinkDiscoveredNwkParam_t *pLastParam;
// 1164   uint8 found = FALSE;
        MOV       ?V2,#0x0
// 1165 
// 1166 
// 1167   // Add the network parameter to the Network Parameter List
// 1168   while ( pParam != NULL )
??touchLink_BeaconIndCB_0:
        MOV       A,R6
        ORL       A,R7
        JZ        ??touchLink_BeaconIndCB_1
// 1169   {
// 1170     if ( ( pParam->PANID == pBeacon->panID ) &&
// 1171         ( pParam->logicalChannel == pBeacon->logicalChannel ) )
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        XRL       A,R0
        JNZ       ??touchLink_BeaconIndCB_2
        INC       DPTR
        MOVX      A,@DPTR
        XRL       A,R1
??touchLink_BeaconIndCB_2:
        JNZ       ??touchLink_BeaconIndCB_3
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R0,A
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        XRL       A,R0
        JNZ       ??touchLink_BeaconIndCB_3
// 1172     {
// 1173       found = TRUE;
        MOV       ?V2,#0x1
// 1174       break;
        SJMP      ??touchLink_BeaconIndCB_1
// 1175     }
// 1176     
// 1177     pLastParam = pParam;
??touchLink_BeaconIndCB_3:
        MOV       ?V4,R6
        MOV       ?V5,R7
// 1178     pParam = pParam->nextParam;
        MOV       DPL,R6
        MOV       DPH,R7
        MOVX      A,@DPTR
        MOV       R6,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R7,A
        SJMP      ??touchLink_BeaconIndCB_0
// 1179   }
// 1180   
// 1181   // If no existing parameter found, make a new one and add to the list
// 1182   if ( found == FALSE )
??touchLink_BeaconIndCB_1:
        MOV       A,?V2
        JNZ       ??touchLink_BeaconIndCB_4
// 1183   {
// 1184     pParam = osal_mem_alloc( sizeof( touchLinkDiscoveredNwkParam_t ) );
        ; Setup parameters for call to function osal_mem_alloc
        MOV       R2,#0x13
        MOV       R3,#0x0
        LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
        MOV       ?V8,R2
        MOV       ?V9,R3
        MOV       R6,?V8
        MOV       R7,?V9
// 1185     if ( pParam == NULL )
        MOV       A,R6
        ORL       A,R7
        JNZ       ??touchLink_BeaconIndCB_5
// 1186     {
// 1187       // Memory alloc failed, discard this beacon
// 1188       return ( NULL );
        MOV       R2,#0x0
        MOV       R3,#0x0
        LJMP      ??touchLink_BeaconIndCB_6 & 0xFFFF
// 1189     }
// 1190     
// 1191     // Clear the network descriptor
// 1192     osal_memset( pParam, 0, sizeof( touchLinkDiscoveredNwkParam_t )  );
??touchLink_BeaconIndCB_5:
        ; Setup parameters for call to function osal_memset
        MOV       R4,#0x13
        MOV       R5,#0x0
        MOV       R1,#0x0
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
// 1193     
// 1194     // Initialize the descriptor
// 1195     pParam->chosenRouter = INVALID_NODE_ADDR;
        MOV       A,R6
        ADD       A,#0xd
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOV       A,#-0x2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#-0x1
        MOVX      @DPTR,A
// 1196     pParam->chosenRouterDepth = 0xFF;
        MOV       A,R6
        ADD       A,#0x10
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOV       A,#-0x1
        MOVX      @DPTR,A
// 1197     
// 1198     // Save new entry into the descriptor list
// 1199     if ( pDiscoveredNwkParamList == NULL )
        MOV       DPTR,#pDiscoveredNwkParamList
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JNZ       ??touchLink_BeaconIndCB_7
// 1200     {
// 1201       // First element in the list
// 1202       pDiscoveredNwkParamList = pParam;
        MOV       DPTR,#pDiscoveredNwkParamList
        MOV       A,R6
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R7
        MOVX      @DPTR,A
        SJMP      ??touchLink_BeaconIndCB_4
// 1203     }
// 1204     else
// 1205     {
// 1206       // Last element in the list
// 1207       pLastParam->nextParam = pParam;
??touchLink_BeaconIndCB_7:
        MOV       DPL,?V4
        MOV       DPH,?V5
        MOV       A,R6
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R7
        MOVX      @DPTR,A
// 1208     }
// 1209   }
// 1210   
// 1211   // Update the descriptor with the incoming beacon
// 1212   pParam->logicalChannel = pBeacon->logicalChannel;
??touchLink_BeaconIndCB_4:
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1213   pParam->PANID          = pBeacon->panID;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
// 1214   
// 1215   // Save the extended PAN ID from the beacon payload only if 1.1 version network
// 1216   if ( pBeacon->protocolVersion != ZB_PROT_V1_0 )
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        XRL       A,#0x1
        JZ        ??touchLink_BeaconIndCB_8
// 1217   {
// 1218     osal_cpyExtAddr( pParam->extendedPANID, pBeacon->extendedPanID );
        ; Setup parameters for call to function sAddrExtCpy
        MOV       A,?V0
        ADD       A,#0xd
        MOV       R4,A
        CLR       A
        ADDC      A,?V1
        MOV       R5,A
        MOV       A,R6
        ADD       A,#0x5
        MOV       R2,A
        CLR       A
        ADDC      A,R7
        MOV       R3,A
        LCALL     `??sAddrExtCpy::?relay`; Banked call to: sAddrExtCpy
        SJMP      ??touchLink_BeaconIndCB_9
// 1219   }
// 1220   else
// 1221   {
// 1222     osal_memset( pParam->extendedPANID, 0xFF, Z_EXTADDR_LEN );
??touchLink_BeaconIndCB_8:
        ; Setup parameters for call to function osal_memset
        MOV       R4,#0x8
        MOV       R5,#0x0
        MOV       R1,#-0x1
        MOV       A,R6
        ADD       A,#0x5
        MOV       R2,A
        CLR       A
        ADDC      A,R7
        MOV       R3,A
        LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
// 1223   }
// 1224   
// 1225   // check if this device is a better choice to join...
// 1226   // ...dont bother checking assocPermit flag is doing a rejoin
// 1227   if ( pBeacon->LQI > gMIN_TREE_LQI )
??touchLink_BeaconIndCB_9:
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R0,A
        MOV       DPTR,#gMIN_TREE_LQI
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R0
        JC        $+5
        LJMP      ??touchLink_BeaconIndCB_10 & 0xFFFF
// 1228   {
// 1229     uint8 selected = FALSE;
        MOV       R0,#0x0
// 1230     uint8 capacity = FALSE;
        MOV       R1,#0x0
// 1231     
// 1232     if ( _NIB.spare3 == ZIGBEEPRO )
        MOV       DPTR,#_NIB + 96
        MOVX      A,@DPTR
        XRL       A,#0x1
        JNZ       ??touchLink_BeaconIndCB_11
// 1233     {
// 1234       if ( ((pBeacon->LQI   > pParam->chosenRouterLinkQuality) &&
// 1235             (pBeacon->depth < MAX_NODE_DEPTH)) ||
// 1236           ((pBeacon->LQI   == pParam->chosenRouterLinkQuality) &&
// 1237            (pBeacon->depth < pParam->chosenRouterDepth)) )
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R2,A
        MOV       A,R6
        ADD       A,#0xf
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R2
        JNC       ??touchLink_BeaconIndCB_12
        MOV       A,?V0
        ADD       A,#0xb
        MOV       DPL,A
        CLR       A
        ADDC      A,?V1
        MOV       DPH,A
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,#0x14
        JC        ??touchLink_BeaconIndCB_13
??touchLink_BeaconIndCB_12:
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R2,A
        MOV       A,R6
        ADD       A,#0xf
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        XRL       A,R2
        JNZ       ??touchLink_BeaconIndCB_14
        MOV       A,R6
        ADD       A,#0x10
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R2,A
        MOV       A,?V0
        ADD       A,#0xb
        MOV       DPL,A
        CLR       A
        ADDC      A,?V1
        MOV       DPH,A
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R2
        JNC       ??touchLink_BeaconIndCB_14
// 1238       {
// 1239         selected = TRUE;
??touchLink_BeaconIndCB_13:
        MOV       R0,#0x1
        SJMP      ??touchLink_BeaconIndCB_14
// 1240       }
// 1241     }
// 1242     else
// 1243     {
// 1244       if ( pBeacon->depth < pParam->chosenRouterDepth )
??touchLink_BeaconIndCB_11:
        MOV       A,R6
        ADD       A,#0x10
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R2,A
        MOV       A,?V0
        ADD       A,#0xb
        MOV       DPL,A
        CLR       A
        ADDC      A,?V1
        MOV       DPH,A
        MOVX      A,@DPTR
        CLR       C
        SUBB      A,R2
        JNC       ??touchLink_BeaconIndCB_14
// 1245       {
// 1246         selected = TRUE;
        MOV       R0,#0x1
// 1247       }
// 1248     }
// 1249     
// 1250     capacity = pBeacon->routerCapacity;
??touchLink_BeaconIndCB_14:
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
// 1251     
// 1252     if ( (capacity) && (selected) )
        MOV       A,R1
        JZ        ??touchLink_BeaconIndCB_15
        MOV       A,R0
        JZ        ??touchLink_BeaconIndCB_15
// 1253     {
// 1254       // this is the new chosen router for joining...
// 1255       pParam->chosenRouter            = pBeacon->sourceAddr;
        MOV       DPL,?V0
        MOV       DPH,?V1
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       A,R6
        ADD       A,#0xd
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOV       A,R2
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R3
        MOVX      @DPTR,A
// 1256       pParam->chosenRouterLinkQuality = pBeacon->LQI;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R6
        ADD       A,#0xf
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1257       pParam->chosenRouterDepth       = pBeacon->depth;
        MOV       A,?V0
        ADD       A,#0xb
        MOV       DPL,A
        CLR       A
        ADDC      A,?V1
        MOV       DPH,A
        MOVX      A,@DPTR
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,R6
        ADD       A,#0x10
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1258     }
// 1259     
// 1260     if ( pBeacon->deviceCapacity )
??touchLink_BeaconIndCB_15:
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        JZ        ??touchLink_BeaconIndCB_16
// 1261       pParam->deviceCapacity = 1;
        MOV       A,R6
        ADD       A,#0x12
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1262     
// 1263     if ( pBeacon->routerCapacity )
??touchLink_BeaconIndCB_16:
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        JZ        ??touchLink_BeaconIndCB_10
// 1264       pParam->routerCapacity = 1;
        MOV       A,R6
        ADD       A,#0x11
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1265   }
// 1266     
// 1267   return ( NULL );
??touchLink_BeaconIndCB_10:
        MOV       R2,#0x0
        MOV       R3,#0x0
??touchLink_BeaconIndCB_6:
        MOV       R7,#0xa
        LJMP      ?BANKED_LEAVE_XDATA
// 1268 }
          CFI EndBlock cfiBlock31
// 1269 
// 1270 /*********************************************************************
// 1271  * @fn      touchLink_NwkDiscoveryCnfCB
// 1272  *
// 1273  * @brief   Send an event to inform the target the completion of
// 1274  *          network discovery scan
// 1275  *
// 1276  * @param   param - pointer to a parameter and a structure of parameters
// 1277  *
// 1278  * @return  void
// 1279  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1280 static void *touchLink_NwkDiscoveryCnfCB ( void *param )
touchLink_NwkDiscoveryCnfCB:
          CFI Block cfiBlock32 Using cfiCommon0
          CFI Function touchLink_NwkDiscoveryCnfCB
        CODE
// 1281 {
        FUNCALL touchLink_NwkDiscoveryCnfCB, ZDO_DeregisterForZdoCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_NwkDiscoveryCnfCB, ZDO_DeregisterForZdoCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_NwkDiscoveryCnfCB, NLME_NwkDiscTerm
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_NwkDiscoveryCnfCB, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_NwkDiscoveryCnfCB, bdb_reportCommissioningState
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_NwkDiscoveryCnfCB, NLME_OrphanStateSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_NwkDiscoveryCnfCB, bdb_ZedAttemptRecoverNwk
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV       A,#-0x9
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
// 1282 #if ( BDB_TOUCHLINK_CAPABILITY_ENABLED == TRUE )
// 1283   // Scan completed. De-register the callbacks with ZDO
// 1284   ZDO_DeregisterForZdoCB( ZDO_NWK_DISCOVERY_CNF_CBID );
        ; Setup parameters for call to function ZDO_DeregisterForZdoCB
        MOV       R1,#0x2
        LCALL     `??ZDO_DeregisterForZdoCB::?relay`; Banked call to: ZDO_DeregisterForZdoCB
        MOV       A,R1
// 1285   ZDO_DeregisterForZdoCB( ZDO_BEACON_NOTIFY_IND_CBID );
        ; Setup parameters for call to function ZDO_DeregisterForZdoCB
        MOV       R1,#0x3
        LCALL     `??ZDO_DeregisterForZdoCB::?relay`; Banked call to: ZDO_DeregisterForZdoCB
        MOV       A,R1
// 1286 
// 1287   NLME_NwkDiscTerm();
        ; Setup parameters for call to function NLME_NwkDiscTerm
        LCALL     `??NLME_NwkDiscTerm::?relay`; Banked call to: NLME_NwkDiscTerm
// 1288 
// 1289   if ( pDiscoveredNwkParamList != NULL )
        MOV       DPTR,#pDiscoveredNwkParamList
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R0
        ORL       A,R1
        JZ        ??touchLink_NwkDiscoveryCnfCB_0
// 1290   {
// 1291     // proceed to join the network, otherwise
// 1292     // Notify our task
// 1293     osal_set_event( touchLinkTaskId, TOUCHLINK_NWK_DISC_CNF_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV       R2,#0x1
        MOV       R3,#0x0
        MOV       DPTR,#touchLinkTaskId
        MOVX      A,@DPTR
        MOV       R1,A
        LCALL     `??osal_set_event::?relay`; Banked call to: osal_set_event
        MOV       A,R1
        SJMP      ??touchLink_NwkDiscoveryCnfCB_1
// 1294   }
// 1295   else
// 1296   {
// 1297     // no suitable network in secondary channel list, then just wait for touchlink
// 1298 #if ( ZSTACK_ROUTER_BUILD )
// 1299     // Try to create a new distributed network
// 1300     osal_set_event( touchLinkTaskId, TOUCHLINK_NWK_DISC_CNF_EVT );
// 1301 #elif ( ZSTACK_END_DEVICE_BUILD )
// 1302     // Notify the BDB state machine 
// 1303     bdbAttributes.bdbCommissioningStatus = BDB_COMMISSIONING_NO_NETWORK;
??touchLink_NwkDiscoveryCnfCB_0:
        MOV       DPTR,#bdbAttributes + 10
        MOV       A,#0x2
        MOVX      @DPTR,A
// 1304     bdb_reportCommissioningState( BDB_COMMISSIONING_STATE_TL, FALSE );
        ; Setup parameters for call to function bdb_reportCommissioningState
        MOV       R2,#0x0
        MOV       R1,#0x2
        LCALL     `??bdb_reportCommissioningState::?relay`; Banked call to: bdb_reportCommissioningState
// 1305     // No parent to join in 
// 1306     bdbCommissioningProcedureState.bdbCommissioningState = BDB_PARENT_LOST;
        MOV       DPTR,#bdbCommissioningProcedureState
        MOV       A,#0x8
        MOVX      @DPTR,A
// 1307     NLME_OrphanStateSet( );
        ; Setup parameters for call to function NLME_OrphanStateSet
        LCALL     `??NLME_OrphanStateSet::?relay`; Banked call to: NLME_OrphanStateSet
// 1308     bdb_ZedAttemptRecoverNwk( );
        ; Setup parameters for call to function bdb_ZedAttemptRecoverNwk
        LCALL     `??bdb_ZedAttemptRecoverNwk::?relay`; Banked call to: bdb_ZedAttemptRecoverNwk
        MOV       A,R1
// 1309 #endif
// 1310   }
// 1311 
// 1312 #else
// 1313   (void)touchLinkTaskId;
// 1314   (void)param;
// 1315 #endif
// 1316   return ( NULL );
??touchLink_NwkDiscoveryCnfCB_1:
        MOV       R2,#0x0
        MOV       R3,#0x0
        MOV       R7,#0x1
        LJMP      ?BANKED_LEAVE_XDATA
// 1317 }
          CFI EndBlock cfiBlock32
// 1318 
// 1319 /****************************************************************************
// 1320  * @fn      touchLink_FreeNwkParamList
// 1321  *
// 1322  * @brief   This function frees any network discovery data.
// 1323  *
// 1324  * @param   none
// 1325  *
// 1326  * @return  none
// 1327  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1328 void touchLink_FreeNwkParamList( void )
touchLink_FreeNwkParamList:
          CFI Block cfiBlock33 Using cfiCommon0
          CFI Function touchLink_FreeNwkParamList
        CODE
// 1329 {
        FUNCALL touchLink_FreeNwkParamList, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        MOV       A,#-0xa
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
// 1330   touchLinkDiscoveredNwkParam_t *pParam = pDiscoveredNwkParamList;
        MOV       DPTR,#pDiscoveredNwkParamList
        MOVX      A,@DPTR
        MOV       R6,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R7,A
// 1331   touchLinkDiscoveredNwkParam_t *pNextParam;
// 1332 
// 1333   // deallocate the pDiscoveredNwkParamList memory
// 1334   while ( pParam != NULL )
??touchLink_FreeNwkParamList_0:
        MOV       A,R6
        ORL       A,R7
        JZ        ??touchLink_FreeNwkParamList_1
// 1335   {
// 1336     pNextParam = pParam->nextParam;
        MOV       DPL,R6
        MOV       DPH,R7
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       ?V0,R0
        MOV       ?V1,R1
// 1337 
// 1338     osal_mem_free( pParam );
        ; Setup parameters for call to function osal_mem_free
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
// 1339 
// 1340     pParam = pNextParam;
        MOV       R0,?V0
        MOV       R1,?V1
        MOV       A,R0
        MOV       R6,A
        MOV       A,R1
        MOV       R7,A
        SJMP      ??touchLink_FreeNwkParamList_0
// 1341   }
// 1342 
// 1343   pDiscoveredNwkParamList = NULL;
??touchLink_FreeNwkParamList_1:
        MOV       DPTR,#pDiscoveredNwkParamList
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
// 1344 }
        MOV       R7,#0x2
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock33
// 1345 
// 1346 /****************************************************************************
// 1347  * @fn      touchLink_IsValidTransID
// 1348  *
// 1349  * @brief   Transaction ID Filter for Touch-Link received commands.
// 1350  *
// 1351  * @param   transID - received transaction ID
// 1352  *
// 1353  * @return  FALSE if not matching current or transaction expired
// 1354  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1355 bool touchLink_IsValidTransID( uint32 transID )
touchLink_IsValidTransID:
          CFI Block cfiBlock34 Using cfiCommon0
          CFI Function touchLink_IsValidTransID
        CODE
// 1356 {
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV       ?V0,R2
        MOV       ?V1,R3
        MOV       ?V2,R4
        MOV       ?V3,R5
// 1357   if ( ( touchLinkTransID == 0 ) || ( ( touchLinkTransID != transID ) && ( touchLinkLastAcceptedTransID != transID ) ) )
        MOV       DPTR,#touchLinkTransID
        LCALL     ?XLOAD_R0123
        MOV       A,R0
        ORL       A,R1
        ORL       A,R2
        ORL       A,R3
        JZ        ??touchLink_IsValidTransID_0
        MOV       DPTR,#touchLinkTransID
        MOV       R0,#?V0
        LCALL     ?L_EQ_X
        JZ        ??touchLink_IsValidTransID_1
        MOV       DPTR,#touchLinkLastAcceptedTransID
        MOV       R0,#?V0
        LCALL     ?L_EQ_X
        JZ        ??touchLink_IsValidTransID_1
// 1358   {
// 1359     return ( FALSE );
??touchLink_IsValidTransID_0:
        MOV       R1,#0x0
        SJMP      ??touchLink_IsValidTransID_2
// 1360   }
// 1361   return ( TRUE );
??touchLink_IsValidTransID_1:
        MOV       R1,#0x1
??touchLink_IsValidTransID_2:
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
// 1362 }
          CFI EndBlock cfiBlock34
// 1363 
// 1364 /*********************************************************************
// 1365  * @fn      touchLink_RouterProcessZDOMsg
// 1366  *
// 1367  * @brief   Process incoming ZDO messages (for routers)
// 1368  *
// 1369  * @param   inMsg - message to process
// 1370  *
// 1371  * @return  none
// 1372  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1373 void touchLink_RouterProcessZDOMsg( zdoIncomingMsg_t *inMsg )
touchLink_RouterProcessZDOMsg:
          CFI Block cfiBlock35 Using cfiCommon0
          CFI Function touchLink_RouterProcessZDOMsg
        CODE
// 1374 {
        FUNCALL touchLink_RouterProcessZDOMsg, ZDO_ParseDeviceAnnce
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, nwkNeighborGetLinkInfo
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, nwkNeighborAdd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, nwkNeighborGetLinkInfo
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, AssocCount
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, NLME_UpdateLinkStatus
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, NLME_PermitJoiningRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_RouterProcessZDOMsg, ZDP_SendData
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV       A,#-0xc
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 12
        MOV       A,#-0xc
        LCALL     ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
// 1375   ZDO_DeviceAnnce_t devAnnce;
// 1376 
// 1377   switch ( inMsg->clusterID )
        MOV       A,R6
        ADD       A,#0xc
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       ?V0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       ?V1,A
        MOV       R0,#?V0
        LCALL     ?US_SWITCH_SPARSE
`?<Jumptable for touchLink_RouterProcessZDOMsg>_0`:
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        2
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        19
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??touchLink_RouterProcessZDOMsg_0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        54
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??touchLink_RouterProcessZDOMsg_1
        DATA
        DATA16
        DATA
        DATA16
        DW        ??touchLink_RouterProcessZDOMsg_2
        CODE
// 1378   {
// 1379     case Device_annce:
// 1380       {
// 1381         // all devices should send link status, including the one sending it
// 1382         ZDO_ParseDeviceAnnce( inMsg, &devAnnce );
??touchLink_RouterProcessZDOMsg_0:
        ; Setup parameters for call to function ZDO_ParseDeviceAnnce
        MOV       A,#0x1
        LCALL     ?XSTACK_DISP102_8
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??ZDO_ParseDeviceAnnce::?relay`; Banked call to: ZDO_ParseDeviceAnnce
// 1383 
// 1384         linkInfo_t *linkInfo;
// 1385 
// 1386         // check if entry exists
// 1387         linkInfo = nwkNeighborGetLinkInfo( devAnnce.nwkAddr, _NIB.nwkPanId );
        ; Setup parameters for call to function nwkNeighborGetLinkInfo
        MOV       DPTR,#_NIB + 33
        MOVX      A,@DPTR
        MOV       R4,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R5,A
        MOV       A,#0x1
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        LCALL     `??nwkNeighborGetLinkInfo::?relay`; Banked call to: nwkNeighborGetLinkInfo
        MOV       ?V2,R2
        MOV       ?V3,R3
        MOV       ?V0,?V2
        MOV       ?V1,?V3
// 1388 
// 1389         // if not, look for a vacant entry to add this node...
// 1390         if ( linkInfo == NULL )
        MOV       A,?V0
        ORL       A,?V1
        JNZ       ??touchLink_RouterProcessZDOMsg_3
// 1391         {
// 1392           nwkNeighborAdd( devAnnce.nwkAddr, _NIB.nwkPanId, DEF_LQI );
        ; Setup parameters for call to function nwkNeighborAdd
        MOV       R1,#-0x56
        MOV       DPTR,#_NIB + 33
        MOVX      A,@DPTR
        MOV       R4,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R5,A
        MOV       A,#0x1
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        LCALL     `??nwkNeighborAdd::?relay`; Banked call to: nwkNeighborAdd
// 1393           linkInfo = nwkNeighborGetLinkInfo( devAnnce.nwkAddr, _NIB.nwkPanId );
        ; Setup parameters for call to function nwkNeighborGetLinkInfo
        MOV       DPTR,#_NIB + 33
        MOVX      A,@DPTR
        MOV       R4,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R5,A
        MOV       A,#0x1
        LCALL     ?XSTACK_DISP0_8
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        LCALL     `??nwkNeighborGetLinkInfo::?relay`; Banked call to: nwkNeighborGetLinkInfo
        MOV       ?V2,R2
        MOV       ?V3,R3
        MOV       ?V0,?V2
        MOV       ?V1,?V3
// 1394           linkInfo->txCost = DEF_LINK_COST;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1395           linkInfo->rxLqi = MIN_LQI_COST_1; 
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        MOV       A,#0xc
        MOVX      @DPTR,A
// 1396   
// 1397           // if we have end device childs, send link status
// 1398           if ( AssocCount(CHILD_RFD, CHILD_RFD_RX_IDLE) > 0 )
        ; Setup parameters for call to function AssocCount
        MOV       R2,#0x2
        MOV       R1,#0x1
        LCALL     `??AssocCount::?relay`; Banked call to: AssocCount
        MOV       ?V2,R2
        MOV       ?V3,R3
        MOV       A,?V2
        ORL       A,?V3
        JZ        ??touchLink_RouterProcessZDOMsg_2
// 1399           {
// 1400             NLME_UpdateLinkStatus();
        ; Setup parameters for call to function NLME_UpdateLinkStatus
        LCALL     `??NLME_UpdateLinkStatus::?relay`; Banked call to: NLME_UpdateLinkStatus
// 1401           }
// 1402         }
// 1403       }
// 1404       break;
??touchLink_RouterProcessZDOMsg_3:
        SJMP      ??touchLink_RouterProcessZDOMsg_2
// 1405 
// 1406     case Mgmt_Permit_Join_req:
// 1407       {
// 1408         uint8 duration = inMsg->asdu[ZDP_MGMT_PERMIT_JOIN_REQ_DURATION];
??touchLink_RouterProcessZDOMsg_1:
        MOV       A,R6
        ADD       A,#0x13
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       DPH,A
        MOV       DPL,R0
        MOVX      A,@DPTR
        MOV       ?V0,A
// 1409         ZStatus_t stat = NLME_PermitJoiningRequest( duration );
        ; Setup parameters for call to function NLME_PermitJoiningRequest
        MOV       R1,?V0
        LCALL     `??NLME_PermitJoiningRequest::?relay`; Banked call to: NLME_PermitJoiningRequest
        MOV       A,R1
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,?XSP + 0
        MOV       DPH,?XSP + 1
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1410         // Send a response if unicast
// 1411         if ( !inMsg->wasBroadcast )
        MOV       A,R6
        ADD       A,#0xb
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        JNZ       ??touchLink_RouterProcessZDOMsg_2
// 1412         {
// 1413           ZDP_MgmtPermitJoinRsp( inMsg->TransSeq, &(inMsg->srcAddr), stat, false );
        ; Setup parameters for call to function ZDP_SendData
        MOV       ?V1,#0x0
        MOV       R0,#?V1
        LCALL     ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 25)
        MOV       A,#0x1
        LCALL     ?XSTACK_DISP100_8
        MOV       ?V2,R0
        MOV       ?V3,R1
        MOV       R0,#?V2
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 27)
        MOV       ?V2,#0x36
        MOV       ?V3,#-0x80
        MOV       R0,#?V2
        LCALL     ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 29)
        MOV       R1,#0x1
        MOV       A,R6
        ADD       A,#0x2
        MOV       R4,A
        CLR       A
        ADDC      A,R7
        MOV       R5,A
        MOV       A,R6
        ADD       A,#0xf
        MOV       R2,A
        CLR       A
        ADDC      A,R7
        MOV       R3,A
        LCALL     `??ZDP_SendData::?relay`; Banked call to: ZDP_SendData
        MOV       A,#0x5
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV       A,R1
// 1414         }
// 1415       }
// 1416       break;
// 1417 
// 1418     default:
// 1419       break;
// 1420   }
// 1421 }
??touchLink_RouterProcessZDOMsg_2:
        MOV       A,#0xc
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV       R7,#0x4
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock35
// 1422 
// 1423 /*********************************************************************
// 1424  * @fn      touchLink_PermitJoin
// 1425  *
// 1426  * @brief   Set the router permit join flag, to allow or deny classical
// 1427  *          commissioning by other ZigBee devices.
// 1428  *
// 1429  * @param   duration - enable up to aplcMaxPermitJoinDuration seconds,
// 1430  *                     0 to disable
// 1431  *
// 1432  * @return  status
// 1433  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1434 ZStatus_t touchLink_PermitJoin( uint8 duration )
touchLink_PermitJoin:
          CFI Block cfiBlock36 Using cfiCommon0
          CFI Function touchLink_PermitJoin
        CODE
// 1435 {
        FUNCALL touchLink_PermitJoin, NLME_PermitJoiningRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV       A,#-0x9
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV       A,R1
        MOV       R6,A
// 1436   if ( duration > APLC_MAX_PERMIT_JOIN_DURATION )
        MOV       A,R6
        CLR       C
        SUBB      A,#0x3d
        JC        ??touchLink_PermitJoin_0
// 1437   {
// 1438     duration = APLC_MAX_PERMIT_JOIN_DURATION;
        MOV       R6,#0x3c
// 1439   }
// 1440   return NLME_PermitJoiningRequest( duration );
??touchLink_PermitJoin_0:
        ; Setup parameters for call to function NLME_PermitJoiningRequest
        MOV       A,R6
        MOV       R1,A
        LCALL     `??NLME_PermitJoiningRequest::?relay`; Banked call to: NLME_PermitJoiningRequest
        MOV       R7,#0x1
        LJMP      ?BANKED_LEAVE_XDATA
// 1441 }
          CFI EndBlock cfiBlock36
// 1442 
// 1443 /*********************************************************************
// 1444  * @fn      targetStartRtr
// 1445  *
// 1446  * @brief   Start operating on the new network.
// 1447  *
// 1448  * @param   pParams - pointer to received network parameters
// 1449  * @param   transID - transaction id
// 1450  *
// 1451  * @return  none
// 1452  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1453 void touchLinkStartRtr( bdbTLNwkParams_t *pParams, uint32 transID )
touchLinkStartRtr:
          CFI Block cfiBlock37 Using cfiCommon0
          CFI Function touchLinkStartRtr
        CODE
// 1454 {
        FUNCALL touchLinkStartRtr, touchLink_SetNIB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLinkStartRtr, touchLink_DecryptNwkKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 21, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 21, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLinkStartRtr, ZDSecMgrUpdateTCAddress
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLinkStartRtr, NLME_PermitJoiningRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLinkStartRtr, touchLink_UpdateNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLinkStartRtr, ZDApp_LeaveCtrlReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLinkStartRtr, ZDOInitDeviceEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        MOV       A,#-0xd
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 13)
        ; Saved register size: 13
        ; Auto size: 0
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
        MOV       A,#0xd
        LCALL     ?XSTACK_DISP0_8
        MOV       R0,#?V0
        LCALL     ?L_MOV_X
// 1455   // Copy the new network parameters to
// 1456   touchLink_SetNIB( NWK_ROUTER, pParams->nwkAddr, pParams->extendedPANID,
// 1457               pParams->logicalChannel, pParams->panId, _NIB.nwkUpdateId );
        ; Setup parameters for call to function touchLink_SetNIB
        MOV       DPTR,#_NIB + 109
        MOVX      A,@DPTR
        MOV       ?V4,A
        MOV       R0,#?V4
        LCALL     ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 14)
        MOV       A,R6
        ADD       A,#0x1a
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        LCALL     ?PUSH_XSTACK8_X_TWO
          CFI CFA_XSP16 add(XSP16, 16)
        MOV       A,R6
        ADD       A,#0x19
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       ?V4,A
        MOV       R0,#?V4
        LCALL     ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 17)
        MOV       A,R6
        MOV       R4,A
        MOV       A,R7
        MOV       R5,A
        MOV       A,R6
        ADD       A,#0x1c
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R2,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R3,A
        MOV       R1,#0x8
        LCALL     `??touchLink_SetNIB::?relay`; Banked call to: touchLink_SetNIB
        MOV       A,#0x4
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 13)
// 1458 
// 1459   // Apply the received network key
// 1460   touchLink_DecryptNwkKey( pParams->nwkKey, pParams->keyIndex, transID, touchLinkResponseID );
        ; Setup parameters for call to function touchLink_DecryptNwkKey
        MOV       DPTR,#touchLinkResponseID
        LCALL     ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 17)
        MOV       R0,#?V0
        LCALL     ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 21)
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R6
        ADD       A,#0x9
        MOV       R2,A
        CLR       A
        ADDC      A,R7
        MOV       R3,A
        LCALL     `??touchLink_DecryptNwkKey::?relay`; Banked call to: touchLink_DecryptNwkKey
        MOV       A,#0x8
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 13)
// 1461 
// 1462   // setting apsTrustCenterAddress to 0xffffffff
// 1463   ZDSecMgrUpdateTCAddress( NULL );
        ; Setup parameters for call to function ZDSecMgrUpdateTCAddress
        MOV       R2,#0x0
        MOV       R3,#0x0
        LCALL     `??ZDSecMgrUpdateTCAddress::?relay`; Banked call to: ZDSecMgrUpdateTCAddress
// 1464 
// 1465   NLME_PermitJoiningRequest(0);
        ; Setup parameters for call to function NLME_PermitJoiningRequest
        MOV       R1,#0x0
        LCALL     `??NLME_PermitJoiningRequest::?relay`; Banked call to: NLME_PermitJoiningRequest
        MOV       A,R1
// 1466   
// 1467   // Touchlink distributed network flag
// 1468   touchlinkDistNwk = TRUE;
        MOV       DPTR,#touchlinkDistNwk
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1469 
// 1470   // Use the new free ranges
// 1471   //touchLink_UpdateFreeRanges( pParams );
// 1472 
// 1473   // Save free ranges
// 1474   touchLink_UpdateNV( TOUCHLINK_UPDATE_NV_RANGES );
        ; Setup parameters for call to function touchLink_UpdateNV
        MOV       R1,#0x2
        LCALL     `??touchLink_UpdateNV::?relay`; Banked call to: touchLink_UpdateNV
// 1475 
// 1476   // In case we're here after a leave
// 1477   touchLinkLeaveInitiated = FALSE;
        MOV       DPTR,#touchLinkLeaveInitiated
        MOV       A,#0x0
        MOVX      @DPTR,A
// 1478 
// 1479   // Clear leave control logic
// 1480   ZDApp_LeaveCtrlReset();
        ; Setup parameters for call to function ZDApp_LeaveCtrlReset
        LCALL     `??ZDApp_LeaveCtrlReset::?relay`; Banked call to: ZDApp_LeaveCtrlReset
// 1481 
// 1482   // Start operating on the new network
// 1483   ZDOInitDeviceEx( 0, 1 );
        ; Setup parameters for call to function ZDOInitDeviceEx
        MOV       R1,#0x1
        MOV       R2,#0x0
        MOV       R3,#0x0
        LCALL     `??ZDOInitDeviceEx::?relay`; Banked call to: ZDOInitDeviceEx
        MOV       A,R1
// 1484 }
        MOV       R7,#0x5
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock37
// 1485 
// 1486 /*********************************************************************
// 1487  * @fn      touchLink_DevRejoin
// 1488  *
// 1489  * @brief   Perform a network rejoin
// 1490  *
// 1491  * @param   rejoinInf - pointer to received network parameters
// 1492  *
// 1493  * @return  none
// 1494  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1495 void touchLink_DevRejoin( bdbTLNwkRejoin_t *rejoinInf )
touchLink_DevRejoin:
          CFI Block cfiBlock38 Using cfiCommon0
          CFI Function touchLink_DevRejoin
        CODE
// 1496 {
        FUNCALL touchLink_DevRejoin, ZDApp_SecInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DevRejoin, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DevRejoin, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DevRejoin, touchLink_UpdateNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DevRejoin, ZDApp_LeaveCtrlReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL touchLink_DevRejoin, NLME_ReJoinRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        MOV       A,#-0xf
        LCALL     ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 15)
        ; Saved register size: 15
        ; Auto size: 0
        MOV       A,R2
        MOV       R6,A
        MOV       A,R3
        MOV       R7,A
// 1497     networkDesc_t *pNwkDesc = NULL;
        MOV       ?V0,#0x0
        MOV       ?V1,#0x0
// 1498      
// 1499     // Initialize the security for type of device
// 1500     ZDApp_SecInit( ZDO_INITDEV_RESTORED_NETWORK_STATE );
        ; Setup parameters for call to function ZDApp_SecInit
        MOV       R1,#0x0
        LCALL     `??ZDApp_SecInit::?relay`; Banked call to: ZDApp_SecInit
// 1501     
// 1502     pNwkDesc = (networkDesc_t *)osal_mem_alloc( sizeof( networkDesc_t ) );
        ; Setup parameters for call to function osal_mem_alloc
        MOV       R2,#0x16
        MOV       R3,#0x0
        LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
        MOV       ?V2,R2
        MOV       ?V3,R3
        MOV       ?V0,?V2
        MOV       ?V1,?V3
// 1503     if( pNwkDesc == NULL )
        MOV       A,?V0
        ORL       A,?V1
        JNZ       $+5
        LJMP      ??touchLink_DevRejoin_0 & 0xFFFF
// 1504     {
// 1505       return;
// 1506     }
// 1507          
// 1508     NwkDescList = pNwkDesc;
        MOV       DPTR,#NwkDescList
        MOV       A,?V0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,?V1
        MOVX      @DPTR,A
// 1509     pNwkDesc->panId = rejoinInf->panId;
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,?V0
        MOV       DPH,?V1
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
// 1510     pNwkDesc->logicalChannel = rejoinInf->logicalChannel;
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1511     osal_memcpy( pNwkDesc->extendedPANID, rejoinInf->extendedPANID, Z_EXTADDR_LEN);
        ; Setup parameters for call to function osal_memcpy
        MOV       ?V4,R6
        MOV       ?V5,R7
        MOV       ?V6,#0x0
        MOV       R0,#?V4
        LCALL     ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 18)
        MOV       R4,#0x8
        MOV       R5,#0x0
        MOV       A,?V0
        ADD       A,#0xb
        MOV       R2,A
        CLR       A
        ADDC      A,?V1
        MOV       R3,A
        LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
        MOV       A,#0x3
        LCALL     ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 15)
// 1512     pNwkDesc->chosenRouterDepth = 1;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1513     pNwkDesc->routerCapacity = 1;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1514     pNwkDesc->deviceCapacity = 1;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,#0x1
        MOVX      @DPTR,A
// 1515     pNwkDesc->version = 2;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,#0x2
        MOVX      @DPTR,A
// 1516     pNwkDesc->stackProfile = 2;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,#0x2
        MOVX      @DPTR,A
// 1517     pNwkDesc->chosenRouterLinkQuality = DEF_LQI;
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,#-0x56
        MOVX      @DPTR,A
// 1518     pNwkDesc->chosenRouter = rejoinInf->nwkAddr;
        MOV       A,R6
        ADD       A,#0xc
        MOV       DPL,A
        CLR       A
        ADDC      A,R7
        MOV       DPH,A
        MOVX      A,@DPTR
        MOV       R0,A
        INC       DPTR
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       DPL,?V0
        MOV       DPH,?V1
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOV       A,R0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,R1
        MOVX      @DPTR,A
// 1519     pNwkDesc->updateId = rejoinInf->nwkUpdateId;
        MOV       DPL,R6
        MOV       DPH,R7
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        INC       DPTR
        MOVX      A,@DPTR
        PUSH      A
          CFI CFA_SP SP+-1
        MOV       A,?V0
        ADD       A,#0x13
        MOV       DPL,A
        CLR       A
        ADDC      A,?V1
        MOV       DPH,A
        POP       A
          CFI CFA_SP SP+0
        MOVX      @DPTR,A
// 1520     pNwkDesc->nextDesc = NULL;
        MOV       A,?V0
        ADD       A,#0x14
        MOV       DPL,A
        CLR       A
        ADDC      A,?V1
        MOV       DPH,A
        MOV       A,#0x0
        MOVX      @DPTR,A
        INC       DPTR
        MOV       A,#0x0
        MOVX      @DPTR,A
// 1521     
// 1522     // Save free ranges
// 1523     touchLink_UpdateNV( TOUCHLINK_UPDATE_NV_RANGES );
        ; Setup parameters for call to function touchLink_UpdateNV
        MOV       R1,#0x2
        LCALL     `??touchLink_UpdateNV::?relay`; Banked call to: touchLink_UpdateNV
// 1524 
// 1525     // In case we're here after a leave
// 1526     touchLinkLeaveInitiated = FALSE;
        MOV       DPTR,#touchLinkLeaveInitiated
        MOV       A,#0x0
        MOVX      @DPTR,A
// 1527 
// 1528     // Clear leave control logic
// 1529     ZDApp_LeaveCtrlReset();
        ; Setup parameters for call to function ZDApp_LeaveCtrlReset
        LCALL     `??ZDApp_LeaveCtrlReset::?relay`; Banked call to: ZDApp_LeaveCtrlReset
// 1530     
// 1531     // Let's join the network started by the target
// 1532     NLME_ReJoinRequest( rejoinInf->extendedPANID, _NIB.nwkLogicalChannel);
        ; Setup parameters for call to function NLME_ReJoinRequest
        MOV       DPTR,#_NIB + 22
        MOVX      A,@DPTR
        MOV       R1,A
        MOV       A,R6
        MOV       R2,A
        MOV       A,R7
        MOV       R3,A
        LCALL     `??NLME_ReJoinRequest::?relay`; Banked call to: NLME_ReJoinRequest
        MOV       A,R1
// 1533 }
??touchLink_DevRejoin_0:
        MOV       R7,#0x7
        LJMP      ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock38
// 1534 
// 1535 /*********************************************************************
// 1536  * @fn      touchLink_DeviceIsInitiator
// 1537  *
// 1538  * @brief   Set device initiator flag.
// 1539  *
// 1540  * @param   initiator - new flag value
// 1541  *
// 1542  * @return  none
// 1543  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1544 void touchLink_DeviceIsInitiator( bool initiator )
touchLink_DeviceIsInitiator:
          CFI Block cfiBlock39 Using cfiCommon0
          CFI Function touchLink_DeviceIsInitiator
        CODE
// 1545 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1546   touchLinkIsInitiator = initiator;
        MOV       A,R1
        MOV       DPTR,#touchLinkIsInitiator
        MOVX      @DPTR,A
// 1547 }
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
          CFI EndBlock cfiBlock39
// 1548 
// 1549 /*********************************************************************
// 1550  * @fn      touchLink_DeviceIsInitiator
// 1551  *
// 1552  * @brief   Get device initiator flag.
// 1553  *
// 1554  * @param   none
// 1555  *
// 1556  * @return  touchLinkIsInitiator - flag value
// 1557  */

        RSEG BANKED_CODE:HUGECODE:NOROOT(0)
// 1558 bool touchLink_GetDeviceInitiator( void )
touchLink_GetDeviceInitiator:
          CFI Block cfiBlock40 Using cfiCommon0
          CFI Function touchLink_GetDeviceInitiator
        CODE
// 1559 {
        PUSH      DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH      DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1560   return touchLinkIsInitiator;
        MOV       DPTR,#touchLinkIsInitiator
        MOVX      A,@DPTR
        MOV       R1,A
        POP       DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP       DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP      ?BRET
// 1561 }
          CFI EndBlock cfiBlock40

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for touchLink_EP_SimpleDesc>`:
        DATA8
        DB 13
        DATA16
        DW 49246
        DW 57694
        DATA8
        DB 2
        DB 1
        DATA16
        DW touchLink_EP_InClusterList
        DATA8
        DB 1
        DATA16
        DW touchLink_EP_OutClusterList

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for touchLink_EP>`:
        DATA8
        DB 13
        DB 0
        DATA16
        DW touchLinkTaskId
        DW 0H
        DATA8
        DB 0

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_InitVariables::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_InitVariables

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_InitFreeRanges::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_InitFreeRanges

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_UpdateFreeRanges::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_UpdateFreeRanges

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GerFreeRanges::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GerFreeRanges

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_IsValidSplitFreeRanges::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_IsValidSplitFreeRanges

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SplitFreeRanges::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SplitFreeRanges

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_PopGrpIDRange::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_PopGrpIDRange

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_PopNwkAddress::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_PopNwkAddress

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetNumSubDevices::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetNumSubDevices

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetNumGrpIDs::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetNumGrpIDs

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetSubDeviceInfo::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetSubDeviceInfo

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_EncryptNwkKey::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_EncryptNwkKey

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_DecryptNwkKey::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_DecryptNwkKey

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_BuildAesKey::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_BuildAesKey

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_UpdateNwkKey::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_UpdateNwkKey

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetNwkKeyBitmask::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetNwkKeyBitmask

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GenerateRandNum::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GenerateRandNum

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetRandPrimaryChannel::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetRandPrimaryChannel

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SetNIB::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SetNIB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_ProcessNwkUpdate::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_ProcessNwkUpdate

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_UpdateNV::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_UpdateNV

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_InitNV::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_InitNV

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_ItemInit::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_ItemInit

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SetMacNwkParams::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SetMacNwkParams

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SetChannel::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SetChannel

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SendDeviceInfoRsp::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SendDeviceInfoRsp

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SendLeaveReq::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SendLeaveReq

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetMsgRssi::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetMsgRssi

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_NewNwkUpdateId::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_NewNwkUpdateId

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_SetTouchLinkTaskId::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_SetTouchLinkTaskId

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_PerformNetworkDisc::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_PerformNetworkDisc

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_BeaconIndCB::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_BeaconIndCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_NwkDiscoveryCnfCB::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_NwkDiscoveryCnfCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_FreeNwkParamList::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_FreeNwkParamList

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_IsValidTransID::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_IsValidTransID

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_RouterProcessZDOMsg::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_RouterProcessZDOMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_PermitJoin::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_PermitJoin

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLinkStartRtr::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLinkStartRtr

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_DevRejoin::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_DevRejoin

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_DeviceIsInitiator::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_DeviceIsInitiator

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
`??touchLink_GetDeviceInitiator::?relay`:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    touchLink_GetDeviceInitiator

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {80, 104, 76, 105, 234, 156, 209, 5`:
        DB 80
        DB 104
        DB 76
        DB 105
        DB 234
        DB 156
        DB 209
        DB 56
        DB 67
        DB 76
        DB 83
        DB 78
        DB 143
        DB 141
        DB 186
        DB 180

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {192, 193, 194, 195, 196, 197, 198,`:
        DB 192
        DB 193
        DB 194
        DB 195
        DB 196
        DB 197
        DB 198
        DB 199
        DB 200
        DB 201
        DB 202
        DB 203
        DB 204
        DB 205
        DB 206
        DB 207

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {80, 104, 76, 105, 234, 156, 209, 5_1`:
        DB 80
        DB 104
        DB 76
        DB 105
        DB 234
        DB 156
        DB 209
        DB 56
        DB 67
        DB 76
        DB 83
        DB 78
        DB 143
        DB 141
        DB 186
        DB 180

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {192, 193, 194, 195, 196, 197, 198,_1`:
        DB 192
        DB 193
        DB 194
        DB 195
        DB 196
        DB 197
        DB 198
        DB 199
        DB 200
        DB 201
        DB 202
        DB 203
        DB 204
        DB 205
        DB 206
        DB 207

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_1:
        DD 1

        END
// 1562 
// 1563 #endif // BDB_TL_TARGET || BDB_TL_INITIATOR
// 1564 
// 1565 /*********************************************************************
// 1566 *********************************************************************/
// 
// 6 209 bytes in segment BANKED_CODE
//   246 bytes in segment BANK_RELAYS
//    19 bytes in segment XDATA_I
//    19 bytes in segment XDATA_ID
//    72 bytes in segment XDATA_ROM_C
//    41 bytes in segment XDATA_Z
// 
//   265 bytes of CODE     memory
//    68 bytes of CONST    memory (+ 4 bytes shared)
// 6 209 bytes of HUGECODE memory
//    60 bytes of XDATA    memory
//
//Errors: none
//Warnings: none
